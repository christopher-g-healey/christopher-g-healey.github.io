<!DOCTYPE html>

<html lang="en">

<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="UTF-8" />
  
<link rel="icon" type="image/x-icon" href="../../figs/favicon-IAA.ico">


<!-- Google fonts stuff -->

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<link rel="stylesheet" rel="https://fonts.googleapis.com/css2?family=Fira+Code&Display=swap">
<link rel="stylesheet" rel="https://fonts.googleapis.com/css2?family=Noto+Serif:ital@0;1&display=swap">
<link rel="stylesheet" rel="https://fonts.googleapis.com/css2?family=Noto+Sans+Display:wght@400;700&display=swap">

<!-- JQuery package -->

<link type="text/css" href="../../css/redmond/jquery-ui-1.10.2.css" rel="stylesheet" />
<script type="text/javascript" src="../../js/jquery-1.9.1.js"></script>
<script type="text/javascript" src="../../js/jquery-ui-1.10.2.min.js"></script>

<!-- Style header for jQuery accordions -->

<style>
.ui-accordion-header {
  font-family: 'Noto Sans Display', sans-serif;
  font-style: normal;
}
</style>


<!-- Full document hyphenation -->
  
<style>
body {
  hyphens: auto;
  -webkit-hyphens: auto;
  -moz-hyphens: auto;
  -ms-hyphens: auto;
}
</style>

<!-- MathJax math formatting -->

<script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<script>
MathJax = {
  loader: {
    load: ['[tex]/colortbl']
  },
  tex: {
    tags: 'ams',
    packages: { '[+]': ['colortbl'] }
    }
};
</script>


<!-- Course page CSS and JS -->

<link type="text/css" href="../../css/course.css" rel="stylesheet" />
<script type="text/javascript" src="../../js/course.js"></script>
<script type="text/javascript" src="../../js/mod-date.js"></script>
  
<!-- Overrides for standard course CSS -->

<!--
<link type="text/css" href="msa-python.css" rel="stylesheet" />
-->


<title>Python Tutorial: Institute for Advanced Analytics</title>
</head>

<body bgcolor="white">

<div style="text-align:center;">
<span style="
  position: relative;
  display: inline-block;
  width: 100%;
  max-width: 1100px;
  height: 330px;
  background-image: url( 'fig/python-logo.png' );
  background-repeat: no-repeat;
">
<div style="
  position: absolute;
  align: right;
  bottom: 15px;
  right: 20px;
  font-family: 'Trebuchet MS', Helvetica, sans-serif;
  font-size: 16pt;
  font-weight: normal;
  color: #646464;
">
  Python Tutorial
  <div style="font-size: 10pt;">
    <a target="_blank" href="https://www.csc2.ncsu.edu/faculty/healey">
    <i>Christopher G. Healey</i>
    </a>
  </div>
</div>
<div style="
  position: absolute;
  align: right;
  top: 0px;
  left: 0px;
">
  <a target="_blank" href="https://www.ncsu.edu">
    <img alt="NC State Logo" src="fig/nc-state-logo-blue.png"
     style="
       border-style: none;
       -moz-box-shadow: 1px 1px 8px #646464;
       -webkit-box-shadow: 1px 1px 8px #646464;
       box-shadow: 1px 1px 8px #646464;
     " alt="nc-state-logo">
  </a>
</div>
</span>
</div>

<!--Spacer after image of one "line"-->

<div style="height: 1em;"></div>

<!-- Navigation toolbar -->

<div id="navWrap">
  <div id="nav">
    <ul id="nav-list">
      <li id="nav-intro:intro">Introduction
      <li id="nav-var:var">Variables
      <li id="nav-op:op">Operators
      <li id="nav-datatype:datatype">Data Types
      <li id="nav-cond:cond">Conditionals
      <li id="nav-file:file">Files
      <li id="nav-func:func">Functions
      <li id="nav-numpy:numpy">NumPy
      <li id="nav-pandas:pandas">pandas
      <li id="nav-sklearn:sklearn">sklearn
      <li id="nav-web:web">Web
      <li id="nav-prac:practice">Practice
    </ul>
  </div>

  <div id="nav-footer">
  </div>
</div>


<h2 id="intro">Introduction</h2>

<p>A computer program is a sequence of instructions, written in a
<em>programming language</em>, that combine together to solve a
problem or produce a desired result. Computer programs range from very
simple examples with only a few lines of <em>source code</em>, to very
complicated. For example, Windows 11 is estimated to contain around
60&ndash;100 million lines of code.</p>

<p>In general, programming involves the following steps:</p>

<ol>

  <li>A program is written in some programming language
  (<em>e.g.</em>, C++, Python, R, or Javascript), usually stored in
  one or more source code files.

  <li>For compiled languages like C or C++, the source code is
  converted into machine language by a compiler, then combined into an
  executable file by a linker. The executable file is run on a target
  machine and operating system.

  <li>For interpreted languages like Python and R, the source code is
  processed by an interpreter. Individual lines are converted to
  machine language and executed one by one, as they are encountered
  within the source code.

</ol>

<p>This tutorial will provide an introduction to programming using
<a target="_blank" href="https://www.python.org">Python</a>,
an <em>interpreted</em> programming language. Python was conceived in
the late 1980s by Guido van Rossum at <a target="_blank"
href="https://www.cwi.nl">Centrum Wiskunde &amp; Informatica</a>
(National Research Institute for Mathematics and Computer Science) in
the Netherlands. Python 1.0 was released in 1994. The most recent
version is 3.10.2, released in January 2022. To maintain backwards
compatibility, Python versions 3.0 and 3.1 coincided with versions 2.6
and 2.7. We will be using Python version 3.9.x.

<p>Since Python is an interpreted language, individual lines of code
are converted to machine language and executed as they are encountered
(versus a compiled language, which converts an entire program to
machine code in an explicit compile&ndash;link stage). One advantage
of an interpreted language is the ability to enter individual commands
on a command line prompt, and immediately see their results.</p>


<div class="code-div">
  <span title="copy code" id="code-01-img" class="code-div-img"></span>
  <div id="code-01">
  &gt;&gt;&gt; print( 2 + 5 )<br>7<br>

  &gt;&gt;&gt; l = [ 1, 2, 3 ]<br>

  &gt;&gt;&gt; print( l )<br>[1, 2, 3]<br>

  &gt;&gt;&gt; print( l[ 0 ] )<br>1<br>

  &gt;&gt;&gt; email = { 'healey': 'healey@ncsu.edu', 'rappa':
  'mrappa@ncsu.edu' }<br>

  &gt;&gt;&gt; print( email )<br>{'rappa': 'mrappa@ncsu.edu', 'healey':
  'healey@ncsu.edu'}<br>

  &gt;&gt;&gt; print( email[ 'healey' ] )<br>healey@ncsu.edu<br>

  &gt;&gt;&gt; basket = [ 'orange', 'apple', 'pear', 'apple', 'durian',
  'orange' ]<br>

  &gt;&gt;&gt; fruit = set( basket )<br>

  &gt;&gt;&gt; print( fruit )<br>{'durian', 'orange', 'apple', 'pear'}<br>

  &gt;&gt;&gt; print( 'durian' in fruit )<br>True<br>

  &gt;&gt;&gt; print( 'pomegranate' in fruit )<br>False<br>
  </div>
</div>


<p>Unless we're only issuing a few commands once or twice, we normally
store the commands in source code files. This allows us to load and
execute the commands as often as we want. It also makes it easier to
modify a program, or correct it when we discover errors. A slightly
modified version of the above code (to force output to appear when it's
run) is available in the source code
file <a href="tut-01-intro.py"><code>tut-01-intro.py</code></a>.</p>

<p>A source code file in Python is called a <em>module</em>. Every
Python program includes a <em>main</em> module. When the program
starts running, it begins interpreting code in the main module. You
can also split your code across additional modules to organize it, or
use <em>libraries</em> to access functionality provided by other
programmers.
</p>


<h3>Assignments</h3>

<p>The assignment for the Summer 2 session asks you to use Open
Weather Map's API (Application Programming Interface) to query
forecasted temperature data. You will write your results to a CSV
file. The <a href="./assn-openweathermap/" target="_blank">assignment
web page</a> provides full details on what is required.</p>

<p>The assignment will be completed as individuals, and not as a
homework team. Grading for the assignments will be on a standard
0&ndash;100% scale. You will submit the Python code for your completed
assignment through <a href="https://wolfware.ncsu.edu"
target="_blank">Moodle</a>. Look for "Python Programming:
OpenWeatherMap API Assignment". </p>


<h3>Running Python</h3>

<p>For this class, we'll be using the Anaconda Scientific with Python
3 for Windows. We will be using <a target="_blank"
href="https://www.anaconda.com/products/individual">Anaconda's Windows
Python 3.7 installer</a>. Anaconda includes
the <a href="https://numpy.org" target="_blank">NumPy</a>
(numerical Python), <a href="https://pandas.pydata.org"
target="_blank">pandas</a> (Python data analysis),
<a href="https://scikit-learn.org/stable/"
target="_blank">scikit-learn</a>,
<a href="https://docs.python.org/3/library/urllib.html"
target="_blank">urllib</a> (URL management), and
<a target="_blank"
href="https://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a>
libraries that we'll be using in this tutorial.</p>

<p>Once Anaconda is installed, I recommend running <code>Anaconda
Navigator</code> and choosing either <code>Jupyter notebook</code>
or <code>spyder</code> as your programming environment.</p>

<p>On most platforms, Python is normally installed by default. If it
is, you can run the Anaconda Prompt (Anaconda 3) and
type <code>python</code> at a command line prompt to bring up a Python
shell. Make sure you do this using the Anaconda Prompt and not a regular
Windows 10 command line, to ensure all the proper PATH variables to
appropriate Python packages are set.</p>

<p>If you choose to use iPython Notebook, executed in the Anaconda
Prompt with <code>ipython</code>, you can use the <code>%run</code>
command to execute Python code from a file, or <code>%load</code> to
load it from a URL into the current iPython cell:</p>

<div class="code-div">
  &gt;&gt;&gt; %run tut-01-intro<br>
  &gt;&gt;&gt; %load https://www.csc2.ncsu.edu/faculty/healey/msa-20/python/tut-01-intro.py
</div>


<h3>Why Python?</h3>

<p>Python is a powerful programming language that can perform many
functions. For this class, our interest is in Python's data management
capabilities. Python offers efficient ways to read data from one or
more input files, then modify, correct, convert, or extend that data
and write the results to an output file.</p>

<p>For example, suppose we had the following comma-separated value
(CSV) file:</p>

<blockquote>
  <code>Name,Height</code><br>
  <code>Jim,181</code><br>
  <code>Betty,167</code><br>
  <code>Frank,154</code><br>
  <code>...</code><br>
  <code>Annabelle,201</code>
</blockquote>

<p>We want to classify each individual based on his or her
height <em>h<sub>i</sub></em> versus the mean and standard deviation
of height &mu; and &sigma; as:<p>

<ul>
  <li>Class 1:&nbsp;&nbsp;|&thinsp;<em>h<sub>i</sub></em> -
  &mu;&thinsp;| &leq; &sigma;

  <li>Class 2:&nbsp;&nbsp;|&thinsp;<em>h<sub>i</sub></em> -
  &mu;&thinsp;| &leq; 2&sigma;

  <li>Class 3:&nbsp;&nbsp;<em>h<sub>i</sub></em> - &mu; &lt; -2&sigma;

  <li>Class 4:&nbsp;&nbsp;<em>h<sub>i</sub></em> - &mu; &gt;&gt;&gt;; 2&sigma;
</ul>

<p>producing a new CSV output file with contents:</p>

<blockquote>
  <code>Name,Height,Class</code><br>
  <code>Jim,181,2</code><br>
  <code>Betty,167,1</code><br>
  <code>Frank,154,3</code><br>
  <code>...</code><br>
  <code>Annabelle,201,4</code>
</blockquote>

<p>Python isn't the only way to produce this result (<i>e.g.</i>, we
could probably do it in Excel, or SAS, or R), but it's often easier
and faster to do it with a Python program. If you're curious,
<a href="tut-02-classify.py">this source code file</a> classifies a
comma-delimited height file. A <a href="./ht.csv">corresponding (very
simple) height file</a> is also available in CSV format.</p>


<h2 id="var">Variables</h2>

<p>Every programming language provides a way to maintain values as a
program runs. Usually, this is done by create a <em>named
variable</em>, then assigning a value to the variable. In Python,
variables are created interactively by specifying their name and
assigning them an initial value.</p>

<div class="code-div">
  &gt;&gt;&gt; name = 'Abraham Lincoln'<br>

  &gt;&gt;&gt; height = 6.33<br>

  &gt;&gt;&gt; age = 56<br>

  &gt;&gt;&gt; birthplace = 'Hodgenville KY'<br>

  &gt;&gt;&gt; born = 'February 12 1809'<br>

  &gt;&gt;&gt; deceased = 'April 15 1865'<br>
</div>

<p>Unlike languages like C++, Python does not require you to specify a
variable's <em>type</em>. This is inferred from the value it
maintains. In the above example the variables <code>name</code>,
<code>birthplace</code>, <code>born</code>, and <code>deceased</code>
are inferred to be strings, <code>height</code> is inferred to be
floating point, and <code>age</code> is inferred to be integer. One
advantage of Python's <em>dynamically typed</em> variables is that you
can change them to hold different types of values whenever you
want. You can also ask Python what type of value a variable contains
with the <code>type()</code> function.

<div class="code-div">
<span title="copy code" id="code-02-img" class="code-div-img"></span>
<div id="code-02">
  &gt;&gt;&gt; name = 'Abraham Lincoln'<br>

  &gt;&gt;&gt; print( type( name ) )<br>

  &lt;class 'str'<br>

  &gt;&gt;&gt; name = 25<br>

  &gt;&gt;&gt; print( type( name ) )<br>

  &lt;class 'int'<br>

  &gt;&gt;&gt; name = 6.3<br>

  &gt;&gt;&gt; print( type( name ) )<br>

  &lt;class 'float'<br>

  &gt;&gt;&gt; name = 305127925769258727938193819283<br>

  &gt;&gt;&gt; print( type( name ) )<br>

  &lt;class 'int'<br>

  &gt;&gt;&gt; name = False<br>

  &gt;&gt;&gt; print( type( name ) )<br>

  &lt;class 'bool'<br>
</div>
</div>

<p>Here is a quick list of some of Python's basic variable types.
More complicated types will be discussed later in the tutorial.</p>

<ul>
  <li><b>bool.</b> Boolean or "truth" variables. Possible values
  are <code>True</code> and <code>False</code>.

  <li><b>int.</b> Integer variables, whole number values with no
  fractional part. Possible values depend on the machine you're
  using. <code>sys.maxint</code> and <code>-sys.maxint - 1</code> can
  be used to query the machine's maximum and minimum integer values.

  <li><b>long.</b> Large integer variables. Python does not limit the
  size of long integers.

  <li><b>float.</b> Floating point variables, numbers with fractional
  parts. Possible values depend on the machine you're
  using. <code>sys.float_info.max</code> can be used to query the
  machine's maximum float value.

</ul>


<h3>Variable Practice Problem</h3>

<p>Write a set of Python statements that assign the names and
associated phone numbers: Christopher Healey, 9195138112, Michael
Rappa, 9195130480, and Aric LaBarr, 9195132957 to Python variables,
then prints three lines listing each person's name and corresponding
phone number.</p>

<p>I recommend you write your program using <code>Jupyter
notebook</code> or <code>spyder</code>, save it as a Python notebook
or source code file, and then test it, rather than writing the program
directly in the Python shell. This will let you write your code, run
it to see what it does, edit it to fix problems, and run it again,
without having to re-type the entire program at the command line.</p>


<div id="var-accordion" class="detail">
  <h3>Variable Assignment Solution</h3>
  <div style="background: none; background-color: #e7eefb;">
    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-03-img" class="code-div-img"></span>
      <div id="code-03">
      &gt;&gt;&gt; name_0 = 'Christopher Healey'<br>

      &gt;&gt;&gt; phone_0 = '9195138112'<br>

      &gt;&gt;&gt; name_1 = 'Michael Rappa'<br>

      &gt;&gt;&gt; phone_1 = '9195130480'<br>

      &gt;&gt;&gt; name_2 = 'Aric LaBarr'<br>

      &gt;&gt;&gt; phone_2 = '9195132957'<br>

      &gt;&gt;&gt;<br>

      &gt;&gt;&gt; print( name_0, '@', phone_0 )<br>

      Christopher Healey @ 9195138112<br>

      &gt;&gt;&gt;<br>

      &gt;&gt;&gt; print( name_1, '@', phone_1 )<br>

      Michael Rappa @ 9195130480<br>

      &gt;&gt;&gt;<br>

      &gt;&gt;&gt; print( name_2, '@', phone_2 )<br>

      Aric LaBarr @ 9195132957<br>
      </div>
    </div>

    <p>You can <a style="color: #e17009" href="tut-03-var.py">download
    the solution file</a> and run it on your machine, if you want.</p>

    <p>Your choice of variable names is probably different than ours,
    and you might have printed the name and phone number with slightly
    different formatting. Regardless, the basic idea is to use six
    separate variables to store the names and phone numbers, then
    print the contents of these variables in combinations that produce
    the correct output.</p>

    <p>You might think, "This works, but it doesn't seem very
    efficient." That's true. Once you've learned more about Python,
    it's unlikely you'd write this code to solve the problem. Here's a
    more elegant and flexible solution. When you've finished the
    tutorial, you'll be able to understand, and to implement, this
    type of code.</p>

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-04-img" class="code-div-img"></span>
      <div id="code-04">
      &gt;&gt;&gt; db = { }<br>

      &gt;&gt;&gt; db[&nbsp;'9195138112'&nbsp;] = 'Christopher Healey'<br>

      &gt;&gt;&gt; db[&nbsp;'9195130480'&nbsp;] = 'Michael Rappa'<br>

      &gt;&gt;&gt; db[&nbsp;'9195132957'&nbsp;] = 'Aric LaBarr'<br>

      &gt;&gt;&gt; for phone in db.keys():<br>

      ... <span class="tab-1">print( db[&nbsp;phone&nbsp;], '@', phone</span> )<br>

      ...<br>

      Michael Rappa @ 9195130480<br>

      Christopher Healey @ 9195138112<br>

      Aric LaBarr @ 9195132957<br>
      </div>
    </div>

  </div>
</div>


<h2 id="op">Operators</h2>

<p>Python provides a set of built-in functions or <em>operators</em>
to perform simple operations such as addition, subtraction,
comparison, and boolean logic. An expression is a combination of
variables, constants, and operators. Every expression has a
result. Operators in Python have <em>precedence</em> associated with
them. This means expressions using operators are not evaluated
strictly left to right. Results from the operators with the highest
precedence are computed first. Consider the following simple Python
expression:</p>

<div class="code-div">
  &gt;&gt;&gt; 6 + 3 * 4 / 2 + 2<br>14
</div>

<p>If this were evaluated left to right, the result would be
20. However, since multiplication and division have a higher
precedence than addition in Python, the result returned is 14,
computed as follows.</p>

<ul>

  <li><code><span style="color: #c0c0c0">6 +</span> 3 *
  4 <span style="color: #c0c0c0">/ 2 + 2</span></code>

  <li><code><span style="color: #c0c0c0">6 +</span> 12 /
  2 <span style="color: #c0c0c0"> + 2</span></code>

  <li><code>6 + 6 <span style="color: #c0c0c0">+ 2</span></code>

  <li><code>12 + 2</code>

  <li><code>14</code>

</ul>

<p>Of course, we can use parentheses to force a result of 20, if
that&rsquo;s what we wanted, with the following expression:</p>

<div class="code-div">
  &gt;&gt;&gt; ((( 6 + 3 ) * 4 ) / 2 ) + 2<br>20
</div>

<p>Below is a list of the common operators in Python, along with an
explanation of what they do. The operators are group according to
precedence, from highest to lowest.</p>

<div>
<table style="margin-left: auto; margin-right: auto;">

<tr>
  <th>Operator</th>
  <th>Description</th>
</tr>

<tr class="even">
  <td><code>( )</code></td>
  <td>parentheses define the order in which groups of operators should
  be evaluated</td>
</tr>

<tr class="odd">
  <td><code>**</code></td>
  <td>exponential</td>
</tr>

<tr class="even">
  <td><code>+x</code>, <code>-x</code></td>
  <td>make positive, make negative</td>
</tr>

<tr class="odd">
  <td><code>*</code>, <code>/</code>, <code>//</code>, <code>%</code></td>
  <td>multiplication, division, floor division, remainder</td>
</tr>

<tr class="even">
  <td><code>+</code>, <code>-</code></td>
  <td>addition, subtraction</td>
</tr>

<tr class="odd">
  <td>
    <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>,
    <code>&gt;=</code>, <code>!=</code>, <code>==</code>
  </td>
  <td>less, less or equal, greater, greater or equal, not equal,
  equal</td>
</tr>

<tr class="even">
  <td><code>and</code></td>
  <td>boolean AND</td>
</tr>

<tr class="odd">
  <td><code>or</code></td>
  <td>boolean OR</td>
</tr>

<caption>
  <b>Order of precedence for Python operators</b>
</caption>

</table>
</div>


<h2 id="datatype">Advanced Data Types</h2>

<p>In addition to boolean and numeric variables, Python provides a
number of more complex types, including strings (str), lists (list),
dictionaries (dict), or tuples (tuple). Using these types effectively
will make you a much more efficient programmer.</p>


<h3>str</h3>

<p>String variables (str) are a sequence of one or more characters.
String values are denoted by single quotes, <code>s = 'Abraham
Lincoln'</code>, or double quotes, <code>s = "Abraham
Lincoln"</code>. Because strings are a more complex data type, they
support more complex operations. Here are some common operations you
can perform on strings.</p>

<ul>

  <li><code>len(&nbsp;s&nbsp;)</code>, return the length (the number
  of characters) in <code>s</code>.

  <li><code>s + t</code>, concatenate <code>s</code>
  and <code>t</code>, returning a new string as the result.

  <li><code>s[&nbsp;i&nbsp;]</code>, return the <em>i</em>-th
  character in <code>s</code>. The first character in <code>s</code>
  is at <code>s[&nbsp;0&nbsp;]</code>.

  <li><code>s[&nbsp;i: j&nbsp;]</code>, <em>slice</em> <code>s</code>
  and return the substring from <code>s[&nbsp;i&nbsp;]</code> up to,
  but not including <code>s[&nbsp;j&nbsp;]</code>.

  <li><code>s[&nbsp;-i&nbsp;]</code>, return the <em>i</em>-th
  character <em>from the end</em> of <code>s</code>.

</ul>

<p>Here are some examples of string operations executed in a Python
shell.</p>

<div class="code-div">
  <span title="copy code" id="code-05-img" class="code-div-img"></span>
  <div id="code-05">
  &gt;&gt;&gt; s = 'Hello world!'<br>

  &gt;&gt;&gt; print( len( s ) )<br>12<br>

  &gt;&gt;&gt; print( s[&nbsp;6&nbsp;] )<br>'w'<br>

  &gt;&gt;&gt; print( s[&nbsp;2: 8&nbsp;] )<br>'llo wo'<br>

  &gt;&gt;&gt; print( s[&nbsp;-2&nbsp;] )<br>'d'<br>

  &gt;&gt;&gt; print( s[&nbsp;-3: 12&nbsp;] )<br>'ld!'<br>

  &gt;&gt;&gt; t = 'Must.. try.. harder..'<br>

  &gt;&gt;&gt; print( s + ' ' + t )<br>
  'Hello world! Must.. try.. harder..'
  </div>
</div>

<p>There are many additional operations you can perform on strings,
for example, <code>s.capitalize()</code> to capitalize a string, or
<code>s.find(&nbsp;t&nbsp;)</code> to find the first occurrence of
substring <code>t</code> in <code>s</code>. The Python
documentation
<a target="_blank"
href="https://www.tutorialspoint.com/python/python_strings.htm">describes
all the available string methods</a>, explaining how to use them and
what they do.</p>


<h3>list</h3>

<p>List variables are ordered sequences of values. Most data types can
be stored in a list, for example, a list of int's, a list of str's, or
even a list of list's. List values are denoted by square
brackets, <code>l = [&nbsp;1, 2, 3, 4&nbsp;]</code>.</p>

<p>You might notice that strings look suspiciously like a list of
characters. Indeed, both list and str are known as "sequence types" in
Python, so lists support the same <code>len</code>, concatenation,
indexing, and slicing operations as strings.</p>

<div class="code-div">
  <span title="copy code" id="code-06-img" class="code-div-img"></span>
  <div id="code-06">
  &gt;&gt;&gt; l = [&nbsp;1, 2, 3, 4, 5&nbsp;]<br>

  &gt;&gt;&gt; print( len( l ) )<br>5<br>

  &gt;&gt;&gt; print( l[&nbsp;2&nbsp;] )<br>3<br>

  &gt;&gt;&gt; print( l[&nbsp;1: 3&nbsp;] )<br>[2, 3]<br>

  &gt;&gt;&gt; print( l[&nbsp;-2&nbsp;] )<br>4<br>

  &gt;&gt;&gt; print( l[&nbsp;-3: 5&nbsp;] )<br>[3, 4, 5]<br>

  &gt;&gt;&gt; m = [&nbsp;-2, -3, -4&nbsp;]<br>

  &gt;&gt;&gt; print( l + m )<br>
  [1, 2, 3, 4, 5, -2, -3, -4]
  </div>
</div>

<p>As with strings, there are many additional operations you can
perform on lists, for
example, <code>l.insert(&nbsp;i,&nbsp;x&nbsp;)</code>
and <code>l.remove(&nbsp;i&nbsp;)</code> to add and remove items, or
<code>l.sort()</code> to reorder items into sorted order.  The Python
documentation
<a target="_blank"
href="https://www.tutorialspoint.com/python/python_lists.htm">describes
the available list methods</a>, explaining how to use them and what
they do.</p>


<h3>dict</h3>

<p>Dictionary variables are a collection of key&ndash;value pairs.
This is meant to be analogous to a real dictionary, where
the <em>key</em> is a word, and the associated <em>value</em> is the
word's definition. dict variables are designed to support efficient
searching for elements in the dictionary based on key.  Dictionary
values are denoted by braces, <code>d = {&nbsp;key:
value&nbsp;}</code>.

<p>By design, dictionaries have one important requirement: every value
you store in a dictionary must have its own, unique key. For example,
we could not store a person's address using their last name as a key,
because if two different people had the same last name, only one of
their addresses could be saved in the dictionary.</p>

<p>Suppose instead we wanted to find a person's name based on their
phone number. To do this, we could create a dictionary with phone
number as a key and name as a value.</p>

<div class="code-div">
  <span title="copy code" id="code-07-img" class="code-div-img"></span>
  <div id="code-07">
  &gt;&gt;&gt; d = { '9195138112': 'Christopher Healey' }<br>

  &gt;&gt;&gt; d[&nbsp;'9195130480'&nbsp;] = 'Michael Rappa'<br>

  &gt;&gt;&gt; d[&nbsp;'9195152858'&nbsp;] = 'Dept of Computer Science'<br>

  &gt;&gt;&gt; print( d )<br>

  {'9195130480': 'Michael Rappa', '9195138112': 'Christopher Healey',
  '9195152858': 'Dept of Computer Science'}<br>

  &gt;&gt;&gt; print( d[&nbsp;'9195138112'&nbsp;] )<br>

  'Christopher Healey'
  </div>
</div>

<p>The first statement creates a dictionary variable
named <code>d</code> and assigns a single key&ndash;value pair made up
of a string phone number key
<code>9195138112</code> and a string name value <code>Christopher
Healey</code>. The next two lines add two new key&ndash;value pairs
to <code>d</code> by specifying a key as an index (an string phone
number inside the square brackets) and assigned a name as the key's
value. Printing <code>d</code> lists all its key&ndash;value pairs.
The value attached to a specific key can be queried by
indexing <code>d</code> with the target key.</p>

<div id="dict-accordion" class="detail">
  <h3>Key Types</h3>
  <div style="background: none; background-color: #e7eefb;">
    <p>Why did we choose to make our key a string variable and not a
    numeric variable? The dictionary would work if we used <code>d =
    {&nbsp;9195138112: 'Christopher Healey'&nbsp;}</code>, with a long
    integer for the key rather than a string. Our choice was semantic:
    we view a phone number as a sequence of (numeric) characters, and
    not as a generic numeric value. It doesn't make sense to add or
    subtract phone numbers, for example, so phone numbers don't really
    act like numbers.</p>

    <p>Since the dictionary works identically either way, does it
    really matter? In terms of functionality, probably not. In terms
    of understandability, that depends. We try to find the best match
    between the context of a variable and its type. Here, the point is
    subtle, so it doesn't make a big difference. In other cases,
    though, a proper choice (rather than simply the first choice that
    works) can improve a program's effectiveness, and perhaps more
    importantly, make it easier to understand.</p>
  </div>
</div>

<p>One interesting difference between a dictionary and a list is that
dictionaries do not maintain order. The order that items are stored in
a dictionary will not necessarily match the order that you added them
to the dictionary. You can see this in the above example, where phone
numbers were added in the order
<code>9195138112</code>, <code>9195130480</code>, <code>9195152858</code>,
but they were stored in <code>d</code> in the
order <code>9195130480</code>, <code>9195138112</code>,
then <code>9195152858</code>.</p>

<p>Dictionaries are a very powerful data structure. If you need to
perform efficient search, if ordering the element's isn't critical,
and if you can define a key for each of the elements you're storing, a
dict might be a good candidate.

There are many additional operations you can perform on dictionaries,
for example, <code>d.keys()</code> to return a list of keys in the
dictionary, <code>d.values()</code> to return a list of its values,
or <code>d.pop(&nbsp;k&nbsp;)</code> to remove an entry with
key <code>k</code> (and return its value, if you want it). The Python
documentation
<a target="_blank"
href="https://www.tutorialspoint.com//python/python_dictionary.htm">describes
the available dictionary methods</a>, explaining how to use them and
what they do.</p>


<h3>tuple</h3>

<p>Tuple variables are ordered sequences of values, where the position
of a value within the tuple often has a semantic meaning.  Tuple
values are denoted by parentheses, <code>t = (&nbsp;2013, 10, 28, 14,
15, 0&nbsp;)</code>.</p>

<p>You might notice that tuples look identical to lists. Again, both
are "sequence types" in Python, so tuples support the
<code>len</code>, concatenation, and slicing operations, as well as
querying by index.</p>

<div class="code-div">
  <span title="copy code" id="code-08-img" class="code-div-img"></span>
  <div id="code-08">
  &gt;&gt;&gt; t = ( 2013, 10, 28, 14, 15, 0 )<br>

  &gt;&gt;&gt; print( len( t ) )<br>6<br>

  &gt;&gt;&gt; print( t[&nbsp;0&nbsp;] )<br>2013<br>

  &gt;&gt;&gt; print( t[&nbsp;3: 6&nbsp;] )<br>(14, 15, 0)<br>

  &gt;&gt;&gt; print( t[&nbsp;-3&nbsp;] )<br>14<br>

  &gt;&gt;&gt; print( t[&nbsp;-6: 3&nbsp;] )<br>(2013, 10, 28)<br>

  &gt;&gt;&gt; u = ( 1, 232, 1 )<br>

  &gt;&gt;&gt; print( t + u )<br>
  (2013, 10, 28, 14, 15, 0, 1, 232, 1)
  </div>
</div>

<p>There are important differences between lists and tuples. Although
they are subtle, understanding them will help you decide when to use a
list, and when to use a tuple.</p>

<ul>

  <li>Values in a tuple cannot be changed after they are assigned
  (<i>i.e.,</i> tuples are immutable). If you tried something
  like <code>t[&nbsp;0&nbsp;] = 10</code>, Python will return an error
  message.

  <li>The position of a value in a tuple often has a semantic
  meaning. In the example above with <code>t = (&nbsp;2013, 10, 28,
  14, 15, 0&nbsp;)</code>, <code>t</code> represents a date-time value
  containing year, month, day, hour, minute, and second. So, each
  position in this kind of tuple matters: year is
  at <code>t[&nbsp;0&nbsp;]</code>, month is
  at <code>t[&nbsp;1&nbsp;]</code>, and so on.

  <li>Because tuples are immutable, they can be used in places that
  lists cannot. For example, a tuple can be used as a key in a
  dictionary entry. A list cannot be used as a key, since it would be
  possible to change the value of the list after it was stored in the
  dictionary, breaking the original key&ndash;value association.

</ul>

<p>Tuples support methods that lists support, as long as the
method <em>does not</em> modify the tuple's values. So, for example,
tuples support <code>len()</code> and <code>+</code>, but not
<code>remove()</code> or <code>sort()</code>, since that changes the
tuple's values or the order of its values.</p>


<h2 id="cond">Conditionals</h2>

<p>We've already seen that a Python program runs by executing the
first statement in the main module, and continuing with each
successive statement until it reaches the end of the program. This
doesn't allow for very complicated programs. What if want to control
the flow of execution, that is, what if we want one part of the
program to be executed in some cases, but another part to be executed
in different cases?</p>

<p><em>Conditional statements</em> allow you to control how your
program executes. For example, a conditional statement could apply a
comparison operator to a variable, then execute different a block of
statements depending on the result of the comparison.  Or, it could
cause a block of statements to be executed repeatedly until some
condition is met.</p>

<p>Understanding condition statements is necessary for writing even
moderately complicated programs. We discuss some common Python
conditional operators below, and give details on how to structure your
code within a conditional statement.</p>


<h3>if-then-else</h3>

<p>To start, we'll discuss the if-then-else conditional. Described in
simple terms, this is used in a program to say, "<em>If</em> some
condition is true, <em>then</em> do this, <em>else</em> do that."</p>

<p>As an example, suppose we have a variable <code>grade</code> that
holds a student's numeric grade on the range 0&ndash;100. We want to
define a new variable <code>passed</code> that's set
to <code>True</code> if the student's grade is 50 or higher,
or <code>False</code> if the grade is less than 50. The following
Python conditional will do this.</p>

<div class="code-div">
  <span title="copy code" id="code-09-img" class="code-div-img"></span>
  <div id="code-09">
  &gt;&gt;&gt; grade = 75<br>

  &gt;&gt;&gt; if grade &gt;= 50:<br>

  ... <span class="tab-1">passed = True</span><br>

  ... else:<br>

  ... <span class="tab-1">passed = False</span><br>

  ...<br>

  &gt;&gt;&gt; print( passed )<br>

  True<br>
  </div>
</div>

<p>Although this statement appears simple, there are a number of
important details to discuss.</p>

<ul>

  <li>The comparison operation <code>grade &gt;= 50</code> evaluates
  to <code>True</code> if <code>grade</code>'s value is 50 or greater,
  and <code>False</code> if it isn't. The if conditional uses this
  boolean result to decide which part of the conditional statement to
  execute.

  <li>Notice there are colons (<code>:</code>) after the if statement
  and the else statement.

  <li>The <em>code blocks</em> that make up the then and else parts of
  the conditional are indented with a single Tab character. This
  identifies which statement(s) make up each code block. Identifying
  code blocks with Tabs is
  <b>required</b> in Python.

  <li>There is no explicit then keyword in Python. The first code
  block following the if statement is executed if the conditional
  passes.

</ul>

<p>Interestingly, the else part of the conditional is optional. The
following code will produce the same result as the first example.</p>

<div class="code-div">
  <span title="copy code" id="code-10-img" class="code-div-img"></span>
  <div id="code-10">
  &gt;&gt;&gt; passed = False<br>

  &gt;&gt;&gt; grade = 75<br>

  &gt;&gt;&gt; if grade &gt;= 50:<br>

  ... <span class="tab-1">passed = True</span><br>

  ...<br>

  &gt;&gt;&gt; print( passed )<br>

  True<br>
  </div>
</div>

<p>Suppose we wanted to not only define pass or fail, but also assign
a letter grade for the student. We could use a series of if-then
statements, one for each possible letter grade. A better way is to
use <code>elif</code>, which defines else-if code blocks. Now, we're
telling a program, "<em>If</em> some condition is true, <em>then</em>
do this, <em>else if</em> some other condition is true, <em>then</em>
do this, <em>else</em> do that." You can include as many else-if
statements as you want in an if-then-else conditional.</p>

<div class="code-div">
  <span title="copy code" id="code-11-img" class="code-div-img"></span>
  <div id="code-11">
  &gt;&gt;&gt; grade = 75<br>

  &gt;&gt;&gt; if grade &gt;&gt;&gt;;= 90:<br>

  ... <span class="tab-1">passed = True</span><br>

  ... <span class="tab-1">letter = 'A'</span><br>

  ... elif grade &gt;&gt;&gt;;= 80:<br>

  ... <span class="tab-1">passed = True</span><br>

  ... <span class="tab-1">letter = 'B'</span><br>

  ... elif grade &gt;&gt;&gt;;= 65:<br>

  ... <span class="tab-1">passed = True</span><br>

  ... <span class="tab-1">letter = 'C'</span><br>

  ... elif grade &gt;&gt;&gt;;= 50:<br>

  ... <span class="tab-1">passed = True</span><br>

  ... <span class="tab-1">letter = 'D'</span><br>

  ... else:<br>

  ... <span class="tab-1">passed = False</span><br>

  ... <span class="tab-1">letter = 'F'</span><br>

  ...<br>

  &gt;&gt;&gt; print( passed )<br>

  True<br>

  &gt;&gt;&gt; print( letter )<br>

  C<br>
  </div>
</div>


<h3>while</h3>

<p>Another common situation is the need to execute a code block until
some condition is met. This is done with a while conditional. Here,
we're telling the program "<em>While</em> some condition is true, do
this." For example, suppose we wanted to print the square roots of
values on the range 1&ndash;15.</p>

<div class="code-div">
  <span title="copy code" id="code-12-img" class="code-div-img"></span>
  <div id="code-12">
  &gt;&gt;&gt; import math<br>

  &gt;&gt;&gt; i = 1<br>

  &gt;&gt;&gt; while i &lt;= 15:<br>

  ... <span class="tab-1">print( 'The square root of', i, 'is',
  math.sqrt( i ) )</span><br>

  ... <span class="tab-1">i = i + 1</span><br>

  ...<br>

  The square root of 1 is 1<br>

  The square root of 2 is 1.4142135623730951<br>

  &hellip;<br>

  The square root of 15 is 3.872983346207417
  </div>
</div>


<p>(The <code>import math</code> statement is needed to give us access
to mathematical functions like <code>math.sqrt</code>).</p>

<p>Notice that the variable that's compared in the while conditional
normally <b>must be updated</b> in the conditional's code block. If
you don't update the conditional variable, a comparison that initially
evaluates to <code>True</code> will never evaluate
to <code>False</code>, which means the while loop will execute
forever. For example, consider the following code block.</p>

<div class="code-div">
  <span title="copy code" id="code-13-img" class="code-div-img"></span>
  <div id="code-13">
  &gt;&gt;&gt; import math<br>

  &gt;&gt;&gt; i = 1<br>

  &gt;&gt;&gt; while i &lt;= 15:<br>

  ... <span class="tab-1">print( 'The square root of', i, 'is',
  math.sqrt( i ) )</span><br>

  ...<br>

  The square root of 1 is 1<br>

  The square root of 1 is 1<br>

  The square root of 1 is 1<br>

  The square root of 1 is 1<br>

  The square root of 1 is 1<br>

  The square root of 1 is 1<br>

  The square root of 1 is 1<br>

  &hellip;<br>
  </div>
</div>

<p>Without the <code>i = i + 1</code> statement to
update <code>i</code> in the conditional's code block, the while
conditional never fails, giving us the same output over and over. You
can use Ctrl+C to halt your program if it's caught in an infinite loop
like this.</p>


<h3>for</h3>

<p>A final conditional that is very common is a for loop. Here, we're
telling a program "Execute this code block <em>for</em> some list of
values." for can work on any list of values, but it's often applied to
a numeric range. The <code>range</code> command is used to create a
sequence of integers.</p>

<div class="code-div">
  <span title="copy code" id="code-14-img" class="code-div-img"></span>
  <div id="code-14">
  &gt;&gt;&gt; print( range( 5, 10 ) )<br>

  range( 5, 10 )<br>

  &gt;&gt;&gt; print( range( 10 ) )<br>

  range( 10 )<br>

  &gt;&gt;&gt; print( list( range( -15, -10 ) ) )<br>

  [-15, -14, -13, -12, -11]<br>
  </div>
</div>

<p>Giving two values to <code>range</code> like <code>range(&nbsp;2,
5&nbsp;)</code> defines a starting value of 2 and an ending value of
5. <code>range</code> generates an integer list from the starting
value, up to but not including the ending value: <code>[2, 3,
4]</code>. If you only give an ending value to <code>range</code>
like <code>range(&nbsp;5&nbsp;)</code>, <code>range</code> assumes a
starting value of 0, producing the list <code>[0, 1, 2, 3, 4]</code>.

<p>Once a list is produced with <code>range</code>, each value in the
list is given to the for conditional's code block, in order. For
example, suppose we wanted to print the same set of square roots from
1&ndash;15 using a for loop.</p>

<div class="code-div">
  <span title="copy code" id="code-15-img" class="code-div-img"></span>
  <div id="code-15">
  &gt;&gt;&gt; import math<br>

  &gt;&gt;&gt; for i in range( 1, 16 ):<br>

  ... <span class="tab-1">print( 'The square root of', i, 'is',
  math.sqrt( i ) )</span><br>

  ...<br>

  The square root of 1 is 1<br>

  The square root of 2 is 1.4142135623730951<br>

  &hellip;<br>

  The square root of 15 is 3.872983346207417
  </div>
</div>

<p>The for statement defines a variable to hold the "current" list
value. In our case, this variable is
called <code>i</code>. <code>range(&nbsp;1, 16&nbsp;)</code> generates
the list <code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,
15]</code>.  The for conditional walks through this list and executes
the code block 15 times, first with <code>i</code> set to 1, then
with <code>i</code> set to 2, and so on up to the final value of
15. The statement inside the code block uses <code>i</code> to track
the current list value, printing square roots from 1 to 15.</p>

<p>We don't need to use <code>range</code> to execute a for
conditional. Any list can be used in a for loop.</p>

<div class="code-div">
  <span title="copy code" id="code-16-img" class="code-div-img"></span>
  <div id="code-16">
  &gt;&gt;&gt; name = [&nbsp;"Healey", "Rappa", "LaBarr"&nbsp;]<br>

  &gt;&gt;&gt; for nm in name:<br>

  ... <span class="tab-1">print( nm, '(', len( nm ), ')' )</span><br>

  ...<br>

  Healey ( 6 )<br>

  Rappa ( 5 )<br>

  LaBarr ( 6 )<br>
  </div>
</div>

<div id="loop-accordion" class="detail">
  <h3>break and continue</h3>
  <div style="background: none; background-color: #e7eefb;">
    <p><em><b>break</b></em></p>

    <p>Sometimes we need to exit a for or while loop before its
    condition evaluates to <code>False</code>. The <code>break</code>
    statement allows us to do this. For example, suppose we wanted to
    print the elements of a list of strings, but terminate examining
    the list if we see the string <code>stop</code>.</p>

    <div class="code-div" style="background-color: #f8f8f8;"><br>
      <span title="copy code" id="code-17-img" class="code-div-img"></span>
      <div id="code-17">

      &gt;&gt;&gt; l = [&nbsp;'Healey', 'Rappa', 'LaBarr'&nbsp;]<br>

      &gt;&gt;&gt; for i in range( len( l ) ):<br>

      ... <span class="tab-1">if l[&nbsp;i&nbsp;] == 'stop':</span><br>

      ... <span class="tab-2">break</span><br>

      ... <span class="tab-1">print( l[&nbsp;i&nbsp;] )</span><br>

      ...<br>

      Healey<br>

      Rappa<br>

      LaBarr<br>

      &gt;&gt;&gt; l.insert( 1, 'stop' )<br>

      &gt;&gt;&gt; print( l )<br>

      [&nbsp;'Healey', 'stop', 'Rappa', 'LaBarr'&nbsp;]<br>

      &gt;&gt;&gt; for i in range( len( l ) ):<br>

      ... <span class="tab-1">if l[&nbsp;i&nbsp;] == 'stop':</span><br>

      ... <span class="tab-2">break</span><br>

      ... <span class="tab-1">print( l[&nbsp;i&nbsp;] )</span><br>

      ...<br>

      Healey<br>
      </div>
    </div>

    <p><em><b>continue</b></em></p>

    <p>Other times, we want to stop executing a loop's code block, and
    instead return to check its condition.  The <code>continue</code>
    statement allows us to do this. For example, suppose we wanted to
    print only the odd numbers from 1 to 10.</p>

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-18-img" class="code-div-img"></span>
      <div id="code-18">

     &gt;&gt;&gt; for i in range( 1, 10 ):<br>

     ... <span class="tab-1">if i % 2 == 0:</span><br>

     ... <span class="tab-2">i = i + 1</span><br>

     ... <span class="tab-2">continue</span><br>

     ... <span class="tab-1">print( i, 'is odd' )</span><br>

     ... <span class="tab-1">i = i + 1</span><br>

     ...<br>

     1 is odd<br>

     3 is odd<br>

     5 is odd<br>

     7 is odd<br>

     9 is odd<br>
     </div>
   </div>
  </div>
</div>


<h3>Loop Practice Problem</h3>

<p>Write a set of Python statements to compute the average of the
following list of numbers.</p>

<ul>

  <li> 6, 12, -7, 29, 14, 38, 11, 7

</ul>

<p>I recommend you write your program using <code>Jupyter
notebook</code> or <code>spyder</code>, save it as a Python notebook
or source code file, and then test it, rather than writing the program
directly in the Python shell. This will let you write your code, run
it to see what it does, edit it to fix problems, and run it again,
without having to re-type the entire program at the command line.</p>

<div id="for-accordion" class="detail">
  <h3>List Average Solution</h3>
  <div style="background: none; background-color: #e7eefb;">
    <p><em><b>for loop</b></em></p>

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-19-img" class="code-div-img"></span>
      <div id="code-19">
      &gt;&gt;&gt; num = [&nbsp;6, 12, -7, 29, 14, 38, 11, 7&nbsp;]<br>

      &gt;&gt;&gt; sum = 0<br>

      &gt;&gt;&gt; for n in num:<br>

      ... <span class="tab-1">sum = sum + n</span><br>

      &gt;&gt;&gt; print( float( sum ) / len( num ) )<br>

      13.75<br>
      </div>
    </div>

    <p><em><b>while loop</b></em></p>

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-20-img" class="code-div-img"></span>
      <div id="code-20">
      &gt;&gt;&gt; num = [&nbsp;6, 12, -7, 29, 14, 38, 11, 7&nbsp;]<br>

      &gt;&gt;&gt; i = 0<br>

      &gt;&gt;&gt; sum = 0<br>

      &gt;&gt;&gt; while i &lt; len( num ):<br>

      ... <span class="tab-1">sum = sum + num[&nbsp;i&nbsp;]</span><br>

      ... <span class="tab-1">i = i + 1</span><br>

      &gt;&gt;&gt; print( float( sum ) / len( num ) )<br>

      13.75<br>
      </div>
    </div>

    <p>Notice that we have to convert the sum to a floating point
    value (in our case, by casting it with <code>float()</code>) to
    get the proper average of 13.75. If we had used the
    statement <code>print( float sum / len( num ) )</code> instead,
    Python would have return an integer result of 13.</p>

    <p>You can <a style="color: #e17009" href="tut-04-avg.py">download
    the solution file</a> and run it on your machine, if you want.</p>
  </div>
</div>


<h3>Debugging</h3>

<p>Inevitably, you'll write some Python code that either doesn't do
what you expect it to do, or that generates an error message when you
try to execute it. When that happens, you'll need to <em>debug</em>
the program to locate and correct the error. Consider the following
code.<p>

<div class="code-div">
  <span title="copy code" id="code-21-img" class="code-div-img"></span>
  <div id="code-21">
  &gt;&gt;&gt; l = [&nbsp;'10', '20', '30'&nbsp;]<br>

  &gt;&gt;&gt; sum = 0<br>

  &gt;&gt;&gt; for val in l:<br>

  ... <span class="tab-1">sum = sum + val</span><br>

  ...<br>
  </div>
</div>

<p>If you hit Return to close the for loop, Python would respond with
an error message similar to this.</p>

<div class="code-div">
  TypeError&nbsp;&nbsp;&nbsp;Traceback (most recent call last)<br>
  &lt;ipython-input-11-00773625d4c5&gt;&gt;&gt;; in &lt;module&gt;&gt;&gt;;()<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 sum = 0<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 for val in l:<br>
  ----> 4 &nbsp;&nbsp;&nbsp; sum = sum + val<br>
  <br>
  TypeError: unsupported operand type(s) for +: 'int' and 'str'<br>
</div>

<p>So, that didn't work. The first two lines of the error message give
some details about how the error's being reported, and where the error
occurred (on line 2 of code being entered on
"<code>&lt;stdin&gt;&gt;&gt;;</code>", which is Python's way of saying "from
the keyboard"). The most important part of the error is the last line,
which tries to explain the problem Python encountered. This
explanation suggests that Python doesn't know how to add
(<code>+</code>) an int and a str.</p>

<p>If you look at where the error was reported (line 2 of the for
loop), it attempted to execute <code>sum = sum + val</code>. Python is
claiming the first variable in the add operation, <code>sum</code>, is
an int, but the second variable <code>val</code> is a
str. <code>val</code> is a value from the list
variable <code>l</code>. And, when we look at <code>l</code>, we see
that it contains three <b>string</b> values:
<code>'10'</code>, <code>'20'</code>, and <code>'30'</code>. This is
the problem that Python encountered.</p>

<p>There are various ways to fix this problem. One simple solution is
to put integers in the list, <code>l = [&nbsp;10, 20, 30&nbsp;]</code>. If you
wanted <code>l</code> to contain strings for some reason, you could
cast <code>val</code> to be an integer in the add operation.</p>

<div class="code-div">
  <span title="copy code" id="code-22-img" class="code-div-img"></span>
  <div id="code-22">
  &gt;&gt;&gt; l = [&nbsp;'10', '20', '30'&nbsp;]<br>

  &gt;&gt;&gt; sum = 0<br>

  &gt;&gt;&gt; for val in l:<br>

  ... <span class="tab-1">sum = sum + int( val )</span><br>

  ...<br>

  &gt;&gt;&gt; print( sum )<br>

  60<br>
  </div>
</div>

<p>Now, Python accepts the for loop's body because it understands how
to add to int variables. The resulting sum is printed after the loop
finishes.</p>

<div id="bug-accordion" class="detail">
  <h3>Computer "Bugs"</h3>
  <div style="background: none; background-color: #e7eefb;">
    <p>Why are errors in computer programs called <em>bugs</em>?
    Historically, the term "bug" was used in engineering to describe
    mechanical malfunctions.

    <div class="code-div" style="text-align: center; max-width: 513px;
      margin-left: auto; margin-right: auto; background-color: #f8f8f8;">
      <div style="height: 1em;"></div>
      <img style="width: 97.5%; max-width: 500px;" src="fig/bug.png" alt="bug">
      <div style="height: 1em;"></div>
    </div>

    <p>In 1947 computer engineers were designing the Harvard Mark II
    computer. An error in the machine was traced to a moth that had
    become trapped in one of the machine's relays. The moth was
    removed and taped to the engineers' log book, where they referred
    to it as "The first actual case of bug being found." This incident
    seems to have contributed to the widespread use of the term in
    Computer Science.</p>
  </div>
</div>


<h2 id="file">Files</h2>

<p>One of the main reasons we're using Python is to read and write
data to and from external files. Python has an extensive set of file
input/output (file IO) operations to support this. The basic structure
of modifying a file often follows this simple pattern.</p>

<ol>

  <li>Open one or more input files to read the original data.

  <li>Open an output file to write the new or modified data.

  <li>Read data from the input file, usually line by line.

  <li>Examine each input line, modifying it or generate new data based
  on its contents.

  <li>Write the modified line and/or data to the output file.

  <li>Close the input and output files when processing is completed.

</ol>


<h3>Reading Files</h3>

<p>Here are some operations you can use to open files and read from
them.</p>

<ul>

  <li><code>inp = open( 'input.txt', 'r', encoding='latin' )</code>,
  open the file named <code>input.txt</code> for reading, accessed
  through variable <code>inp</code>.

  <li><code>inp.read()</code>, read the entire file, returning it as a
  single string.

  <li><code>inp.readline()</code>, read the next line of the file,
  returning the line as a string.

  <li><code>inp.readlines()</code>, read the entire file, returning it
  as a list of strings, one for each line in the file.

  <li><code>inp.close()</code>, close the file.

</ul>

<p>As a file is being read, Python maintains a current position in the
file (the <em>file pointer</em>). This is how Python finds things like
the "next" line: it starts from its current position in the file,
reads until it sees a newline character (<code>\r\n</code>) or the end
of the file, then returns what it read as a string.</p>

<p>Maintaining a current position means that Python won't
automatically "back up" for you if you want to go back and re-read
some data. For example, consider the following code snippet.</p>

<div class="code-div">

  &gt;&gt;&gt; inp = open( 'input.txt', 'r', encoding='latin' )<br>

  &gt;&gt;&gt; line = inp.readlines()<br>

  &gt;&gt;&gt; print( len( line ) )<br>

  180<br>

  &gt;&gt;&gt; line = inp.readlines()<br>

  &gt;&gt;&gt; print( len( line ) )<br>

  0<br>

  &gt;&gt;&gt; inp.close()<br>

</div>

<p>The first time we read <code>input.txt</code> and asked how many
lines it contained, Python told us it had 180 lines. But the next time
we read the file, Python said it had 0 lines. How is that
possible?</p>

<p>Remember, after the first <code>line = inp.readlines()</code>
statement, Python reads everything in the file, returning a list with
180 strings representing the file's 180 lines. Critically, the current
position is now at the end of the file. We re-issue the
same <code>line = input.readlines()</code> statement,
Python <em>starts from its current position at the end of the
file</em>, realizes there's nothing else left to read, and returns an
empty list to tell us that. So, the length of that second list is 0,
exactly as we saw.</p>

<p>How could we re-read the entire file? The easiest way to do this
is to close the file, then re-open it. Doing this resets the current
position back to the start of the file.</p>

<div class="code-div">

  &gt;&gt;&gt; inp = open( 'input.txt', 'r', encoding='latin' )<br>

  &gt;&gt;&gt; line = inp.readlines()<br>

  &gt;&gt;&gt; print( len( line ) )<br>

  180<br>

  &gt;&gt;&gt; inp.close()<br>

  &gt;&gt;&gt; inp = open( 'input.txt', 'r', encoding='latin' )<br>

  &gt;&gt;&gt; line = inp.readlines()<br>

  &gt;&gt;&gt; print( len( line ) )<br>

  180<br>

  &gt;&gt;&gt; inp.close()<br>

</div>

<div id="seek-accordion" class="detail">
  <h3>seek and tell</h3>
  <div style="background: none; background-color: #e7eefb;">
    <p><em><b>seek</b></em></p>

    <p>It's possible to change the current position in a file without
    closing and re-opening it. <code>seek( pos )</code> is used to set
    a file's current position to <code>pos</code>. For example, we
    could re-read <code>input.text</code> as follows.</p>

    <div class="code-div" style="background-color: #f8f8f8;">
      &gt;&gt;&gt; inp = open( 'input.txt', 'r', encoding='latin' )<br>

      &gt;&gt;&gt; line = inp.readlines()<br>

      &gt;&gt;&gt; print( len( line ) )<br>

      180<br>

      &gt;&gt;&gt; inp.seek( 0 )<br>

      &gt;&gt;&gt; line = inp.readlines()<br>

      &gt;&gt;&gt; print( len( line ) )<br>

      180<br>

      &gt;&gt;&gt; inp.close()<br>

    </div>

    <p>The command <code>inp.seek(&nbsp;0&nbsp;)</code> sets the
    current position to 0 bytes from the start of the file
    (<em>i.e.</em>, to the start of the file). If you need to seek
    from the end of the file, you can specifying a negative offset and
    a second argument of 2 to <code>seek</code>, for
    example, <code>inp.seek(&nbsp;-10, 2&nbsp;)</code> seek 10
    bytes <em>backwards</em> from the end
    of <code>input.txt</code>. You can also seek from the current
    position by specifying an offset and a second argument of 1 to
    <code>seek</code>, for example, <code>inp.seek(&nbsp;20,
    1&nbsp;)</code> to seek 20 bytes forwards from the current
    position, or <code>seek(&nbsp;-5, 1&nbsp;)</code> to seek 5 bytes
    backwards from the current position.</p>

    <p style="margin-top: 1em;"><em><b>tell</b></em></p>

    <p>The <code>tell()</code> command will return the current
    position in a file. For example, to determine the size of a file,
    you could do the following.

    <div class="code-div" style="background-color: #f8f8f8;">
      &gt;&gt;&gt; inp = open( 'input.txt', 'r', encoding='latin' )<br>

      &gt;&gt;&gt; inp.seek( 0, 2 )<br>

      &gt;&gt;&gt; print( inp.tell() )<br>

      4044<br>

      &gt;&gt;&gt; inp.close()<br>

    </div>
  </div>
</div>


<h3>Writing Files</h3>

<p>Python provides similar operations open files and write to
them.</p>

<ul>

  <li><code>out = open( 'output.txt', 'w', encoding='latin' )</code>,
  open the file named <code>output.txt</code> for writing, accessed
  through variable <code>out</code>.

  <li><code>out = open( 'output.txt', 'a', encoding='latin' )</code>,
  open the file named <code>output.txt</code> and appends any new data
  you write to the end of the file.

  <li><code>out.write( s )</code>, write the contents of
  string <code>s</code> to the file.

  <li><code>out.close()</code>, close the file.

</ul>

<p>Writing data is simple: put the data you want to write into a
string variable (or convert a variable's value to a string value),
then use <code>write</code> to write the data to an output
file.</p>

<div class="code-div">

  &gt;&gt;&gt; out = open( 'output.txt', 'w', newline='', encoding='latin' )<br>

  &gt;&gt;&gt; num = 50<br>

  &gt;&gt;&gt; list = [&nbsp;'Healey', 'Rappa', 'Mostek'&nbsp;]<br>

  &gt;&gt;&gt; for elem in list:<br>

  ... <span class="tab-1">out.write( elem + '\r\n' )</span><br>

  ...<br>

  &gt;&gt;&gt; out.write( str( num ) )<br>

  &gt;&gt;&gt; out.close()<br>

</div>


<p>This code snippet creates an output file <code>output.txt</code>
and writes four lines containing Healey, Rappa, Mostek, and 50 to the
file. Notice that if we need a newline after each value, we need to
add it explicitly by appending <code>'\r\n'</code> to the string as
it's being written.</p>

<div id="newline-accordion" class="detail">
  <h3>newlines</h3>
  <div style="background: none; background-color: #e7eefb;">
    <p>Newlines are used to insert a carriage return between lines in
    a file. In Windows (or DOS) a newline is actually two characters:
    a return and a newline, denoted <code>\r\n</code>. This is unique
    to Windows. On other operating systems like Mac OS or Linux, only
    the newline <code>\n</code> is used.</p>

    <p>Newlines also matter when you're reading data. For example,
    supposed you used <code>readlines()</code> to read all the lines
    in a file.</p>

    <div class="code-div" style="background-color: #f8f8f8;">
      &gt;&gt;&gt; inp = open( 'input.txt', 'r', encoding='latin' )<br>

      &gt;&gt;&gt; line = inp.readlines()<br>

      &gt;&gt;&gt; print( line[&nbsp;0: 2&nbsp;] )<br>

      ['This is the first line\r\n', 'This is the second line\r\n']<br>
    </div>

    <p>The return and newline are included at the end of each line
    that's read. In some cases you want these "separators" removed
    when the file is read and parsed. One easy way to do this is to
    read the entire file using <code>read()</code>, then split the
    result using the string operator <code>split()</code>.

    <p>To determine which character(s) represent the end of a line,
    use the <code>os.linesep</code> variable.

    <p><b>Windows:</b>
    <div class="code-div" style="background-color: #f8f8f8;">
      &gt;&gt;  import os<br>

      &gt;&gt;  os.linesep<br>

      '\r\n'<br>
    </div>
    </p>

    <p><b>Mac OS or Linux:</b></p>
    <div class="code-div" style="background-color: #f8f8f8;">
      &gt;&gt;  import os<br>

      &gt;&gt;  os.linesep<br>

      '\n'<br>
    </div>

    <p>Now, we read and divide lines as follows to produce a list of
    lines in a file.</p>
    
    <div class="code-div" style="background-color: #f8f8f8;">
      &gt;&gt;&gt; import os<br>
      
      &gt;&gt;&gt; inp = open( 'input.txt', 'r', encoding='latin' )<br>

      &gt;&gt;&gt; content = inp.read()<br>

      &gt;&gt;&gt; line = content.split( os.linesep )<br>

      &gt;&gt;&gt; print( line[&nbsp;0: 2&nbsp;] )<br>

      ['This is the first line', 'This is the second line']<br>
    </div>

    <p><code>split()</code> divides a string into a list of substrings
    based on a <em>delimiter</em>, throwing away the delimiter after
    each split. Splitting the file's contents on the
    delimiter <code>os.linesep</code> gives us what we want: the
    individual lines from the file without carriage returns or
    newlines at the end of each line.</p>
  </div>
</div>


<h3>CSV Files</h3>

<p>A file type you are likely to encounter often is a comma-separated
value (CSV) file. CSV files are text files containing a table of
values. Each line represents one row in the table, with individual
column values in the row identified by a <em>separator</em>
character. The separator is often a comma (<code>,</code>), although
it can be any character that's guaranteed not to appear in any column
value. For example, the <a target="_blank"
href="https://factfinder.census.gov/faces/tableservices/jsf/pages/productview.xhtml?src=bkmk">US
Census Bureau</a> maintains a file of estimated US city populations
from 2010&ndash;2017. We will use <a href="./pop.csv">an earlier
file</a>, compiled directly after the 2010 census, containing
estimated 2011 city and town populations</a>.


<div class="code-div">
  SUMLEV,STATE,COUNTY,PLACE,COUSUB,CONCIT,NAME,STNAME,CENSUS2010POP,ESTIMATESBASE2010,POPESTIMATE2010,POPESTIMATE2011<br>

  040,01,000,00000,00000,00000,Alabama,Alabama,4779736,4779735,4785401,4802740<br>

  162,01,000,00124,00000,00000,Abbeville city,Alabama,2688,2688,2689,2704<br>

  162,01,000,00460,00000,00000,Adamsville city,Alabama,4522,4522,4522,4525<br>

  162,01,000,00484,00000,00000,Addison town,Alabama,758,758,754,754<br>

  162,01,000,00676,00000,00000,Akron town,Alabama,356,356,354,348<br>

  162,01,000,00820,00000,00000,Alabaster city,Alabama,30352,30352,30473,30799<br>

  162,01,000,00988,00000,00000,Albertville city,Alabama,21160,21160,21202,21421<br>

  162,01,000,01132,00000,00000,Alexander City city,Alabama,14875,14875,14846,14876<br>

  162,01,000,01228,00000,00000,Aliceville city,Alabama,2486,2486,2483,2438<br>

  &hellip;<br>

  157,56,045,79125,00000,00000,Upton town,Wyoming,1100,1100,1096,1084<br>

  157,56,045,99990,00000,00000,Balance of Weston County,Wyoming,2576,2576,2564,2539<br>

</div>


<p>We could use file and string operations to read and parse CSV
files, but Python provides a <code>csv</code> module to help us with
this.  Modules are pre-written collections of operators, usually
designed for a specific purpose or task. To use a module, you must
first <code>import</code> it. To invoke one of it's operations, you
precede the operator's name with the name of the module, followed by a
period.

<div class="code-div">
  &gt;&gt;&gt; import csv<br>

  &gt;&gt;&gt; csv.list_dialects()<br>

  ['excel-tab', 'excel']<br>
</div>

<p>To read data from a CSV file, we normally perform the following
steps.</p>

<ol>

  <li>Open the CSV file to read with <code>open()</code>, exactly like
  any other input file.

  <li>Attach a CSV <code>reader</code> to the CSV file.

  <li>Use <code>next( reader )</code> to read and parse any header line(s)
  in the CSV file.

  <li>Use a <code>for</code> loop to read and parse the rows in the
  CSV file. Each row is returned as a list of column values found in
  the row's line.

  <li>Close the CSV file.

</ol>

<p>For example, this code would read and parse the Census population
file</p>

<div class="code-div">
  <span title="copy code" id="code-23-img" class="code-div-img"></span>
  <div id="code-23">

  &gt;&gt;&gt; import csv<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; inp = open( 'pop.csv', 'r', newline='', encoding='latin' )<br>

  &gt;&gt;&gt; reader = csv.reader( inp )<br>

  &gt;&gt;&gt; header = next( reader )<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; for row in reader:<br>

  ... <span class="tab-1">if row[&nbsp;6&nbsp;] == row[&nbsp;7&nbsp;]:</span><br>

  ... <span class="tab-2">print( 'The state of', row[&nbsp;7&nbsp;], 'has
  population', row[&nbsp;11&nbsp;] )</span><br>

  ... <span class="tab-1">else:</span><br>

  ... <span class="tab-2">print( 'City', row[&nbsp;6&nbsp;], 'in
 state', row[&nbsp;7&nbsp;], 'has population',
 row[&nbsp;11&nbsp;] )</span><br>

  ...<br>

  The state of Alabama has population 4802740<br>

  City Abbeville city in state Alabama has population 2704<br>

  City Adamsville city in state Alabama has population 4525<br>

  &hellip;<br>

  City Upton town in state Wyoming has population 1084<br>
  
  City Balance of Weston County in state Wyoming has population 2539<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; inp.close()<br>

  </div>
</div>


<p>Note that we open the file with the <code>newline=''</code>
argument. We will use the same argument we we open files intended for
CSV writing below. This handles running Python 3.x on Windows, where
the interpreter automatically inserts a carriage return
(<code>\r</code>) whenever it sees a newline (<code>\n</code>). This
built-in functionality means that, on Windows, when we read or write a
CSV file, the newline <code>\r\n</code> on the file is automatically
converted to <code>\r\r\n</code>, which adds an extra line break.
Particularly on writing, this causes issues, making it look like
there's a blank line between each data line when the file is imported
into programs like Excel.</p>

<p>The <code>csv</code> module helps us read and parse a CSV file, but
it doesn't tell us anything about what the rows and columns in the
file represent. We need to provide that context based on our
understanding of the file. For example, in the code above:</p>

<ul>

  <li>We know the first line of the CSV file is a header row, so we
  read it using <code>header = next( reader )</code>. If we didn't
  do this, it would be interpreted as a city population line.

  <li>We can see that the 12th column on each row
  (<code>row[&nbsp;11&nbsp;]</code>) holds the estimated 2011
  population, so this is what we print in our output.

  <li>When the city name and the state name
  (<code>row[&nbsp;6&nbsp;]</code>
  and <code>row[&nbsp;7&nbsp;]</code>) are identical, the row
  represents the state's overall population. We check for this
  with <code>if row[&nbsp;6&nbsp;] == row[&nbsp;7&nbsp;]</code>, reporting the population
  for these rows as state population.

</ul>

<p>It's also possible to write data out in CSV format. This is useful,
since CSV files can be easily imported into programs like Excel or
SAS. A very similar sequence of steps is used to write a CSV file.</p>

<ol>

  <li>Open the CSV file to write with <code>open()</code>, exactly
  like any other output file.

  <li>Attach a CSV <code>writer</code> to the CSV file.

  <li>For each row you want to write to the CSV file, store the row's
  column values in a list.

  <li>Use <code>writerow()</code> to write the list's values as a
  comma-separated line in the CSV file.

  <li>After all the rows are written, close the CSV file.

</ol>

<p>For example, the Census population file has a lot of columns we
might not care about. Suppose we wanted to reduce the file to only
include city name, state name, and 2011 population estimate. The
following code would do this.</p>

<div class="code-div">
  <span title="copy code" id="code-24-img" class="code-div-img"></span>
  <div id="code-24">

  &gt;&gt;&gt; import csv<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; inp = open( 'pop.csv', 'r', newline='', encoding='latin' )<br>

  &gt;&gt;&gt; reader = csv.reader( inp )<br>

  &gt;&gt;&gt; header = next( reader )<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; out = open( 'pop-summary.csv', 'w', newline='', encoding='latin' )<br>

  &gt;&gt;&gt; writer = csv.writer( out )<br>

  &gt;&gt;&gt; writer.writerow( [&nbsp;'City', 'State', 'Population'&nbsp;] )<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; for row in reader:<br>

  ... <span class="tab-1">writer.writerow( [&nbsp;row[&nbsp;6&nbsp;], row[&nbsp;7&nbsp;], row[
  11&nbsp;]&nbsp;] )</span><br>

  ...<br>

  &gt;&gt;&gt; inp.close()<br>

  &gt;&gt;&gt; out.close()<br>

  </div>
</div>

<p>This will produce an output file <code>pop-summary.csv</code> with
the following data.</p>


<div class="code-div">
  City,State,Population<br>

  Alabama,Alabama,4802740<br>

  Abbeville city,Alabama,2704<br>

  Adamsville city,Alabama,4525<br>

  Addison town,Alabama,754<br>

  Akron town,Alabama,348<br>

  Alabaster city,Alabama,30799<br>

  Albertville city,Alabama,21421<br>

  Alexander City city,Alabama,14876<br>

  Aliceville city,Alabama,2438<br>

  &hellip;<br>

  Upton town,Wyoming,1084<br>

  Balance of Weston County,Wyoming,2539<br>

</div>


<h3>CSV Practice Problem</h3>

<p>Write a Python program that finds the city with the largest
population in <a href="pop.csv">pop.csv</a>, then prints this city's
name, the name of its state, and its population.</p>

<p><b>Hint.</b> When you read data with a CSV reader, the column
values it returns are all strings. You'll want to convert the
population value from a string to an integer. To do this,
you <em>cast</em> the string using the <code>int()</code>operation.

<div class="code-div">
  &gt;&gt;&gt; for row in reader:<br>

  ... <span class="tab-1">pop = int( row[&nbsp;11&nbsp;] )</span><br>

  &hellip;<br>
</div>

<p>I recommend you write your program using <code>Jupyter
notebook</code> or <code>spyder</code>, save it as a Python notebook
or source code file, and then test it, rather than writing the program
directly in the Python shell. This will let you write your code, run
it to see what it does, edit it to fix problems, and run it again,
without having to re-type the entire program at the command line.</p>


<div id="max-pop-accordion" class="detail">
  <h3>Maximum Population Solution</h3>
  <div style="background: none; background-color: #e7eefb;">
    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-25-img" class="code-div-img"></span>
      <div id="code-25">
      &gt;&gt;&gt; import csv<br>

      &gt;&gt;&gt; inp = open( 'pop.csv', 'r', encoding='latin' )<br>

      &gt;&gt;&gt; reader = csv.reader( inp )<br>

      &gt;&gt;&gt; header = next( reader )<br>

      &gt;&gt;&gt; max_pop = 0<br>

      &gt;&gt;&gt; max_city_nm = "Unknown"<br>

      &gt;&gt;&gt; max_st_nm = "Unknown"<br>

      &gt;&gt;&gt; for row in reader:<br>

      ... <span class="tab-1">pop = int( row[&nbsp;11&nbsp;] )</span><br>

      ... <span class="tab-1">if row[&nbsp;6&nbsp;] != row[&nbsp;7&nbsp;]:</span><br>

      ... <span class="tab-2">if pop &gt; max_pop:</span><br>

      ... <span class="tab-3">max_pop = pop</span><br>

      ... <span class="tab-3">max_city_nm = row[&nbsp;6&nbsp;]</span><br>

      ... <span class="tab-3">max_st_nm = row[&nbsp;7&nbsp;]</span><br>

      ...<br>

      &gt;&gt;&gt; inp.close()<br>

      &gt;&gt;&gt; print( max_city_nm, 'in state', max_st_nm, 'has population',
      max_pop )<br>

      Los Angeles County in state California has population 9889056<br>

      </div>
    </div>

    <p>You can <a style="color: #e17009" href="tut-05-pop.py">download
    the solution file</a> and run it on your machine, if you want.</p>

  </div>
</div>


<h2 id="func">Functions</h2>

<p>It's possible to write a program as a single, long sequence of
statements in the main module. Even for small programs, however, this
isn't efficient. First, writing a program this way makes it difficult
to examine and understand. Second, if you're performing common
operation on different variables, you need to duplicate the code every
time you perform that operation.</p>

<p>For example, supposed we wanted to report the average of two
numeric lists <code>l</code> and <code>m</code>. One obvious way to do
it is to write two for loops.<p>

<div class="code-div">
  <span title="copy code" id="code-26-img" class="code-div-img"></span>
  <div id="code-26">

  &gt;&gt;&gt; l = [&nbsp;1, 2, 3&nbsp;]<br>

  &gt;&gt;&gt; m = [&nbsp;7, 8, 14&nbsp;]<br>

  &gt;&gt;&gt; sum = 0<br>

  &gt;&gt;&gt; for elem in l:<br>

  ... <span class="tab-1">sum = sum + elem</span><br>

  ...<br>

  &gt;&gt;&gt; print( float( sum ) / 3 )<br>

  2.0<br>

  &gt;&gt;&gt; sum = 0<br>

  &gt;&gt;&gt; for elem in m:<br>

  ... <span class="tab-1">sum = sum + elem</span><br>

  ...<br>

  &gt;&gt;&gt; print( float( sum ) / 3 )<br>

  9.66666666667<br>

  </div>
</div>


<p>This has a number of problems, however. What if we had more than
just two lists we wanted to average? We'd need to duplicate the for
loop once for each list. What if we wanted to do something more
complicated than calculating the average (<em>e.g.</em>, what if we
wanted population standard deviation instead)? The amount of code we'd
need to duplicate would be much longer.</p>

<p>What we really want to do is to have some sort
of <code>avg()</code> operation that we can call whenever we want to
calculate the average of a numeric list.</p>

<div class="code-div">

  &gt;&gt;&gt; l = [&nbsp;1, 2, 3&nbsp;]<br>

  &gt;&gt;&gt; m = [&nbsp;7, 8, 14&nbsp;]<br>

  &gt;&gt;&gt; print( avg( l ) )<br>

  &gt;&gt;&gt; 2.0<br>

  &gt;&gt;&gt; print( avg( m ) )<br>

  &gt;&gt;&gt; 9.66666666667<br>

</div>


<p>In Python we can define a <em>function</em> to create new
operations like <code>avg()</code>. A function is defined using the
keyword <code>def</code>, followed by the function's name, followed by
an argument list in parentheses, and then a colon. The function's code
block defines what the function does when it's called.</p>

<div class="code-div">
  <span title="copy code" id="code-27-img" class="code-div-img"></span>
  <div id="code-27">

  &gt;&gt;&gt; def avg( num ):<br>

  ... <span class="tab-1">sum = 0</span><br>

  ... <span class="tab-1">for elem in num:</span><br>

  ... <span class="tab-2">sum = sum + elem</span><br>

  ... <span class="tab-1">return float( sum ) / len( num )</span><br>

  ...<br>

  </div>
</div>


<p>Functions can take zero or more arguments. A function with no
arguments still needs open and close parentheses, <code>def
func():</code>. A function with multiple arguments separates then with
commas, <code>def func( a, b ):</code>.</p>

<p>Once a function is defined, it can be used anywhere, including in
other functions. Suppose we now wanted to write a
function <code>stdev()</code> to compute the population standard
deviation of a numeric list. We can use our <code>avg()</code>
function to help to do this.</p>

<div class="code-div">
  <span title="copy code" id="code-28-img" class="code-div-img"></span>
  <div id="code-28">
  &gt;&gt;&gt; import math<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; def stdev( num ):<br>

  ... <span class="tab-1">sum = 0</span><br>

  ... <span class="tab-1">num_avg = avg( num )</span><br>

  ... <span class="tab-1">for elem in num:</span><br>

  ... <span class="tab-2">sum = sum + ( ( elem - num_avg ) ** 2.0 )</span><br>

  ... <span class="tab-1">return math.sqrt( sum / len( num ) )</span><br>

  ...<br>

  </div>
</div>


<p>What if we wanted to allow a user to decide whether to calculate
population standard deviation or sample standard deviation? We could
write two separate functions to do this, but an easier way is to add
an argument to the <code>stdev()</code> function to specify which
standard deviation to calculate.</p>

<div class="code-div">
  <span title="copy code" id="code-29-img" class="code-div-img"></span>
  <div id="code-29">
  &gt;&gt;&gt; import math<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; def stdev( num, pop = True ):<br>

  ... <span class="tab-1">sum = 0</span><br>

  ... <span class="tab-1">num_avg = avg( num )</span><br>

  ... <span class="tab-1">for elem in num:</span><br>

  ... <span class="tab-2">sum = sum + ( ( elem - num_avg ) ** 2.0 )</span><br>

  ... <span class="tab-1">if pop == True:</span><br>

  ... <span class="tab-2">return math.sqrt( sum / len( num ) )</span><br>

  ... <span class="tab-1">else:</span><br>

  ... <span class="tab-2">return math.sqrt( sum / ( len( num ) - 1 )
  )</span><br>

  ...<br>

  </div>
</div>


<p>Now, <code>stdev()</code> takes a second
argument <code>pop</code>. If <code>pop</code> is <code>True</code>,
we return population standard deviation. Otherwise, we return sample
standard deviation. Notice that in the function header we
defined <code>pop = True</code>. This specifies a <em>default
value</em> for <code>pop</code>. If the user doesn't specify a second
argument, we return population standard deviation by default.</p>

<div class="code-div">
  <span title="copy code" id="code-30-img" class="code-div-img"></span>
  <div id="code-30">

  &gt;&gt;&gt; l = [&nbsp;7, 8, 14&nbsp;]<br>

  &gt;&gt;&gt; print( 'Pop stdev of', l, 'is', stdev( l ) )<br>

  Pop stdev of [7, 8, 14] is 3.09120616517<br>

  &gt;&gt;&gt; print( 'Sample stdev of', l, 'is', stdev( l, False ) )<br>

  Sample stdev of [7, 8, 14] is 3.7859388972<br>

  </div>
</div>


<p>It's even possible for functions to call themselves. This is known as
<em>recursion</em>. Consider the Fibonacci sequence:</p>

<ul>

  <li><i>F</i>( 0 ) = 0

  <li><i>F</i>( 1 ) = 1

  <li><i>F</i>( <i>n</i> ) = <i>F</i>( <i>n</i> - 1 )
  + <i>F</i>( <i>n</i> - 2 ) &forall; <i>n</i> &ge; 2

</ul>

<p>Since Fibonacci numbers for <i>n</i> &ge; 2 are defined based on
lower-order versions of themselves, they are a common candidate to
demonstrate a recursive function.</p>

<div class="code-div">
  <span title="copy code" id="code-31-img" class="code-div-img"></span>
  <div id="code-31">

  &gt;&gt;&gt; def fib( n ):<br>

  ... <span class="tab-1">if n &lt;= 0:</span><br>

  ... <span class="tab-2">return 0</span><br>

  ... <span class="tab-1">elif n == 1:</span><br>

  ... <span class="tab-2">return 1</span><br>

  ... <span class="tab-1">else:</span><br>

  ... <span class="tab-2">return fib( n - 1 ) + fib( n - 2 )</span><br>

  ...<br>

  &gt;&gt;&gt; print( fib( 0 ) )<br>

  0<br>

  &gt;&gt;&gt; print( fib( 2 ) )<br>

  1<br>

  &gt;&gt;&gt; print( fib( 20 ) )<br>

  6765<br>

  &gt;&gt;&gt; print( fib( 40 ) )<br>

  102334155<br>

  </div>
</div>

<p>If you look at <code>fib()</code>, you should see intuitively that
it's very expensive to execute. If you tried to
calculate <code>fib(&nbsp;100&nbsp;)</code>, for example, you'd be
waiting a long time for it to finish. That's because each number if a
Fibonacci sequence requires two recursive calls, which themselves each
require two recursive calls, and so on.</p>


<div id="fib-accordion" class="detail">
  <h3>Fibonacci, Rabbits, and Efficiency</h3>
  <div style="background: none; background-color: #e7eefb;">

    <p>Although the origins of Fibonacci numbers are
    <a style="color: #e17009;" target="_blank"
    href="https://en.wikipedia.org/wiki/Fibonacci_number#History">credited
    to Indian mathematics</a>, the number series is named after
    Leonardo of Pisa, also known as Fibonacci. In 1202 Fibonacci posed
    a question about an idealized rabbit population.</p>

    <ul>

      <li>You begin with one male and one female rabbit, just born.

      <li>Rabbits reach sexual maturity in one month.

      <li>Once they reach sexual maturity, female rabbits give birth
      to one male and one female rabbit each month.

      <li>Rabbits never die.

    </ul>

    <p>Fibonacci wondered, "How many <em>pairs</em> of rabbits would
    you have after <i>n</i> months passed?"</p>

    <ul>

      <li><b>Month 1.</b> One pair, the original rabbits.

      <li><b>Month 2.</b> One pair, the rabbits have mated but not
      given birth.

      <li><b>Month 3.</b> Two pairs, one sexually mature and one just
      born.

      <li><b>Month 4.</b> Three pairs, two sexually mature and one
      just born.

      <li><b>Month 5.</b> five  pairs, three sexually mature and two
      just born.

    </ul>

    <p>As you can see, this forms a numeric sequence that we now call
    the Fibonacci number series.</p>

    <p>If we need to compute large Fibonacci numbers, the recursive
    formula is too inefficient. Instead, we use <a style="color:
    #e17009;" target="_blank"
    href="https://mathworld.wolfram.com/BinetsFibonacciNumberFormula.html">Binet's
    Formula</a> to calculate <i>F</i>(<i>n</i>) directly.</p>

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-32-img" class="code-div-img"></span>
      <div id="code-32">
      &gt;&gt;&gt; import math<br>

      &gt;&gt;&gt;<br>

      &gt;&gt;&gt; def fib_e( n ):<br>

      ... <span class="tab-1">if n &lt;= 0:</span><br>

      ... <span class="tab-2">return 0</span><br>

      ... <span class="tab-1">elif n == 1:</span><br>

      ... <span class="tab-2">return 1</span><br>

      ... <span class="tab-1">else:</span><br>

      ... <span class="tab-2">sum = ( 1.0 + math.sqrt( 5 ) ) **
      n</span><br>

      ... <span class="tab-2">sum = sum - ( 1.0 - math.sqrt( 5 ) ) **
      n</span><br>

      ... <span class="tab-2">sum = sum / ( 2.0 ** n * math.sqrt( 5 )
      )</span><br>

      ... <span class="tab-2">return round( sum )</span><br>

      ...<br>

      </div>
    </div>

    <p>If you're curious, <i>F</i>(100) = 3.542248481792631e+20. It
    would take about 4 years for rabbits to outnumber humans based on
    Fibonacci's scenario.</p>

  </div>
</div>


<h2 id="numpy">NumPy</h2>

<p><a href="https://www.numpy.org">NumPy</a> (numerical Python,
hereafter <em>numpy</em>, pronounced <i>num-pie</i>) is a library that
provides advanced mathematical operations involving statistics and
linear algebra. Our interest is mainly in numpy statistical
capabilities, since this will allow us to calculate things like mean,
variance, minimum, maximum, correlation, and covariance on lists of
numbers.</p>

<p>numpy's standard data type is an array: a sequence of numbers, all
of the same type. Arrays can be created in numerous ways. Common
examples include:</p>

<ul>

  <li>from a Python list,

  <li>in a pre-defined size containing zeros or ones, or

  <li>using numpy's <code>arange()</code> command, which is analogous
  to Python's <code>range()</code> command.

</ul>


<div class="code-div">
  <span title="copy code" id="code-33-img" class="code-div-img"></span>
  <div id="code-33">

  &gt;&gt;&gt; import numpy<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; arr = numpy.array( [&nbsp;2, 3, 4&nbsp;] )<br>

  &gt;&gt;&gt; print( arr )<br>

  [2 3 4]<br>

  &gt;&gt;&gt; print( type( arr ) )<br>

  &lt;class 'numpy.ndarray'&gt;<br>

  &gt;&gt;&gt; arr = numpy.zeros( 5 )<br>

  &gt;&gt;&gt; print( arr )<br>

  [0. 0. 0. 0. 0.]<br>

  &gt;&gt;&gt; arr = numpy.arange( 10, 30, 5 )<br>

  &gt;&gt;&gt; print( arr )<br>

  [10 15 20 25]<br>

  </div>
</div>


<p>numpy also supports <em>multidimensional arrays</em>. For example, a
table is a 2-dimensional (2D) array with rows and columns. A data cube
is a 3-dimensional array with rows, columns, and slices. We restrict
ourselves to 1D and 2D arrays in this tutorial. The easiest way to
define a 2D array in numpy is to provide a list of equal-length
sublists to the <code>array()</code> operator, one sublist for each
row in the array.</p>

<div class="code-div">
  <span title="copy code" id="code-34-img" class="code-div-img"></span>
  <div id="code-34">

  &gt;&gt;&gt; import numpy<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; arr = numpy.array( [&nbsp;[&nbsp;1, 2&nbsp;], [&nbsp;4, 5&nbsp;], [&nbsp;7, 8&nbsp;]&nbsp;] )<br>

  &gt;&gt;&gt; print( arr )<br>

  [[1 2]<br>
  &nbsp;[4 5]<br>
  &nbsp;[7 8]]<br>

  &gt;&gt;&gt; print( arr[&nbsp;1&nbsp;] )<br>

  [4 5]<br>

  &gt;&gt;&gt; print( arr[&nbsp;1, 1&nbsp;] )<br>

  5<br>

  &gt;&gt;&gt; print( arr[&nbsp;-1&nbsp;] )<br>

  [7 8]<br>

  &gt;&gt;&gt; print( arr[&nbsp;1: 3&nbsp;] )<br>

  [[4 5]<br>
  &nbsp;[7 8]]<br>

  &gt;&gt;&gt; print( arr[&nbsp;0: 2, 1&nbsp;] )<br>

  [2 5]<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; print( arr.shape )<br>

  (3, 2)<br>

  &gt;&gt;&gt; arr = arr.reshape( 2, 3 )<br>

  &gt;&gt;&gt; print( arr )<br>

  [[1 2 4]<br>
  &nbsp;[5 7 8]<br>

  &gt;&gt;&gt; print( arr.shape )<br>

  (2, 3)<br>

  </div>
</div>


<p>numpy provides access to elements of an array using the standard
indexing operator <code>[&nbsp;]</code>. Negative indices and slicing
can be used, similar to Python lists. It's also possible to ask for
the <em>shape</em> of an array using <code>shape()</code>, which
returns the number of rows for a 1D array, or a tuple with the number
of rows and columns for a 2D array. It's even possible
to <em>reshape</em> an array using <code>reshape()</code>, rearranging
the array's values into a new (row, column) configuration.</p>

<p>As mentioned above, one of the main advantages of using numpy is
access to a number of statistical operations. A few common examples
are listed below. A full list of numpy's <a target="_blank"
href="https://numpy.org/doc/stable/reference/routines.statistics.html">statistical
operators</a> is available online.</p>

<ul>

  <li><code>numpy.mean( arr )</code>, the arithmetic mean of an
  array's values.

  <li><code>numpy.median( arr )</code>, the median of an array's
  values.

  <li><code>numpy.var( arr )</code>, the variance of an array's
  values.

  <li><code>numpy.std( arr )</code>, the population standard deviation
  of an array's values.

  <li><code>numpy.amax( arr )</code>, the maximum value in an array.

  <li><code>numpy.amin( arr )</code>, the minimum value in an array.

  <li><code>numpy.histogram( arr, b )</code>, build a histogram of the
  array's values with <code>b</code> bins; numpy returns a two-valued
  tuple: the first value an array of the number of values in each bin,
  the second contains an array of the boundary values that separate
  the bins.

</ul>

<div class="code-div">
  <span title="copy code" id="code-35-img" class="code-div-img"></span>
  <div id="code-35">

  &gt;&gt;&gt; import numpy<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; arr = numpy.arange( 0, 500, 2 )<br>

  &gt;&gt;&gt; print( arr.size )<br>

  250<br>

  &gt;&gt;&gt; hist = numpy.histogram( arr, 10 )<br>

  &gt;&gt;&gt; print( hist )<br>

  (array([25, 25, 25, 25, 25, 25, 25, 25, 25, 25]), array([&nbsp;0. , 49.8,
  99.6, 149.4, 199.2, 249. , 298.8, 348.6, 398.4, 448.2, 498.&nbsp;]))

  </div>
</div>


<p>(Another use for numpy is to <a target="_blank"
href="https://numpy.org/doc/stable/reference/routines.linalg.html">perform
linear algebra operations</a>. Although less common in the analytics
program, numpy's ability to compute eigenvectors, invert matrices, or
solve systems of equations is very powerful.)


<h2 id="pandas">pandas</h2>

<p>The <a target="_blank" href="https://pandas.pydata.org">pandas
(Python Data Analysis) library</a> builds on numpy, offering an
extended set of data manipulation and analysis tools. pandas is built
on a few basic data types (or <em>data structures</em>, as they're
called in pandas), together with operations on data stored using these
types.</p>


<h3>Series</h3>

<p>One of pandas's fundamental data types is
<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html">a
<code>Series</code>, a 1D labelled array</a>. You can think of this as
a numpy array with an explicit label attached to each data value. The
collection of labels is called the data's <em>index</em>.</p>

<p>A Series can be created in numerous ways: from Python lists, from a
numpy array, or even from a Python dictionary.</p>

<div class="code-div">
  <span title="copy code" id="code-36-img" class="code-div-img"></span>
  <div id="code-36">
  &gt;&gt;&gt; import numpy<br>

  &gt;&gt;&gt; import pandas<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; s = pandas.Series( [&nbsp;1, 2, 3&nbsp;], [&nbsp;'a', 'b', 'c'&nbsp;] )<br>

  &gt;&gt;&gt; print( s )<br>

  a&nbsp;&nbsp;&nbsp;1<br>

  b&nbsp;&nbsp;&nbsp;2<br>

  c&nbsp;&nbsp;&nbsp;3<br>

  dtype: int64<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; d = { 'a': 3.14, 'b': 6.29, 'x': -1.34 }<br>

  &gt;&gt;&gt; t = pandas.Series( d )<br>

  &gt;&gt;&gt; print( t )<br>

  a&nbsp;&nbsp;&nbsp;&nbsp;3.14<br>

  x&nbsp;&nbsp;&nbsp;-1.34<br>

  b&nbsp;&nbsp;&nbsp;&nbsp;6.29<br>

  dtype: float64<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; a = numpy.array( [&nbsp;4.5, 5.5, 6.5&nbsp;] )<br>

  &gt;&gt;&gt; u = pandas.Series( a )<br>

  &gt;&gt;&gt; print( u )<br>

  0&nbsp;&nbsp;&nbsp;4.5<br>

  1&nbsp;&nbsp;&nbsp;5.5<br>

  2&nbsp;&nbsp;&nbsp;6.5<br>

  dtype: float64<br>

  </div>
</div>


<p>Data in a Series can be queried using numeric indices and slicing,
just like with Python lists and numpy arrays. It can also be accessed
using index labels, similar to a Python dictionary.</p>

<div class="code-div">
  <span title="copy code" id="code-37-img" class="code-div-img"></span>
  <div id="code-37">
  &gt;&gt;&gt; import numpy<br>

  &gt;&gt;&gt; import pandas<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; s = pandas.Series( [&nbsp;1, 2, 3&nbsp;], [&nbsp;'a', 'b', 'c'&nbsp;] )<br>

  &gt;&gt;&gt; print( s[&nbsp;1&nbsp;] )<br>

  2<br>

  &gt;&gt;&gt; print( s[&nbsp;'c'&nbsp;] )<br>

  3<br>

  &gt;&gt;&gt; print( s[&nbsp;1: 3&nbsp;] )<br>

  b&nbsp;&nbsp;&nbsp;2<br>

  c&nbsp;&nbsp;&nbsp;3<br>

  dtype: int64<br>

  </div>
</div>


<p>More importantly, we can index by applying a conditional operation
to every data element in a Series. This returns a new boolean Series
with the result of applying the conditional (<code>True</code>
or <code>False</code>) at each element position. The boolean Series is
then used to select only those data elements that passed the
conditional. For example, suppose we wanted to select the elements in
a Series whose values were greater than 2, but less than 5.</p>

<div class="code-div">
  <span title="copy code" id="code-38-img" class="code-div-img"></span>
  <div id="code-38">

  &gt;&gt;&gt; import numpy<br>

  &gt;&gt;&gt; import pandas<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; s = pandas.Series( [&nbsp;1, 2, 3, 4, 5&nbsp;] )<br>

  &gt;&gt;&gt; idx = ( s &gt; 2 ) &amp; ( s &lt; 5 )<br>

  &gt;&gt;&gt; print( idx )<br>

  0&nbsp;&nbsp;&nbsp;False<br>

  1&nbsp;&nbsp;&nbsp;False<br>

  2&nbsp;&nbsp;&nbsp;&nbsp;True<br>

  3&nbsp;&nbsp;&nbsp;&nbsp;True<br>

  4&nbsp;&nbsp;&nbsp;False<br>

  dtype: bool<br>

  &gt;&gt;&gt; s_sub = s[&nbsp;idx&nbsp;]<br>

  &gt;&gt;&gt; print( s_sub )<br>

  2&nbsp;&nbsp;&nbsp;3<br>

  3&nbsp;&nbsp;&nbsp;4<br>

  dtype: int64<br>

  </div>
</div>

<p>This is how pandas interprets these commands.</p>

<ul>

  <li>A Series <code>s</code> with values <code>[&nbsp;1, 2, 3, 4,
  5&nbsp;]</code> is created.

  <li><code>( s  2 )</code> creates a boolean Series
  with <code>True</code> at locations where <code>s</code> is greater
  than 2, and <code>False</code> otherwise: <code>[&nbsp;False, False,
  True, True, True&nbsp;]</code>

  <li><code>( s &lt; 5 )</code> creates a boolean Series
  with <code>True</code> at locations where <code>s</code> is less
  than 5, and <code>False</code> otherwise: <code>[&nbsp;True, True,
  True, True, False&nbsp;]</code>

  <li>The <code>&amp;</code> (boolean and) operator combines the two
  boolean Series, returning <code>True</code> if the values in both
  Series are <code>True</code>, and <code>False</code> otherwise:
  <code>[&nbsp;False, False, True, True, False&nbsp;]</code>

  <li>Passing this boolean Series as an index to <code>s</code>
  returns the data elements in <code>s</code> whose corresponding
  index is <code>True</code>, that is, the third and fourth entries
  <code>[&nbsp;3, 4&nbsp;]</code>. This represents all the entries in
  <code>s</code> with a value greater than 2, but less than 5.

</ul>

<p>Because pandas data have labels, we can perform operations that
use <em>data alignment</em>. pandas will look at the variables
involved in an operation, and automatically "match up" data elements
with common labels.</p>

<div class="code-div">
  <span title="copy code" id="code-39-img" class="code-div-img"></span>
  <div id="code-39">
  &gt;&gt;&gt; import numpy<br>

  &gt;&gt;&gt; import pandas<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; s = pandas.Series( [&nbsp;1, 2, 3&nbsp;], [&nbsp;'a', 'b', 'c'&nbsp;] )<br>

  &gt;&gt;&gt; t = pandas.Series( { 'a': 3.14, 'b': 6.29, 'x': -1.34 } )<br>

  &gt;&gt;&gt; print( s + t )<br>

  a&nbsp;&nbsp;&nbsp;&nbsp;4.14<br>

  b&nbsp;&nbsp;&nbsp;&nbsp;8.29<br>

  c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NaN<br>

  x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NaN<br>

  dtype: float64<br>

  </div>
</div>


<p>When we apply <code>s + t</code>, pandas sees data with
labels <code>a</code> and <code>b</code> in both variables, so it
knows to add those entries together. If data with a common label is
missing from any of the Series, the result is undefined, and set to
<code>NaN</code> (not a number).</p>


<h3>DataFrame</h3>

<p>A <code>DataFrame</code> is the second fundamental data type in
pandas.
<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html">A
DataFrame is a 2D table</a> whose columns and rows are both
labelled. You can think of a DataFrame as a table of Series arrays,
one for each column in the DataFrame. Row labels are still referred to
as the index, and column labels are simply called the
<em>columns</em>.

<div class="code-div">
  <span title="copy code" id="code-40-img" class="code-div-img"></span>
  <div id="code-40">
  &gt;&gt;&gt; import numpy<br>

  &gt;&gt;&gt; import pandas<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; d = [&nbsp;[&nbsp;1, 2&nbsp;], [&nbsp;4, 5&nbsp;], [&nbsp;7, 8&nbsp;]&nbsp;]<br>

  &gt;&gt;&gt; df = pandas.DataFrame( d, index = [&nbsp;'a', 'b', 'c'&nbsp;], columns = [
  'C1', 'C2'&nbsp;] )<br>

  &gt;&gt;&gt; print( df )<br>

  &nbsp; &nbsp;C1 &nbsp;C2<br>

  a &nbsp; 1 &nbsp; 2<br>

  b &nbsp; 4 &nbsp; 5<br>

  c &nbsp; 7 &nbsp; 8<br>

  </div>
</div>


<p>Indexing is more complicated with DataFrames, since there are two
separate dimensions: the columns and the rows. The following operators
are used to index a DataFrame variable.</p>

<ul>

  <li><code>[&nbsp;c&nbsp;]</code>, return all the values in the column
  named <code>c</code>.

  <li><code>loc[&nbsp;r&nbsp;]</code>, return all the values in the row
  named <code>r</code>.

  <li><code>loc[&nbsp;r, c&nbsp;]</code>, return the value in the row
  named <code>r</code> and the column named <code>c</code>.

  <li><code>iloc[&nbsp;i&nbsp;]</code>, return all the values in the
  DataFrame's <code>i</code>-ith row.

</ul>

<div class="code-div">
  <span title="copy code" id="code-41-img" class="code-div-img"></span>
  <div id="code-41">
  &gt;&gt;&gt; import numpy<br>

  &gt;&gt;&gt; import pandas<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; d = [&nbsp;[&nbsp;1, 2&nbsp;], [&nbsp;4, 5&nbsp;], [&nbsp;7, 8&nbsp;]&nbsp;]<br>

  &gt;&gt;&gt; df = pandas.DataFrame( d, index = [&nbsp;'a', 'b', 'c'&nbsp;], columns = [
  'C1', 'C2'&nbsp;] )<br>


  &gt;&gt;&gt; print( df[&nbsp;'C2'&nbsp;] )<br>

  a &nbsp; 2<br>

  b &nbsp; 5<br>

  c &nbsp; 8<br>

  Name: C2, dtype: int64<br>

  &gt;&gt;&gt; print( df[&nbsp;'C1'&nbsp;][&nbsp;'b'&nbsp;] )<br>

  4<br>

  &gt;&gt;&gt; print( df.loc[&nbsp;'b'&nbsp;] )<br>

  C1 &nbsp; 4<br>

  C2 &nbsp; 5<br>

  Name: b, dtype: int64<br>

  &gt;&gt;&gt; print( df.iloc[&nbsp;2&nbsp;] )<br>

  C1 &nbsp; 7<br>

  C2 &nbsp; 8<br>

  Name: c, dtype: int64<br>

  </div>
</div>


<div id="pandas-slice-accordion" class="detail">
  <h3>Slicing DataFrames</h3>
  <div style="background: none; background-color: #e7eefb;">
    <p>It's possible to use slicing to return multiple rows (and/or
    columns), rather than a single result. This must be done in a
    particular way to properly handle and differentiate between rows
    and columns, however, making it more complex than slicing lists or
    arrays.

    <ul>

      <li><code>df[&nbsp;r0: r1&nbsp;]</code>, return all the values
      in <b>rows</b> <code>r0</code>
      to <code>r1</code> <em>inclusive</em>.

      <div style="margin-bottom: 0.3em;"></div>

      <b>Note 1.</b> When you index with <code>[&nbsp;r0:
      r1&nbsp;]</code> it returns <b>rows</b>, not columns like it
      does when you only provide a single index.

      <div style="margin-bottom: 0.3em;"></div>

      <b>Note 2.</b> Slicing a DataFrame includes all rows
      from <code>r0</code> up to <b>and
      including</b> <code>r1</code>. This is different from slicing on
      a list or an array, which would exclude <code>r1</code> from the
      result.

      <div style="margin-bottom: 0.3em;"></div>

      <li><code>df.loc[&nbsp;r0: r1&nbsp;]</code>, return all the
      values in rows <code>r0</code> to <code>r1</code> inclusive.

      <li><code>df.loc[&nbsp;r0: r1, c0: c1&nbsp;]</code>, return the
      values in rows <code>r0</code> to <code>r1</code> inclusive, and
      columns <code>c0</code> to <code>c1</code> inclusive within
      those rows.

      <li><code>df.loc[&nbsp;:, c0: c1&nbsp;]</code>, return all the
      values in columns <code>c0</code> to <code>c1</code> inclusive
      (<code>[&nbsp;:&nbsp;]</code> is the <em>null slice</em>, and
      means "select everything on this dimension").

    </ul>

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-42-img" class="code-div-img"></span>
      <div id="code-42">
      &gt;&gt;&gt; import numpy<br>

      &gt;&gt;&gt; import pandas<br>

      &gt;&gt;&gt;<br>

      &gt;&gt;&gt; d = [&nbsp;[&nbsp;1, 2, -1&nbsp;], [&nbsp;4, 5, -2&nbsp;], [&nbsp;7, 8, -3&nbsp;]&nbsp;]<br>

      &gt;&gt;&gt; df = pandas.DataFrame( d, index = [&nbsp;'a', 'b', 'c'&nbsp;], columns
      = [&nbsp;'C1', 'C2', 'C3'&nbsp;] )<br>

      &gt;&gt;&gt; print( df[&nbsp;'b': 'c'&nbsp;] )<br>

      &nbsp; &nbsp;C1 &nbsp;C2 &nbsp;C3<br>

      b &nbsp; 4 &nbsp; 5 &nbsp;-2<br>

      c &nbsp; 7 &nbsp; 8 &nbsp;-3<br>

      &gt;&gt;&gt; print( df.loc[&nbsp;'a': 'b'&nbsp;] )<br>

      &nbsp; &nbsp;C1 &nbsp;C2 &nbsp;C3<br>

      a &nbsp; 1 &nbsp; 2 &nbsp;-1<br>

      b &nbsp; 4 &nbsp; 5 &nbsp;-2<br>

      &gt;&gt;&gt; print( df.loc[&nbsp;:, 'C2': 'C3'&nbsp;] )<br>

      &nbsp; &nbsp;C2 &nbsp;C3<br>

      a &nbsp; 2 &nbsp;-1<br>

      b &nbsp; 5 &nbsp;-2<br>

      c &nbsp; 8 &nbsp;-3<br>

      &gt;&gt;&gt; print( df.loc[&nbsp;'a': 'b', 'C1': 'C2'&nbsp;] )<br>

      &nbsp; &nbsp;C1 &nbsp;C2<br>

      a &nbsp; 1 &nbsp; 2<br>

      b &nbsp; 4 &nbsp; 5<br>

      </div>
    </div>
  </div>
</div>


<p>You can insert and delete rows and columns from a DataFrame, or
change values at specific index positions, using the same indexing
operations.</p>

<div class="code-div">
  <span title="copy code" id="code-43-img" class="code-div-img"></span>
  <div id="code-43">
  &gt;&gt;&gt; import numpy<br>

  &gt;&gt;&gt; import pandas<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; d = [&nbsp;[&nbsp;1, 2&nbsp;], [&nbsp;4, 5&nbsp;], [&nbsp;7, 8&nbsp;]&nbsp;]<br>

  &gt;&gt;&gt; df = pandas.DataFrame( d, index = [&nbsp;'a', 'b', 'c'&nbsp;], columns = [
  'C1', 'C2'&nbsp;] )<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; s = pandas.Series( { 'C1': 9, 'C2': 11 } )<br>

  &gt;&gt;&gt; s.name = 'd'<br>

  &gt;&gt;&gt; df = df.append( s )<br>

  &gt;&gt;&gt; print( df )<br>

   &nbsp; C1 &nbsp;C2<br>

  a &nbsp;1 &nbsp; 2<br>

  b &nbsp;4 &nbsp; 5<br>

  c &nbsp;7 &nbsp; 8<br>

  d &nbsp;9 &nbsp;11<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; df[&nbsp;'C3'&nbsp;] = df[&nbsp;'C1'&nbsp;] + df[&nbsp;'C2'&nbsp;]<br>

  &gt;&gt;&gt; df[&nbsp;'C1'&nbsp;][&nbsp;'a'&nbsp;] = 99<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; print( df )<br>

  &nbsp; &nbsp;C1 &nbsp;C2 &nbsp;C3<br>

  a &nbsp;99 &nbsp; 2 &nbsp; 3<br>

  b &nbsp; 4 &nbsp; 5 &nbsp; 9<br>

  c &nbsp; 7 &nbsp; 8 &nbsp;15<br>

  d &nbsp; 9 &nbsp;11 &nbsp;20<br>

  </div>
</div>


<div id="pandas-pop-accordion" class="detail">
  <h3>Maximum Population Revisited</h3>
  <div style="background: none; background-color: #e7eefb;">

    <p>To better exemplify the power of pandas, recall the previous
    problem of identifying the city with the maximum estimated 2011
    population from a Census Bureau CSV file. Using pandas, we could
    identify the city with the largest population using only a few
    lines of code.</p>

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-44-img" class="code-div-img"></span>
      <div id="code-44">

      &gt;&gt;&gt; import numpy<br>

      &gt;&gt;&gt; import pandas<br>

      &gt;&gt;&gt;<br>

      &gt;&gt;&gt; pop = pandas.read_csv( 'pop.csv', encoding='latin1' )<br>

      &gt;&gt;&gt; pop.describe()<br>

      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SUMLEV &nbsp; &nbsp;
      &nbsp; &nbsp;STATE &nbsp;&hellip;&nbsp; POPESTIMATE2011<br>

      count 81746.000000 81746.000000 &nbsp;&hellip;&nbsp; &nbsp;
      &nbsp;81746.000000<br>

      mean &nbsp; &nbsp;114.380936 &nbsp; &nbsp;30.592849
      &nbsp;&hellip;&nbsp; &nbsp; &nbsp;15929.926565<br>

      std &nbsp; &nbsp; &nbsp;47.934468 &nbsp; &nbsp;13.416473
      &nbsp;&hellip;&nbsp; &nbsp; 244346.744241<br>

      min &nbsp; &nbsp; &nbsp;40.000000 &nbsp; &nbsp; 1.000000
      &nbsp;&hellip;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.000000<br>

      25% &nbsp; &nbsp; &nbsp;61.000000 &nbsp; &nbsp;19.000000
      &nbsp;&hellip;&nbsp; &nbsp; &nbsp; &nbsp;339.000000<br>

      50% &nbsp; &nbsp; 157.000000 &nbsp; &nbsp;29.000000
      &nbsp;&hellip;&nbsp; &nbsp; &nbsp; 1209.000000<br>

      75% &nbsp; &nbsp; 157.000000 &nbsp; &nbsp;41.000000
      &nbsp;&hellip;&nbsp; &nbsp; &nbsp; 5041.000000<br>

      max &nbsp; &nbsp; 172.000000 &nbsp; &nbsp;56.000000
      &nbsp;&hellip;&nbsp; 37691912.000000<br>

      &gt;&gt;&gt;<br>

      &gt;&gt;&gt; idx = pop[&nbsp;'NAME'&nbsp;] !=
      pop[&nbsp;'STNAME'&nbsp;]<br>

      &gt;&gt;&gt; city_pop = pop[&nbsp;idx&nbsp;]<br>

      &gt;&gt;&gt; i = city_pop[&nbsp;'POPESTIMATE2011'&nbsp;].idxmax()<br>

      &gt;&gt;&gt;<br>

      &gt;&gt;&gt; nm = pop[&nbsp;'NAME'&nbsp;][&nbsp;i&nbsp;]<br>

      &gt;&gt;&gt; state = pop[&nbsp;'STNAME'&nbsp;][&nbsp;i&nbsp;]<br>

      &gt;&gt;&gt; max_pop = pop[&nbsp;'POPESTIMATE2011'&nbsp;][&nbsp;i&nbsp;]<br>

      &gt;&gt;&gt; print( nm, 'in state', state, 'has population', max_pop )<br>

      Los Angeles County in state California has population
      9889056<br>

      </div>
    </div>

    <p>This is how pandas interprets these commands.</p>

    <ul>

      <li><code>read_csv()</code> reads the population CSV file,
      storing it in a DataFrame called <code>pop</code>. The header
      line in the CSV file is used to assign labels to each
      column. Default row indices 0&ndash;81745 are assigned to each
      row.

      <li><code>describe()</code> reports descriptive statistics on a
      DataFrame. The values are returned as a DataFrame, if you want
      to store or index them.

      <li>To ignore state population rows, we build an index
      Series <code>idx</code> that contains <code>True</code> for rows
      that <b>do not</b> contain state populations, <code>False</code>
      otherwise.

      <li><code>idx</code> is used to select city population rows,
      stored in a new DataFrame <code>city_pop</code>.

      <li><code>city_pop[&nbsp;'POPESTIMATE2011'&nbsp;]</code> selects
      the column with estimated 2011 population
      values. Applying <code>idxmax()</code> to this column returns
      the label of the row with the maximum value, that is, the row
      with the largest estimated 2011 city population.

      <li>The label from <code>idxmax()</code> is used to index the
      original <code>pop</code> DataFrame, identifying the largest
      city's name, state, and population.

    </ul>
  </div>
</div>


<h2 id="sklearn">scikit-learn</h2>

<p><code>scikit-learn</code> (<code>sklearn</code>) is an open-source
Python library that is used extensively for analytic tasks. Built as
a <a href="https://en.wikipedia.org/wiki/Scikit-learn"
target="_blank">Google Summer of Code project by David Cournapeau</a>,
the term <code>scikit</code> derives from the notion that the package
provides a toolkit for <a href="https://www.scipy.org"
target="_blank"><code>scipy</code></a>, a scientific Python library
similar to <code>numpy</code>.</p>

<p>Originally, <code>sklearn</code> was designed for machine learning
(ML), and retains an extensive list of algorithms to implement
numerous ML techniques. More recently, <code>sklearn</code> has
extended to include dimension reduction, model parameter comparison
and validation, and preprocessing such as text analytics, data
standardization, non-linear transformations, categorical encoding, and
imputation. The combination of base Python and <code>sklearn</code>
are often used as an all-purpose preprocessor and derivation engine,
transforming raw input into a format designed for more sophisticated
follow-on analytics.</p>

<p><code>sklearn</code> is built on top of <code>numpy</code>, so it
uses numpy's <code>Array</code> as its basic sequence data
structure. This also means that it integrates well
with <code>pandas</code>, which is also built on top
of <code>numpy</code>.</p>


<h3>Classification</h3>

<p>Classification is a supervised learning approach that analyzes
samples with known classes. It uses one subset of the samples to train
a model, and a second subset to test the model's predictive
accuracy. The model uses <em>predictor</em> variables to estimate the
<em>target</em> class. The model can then be used to suggest a class
for unclassified samples.</p>

<p>There is often confusion about the differences between
classification and clustering. The following table identifies some of
the characteristics that separate these two approaches.</p>

<div style="width: 80%; margin-left: 10%;">
<table style="margin-left: auto; margin-right: auto;">
<caption>
  <b>scikit-learn: classification <em>vs.</em> clustering</b>
</caption>

<tr>
  <th>Criteria</th>
  <th>Classification</th>
  <th>Clustering</th>
</tr>

<tr class="even">
  <td style="text-align: center;"><b>Supervised</b></td>
  <td style="width: 42.5%;">Yes</td>
  <td style="width: 42.5%;">No</td>
</tr>

<tr class="odd">
  <td style="text-align: center;"><b>Use Case</b></td>
  <td>Classify new samples into estimated classes</td>
  <td>Suggest groups of samples based on similar data patterns</td>
</tr>

<tr class="even">
  <td style="text-align: center;"><b>Algorithms</b></td>
  <td>Linear regression, ridge regression, lasso, elastic net, OMP,
  Bayesian regression, logistic regression, SGD, perceptron, LDA, QDA,
  kernel ridge regression, SVM, SVC, nearest neighbours, Gaussian
  process regression, naive Bayes, decision trees, random forest,
  XGBoost</td>
  <td><em>k</em>-means, affinity propagation, mean-shift, spectral,
  Ward, agglomerative, DBSCAN, Gaussian mixture, Birch</td>
</tr>

<tr class="odd">
  <td style="text-align: center;"><b>Required Data</b></td>
  <td>Labelled samples from a set of classes</td>
  <td>Unlabelled samples</td>
</tr>

</table>
</div>


<p>As an example of classification, we will use the Iris dataset,
which is available in <code>sklearn</code>'s <code>datasets</code>
module. Recall
that <a href="https://en.wikipedia.org/wiki/Iris_flower_data_set"
target="_blank">Fisher's Iris dataset</a> contains petal and sepal
lengths and widths for 50 samples of 3 classes of irises: Iris setosa,
Iris virginica, and Iris versicolor. This represents an excellent
example dataset, since it has already been pre-classified into one of
the three iris types.</p>

<p>To begin, we import <code>numpy</code> and <code>sklearn</code>,
load the Iris dataset, and explore it by printing its features
(predictor variables) and target classes. We then create the predictor
matrix using all samples' petal lengths and widths, as well as the
corresponding target iris types.

If you prefer, you can <a href="notebook/classify.ipynb"
target="_blank">download a Jupyter notebook with the classification
code</a> from here.</p>


<div class="code-div">
  <span title="copy code" id="code-45-img" class="code-div-img"></span>
  <div id="code-45">
  &gt;&gt;&gt; import numpy as np<br>
  &gt;&gt;&gt; from sklearn import datasets<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; iris = datasets.load_iris()<br>
  &gt;&gt;&gt;<br>
  &gt;&gt;&gt;<em>#  Print some descriptive statistics about the data and target</em><br>

  &gt;&gt;&gt; print( 'Data features:', iris.feature_names )<br>

  Data features: ['sepal length (cm)', 'sepal width (cm)', 'petal
  length (cm)', 'petal width (cm)']<br><br>

  &gt;&gt;&gt; print( 'Target classes:', iris.target_names )<br>
  Target classes: ['setosa' 'versicolor' 'virginica']<br><br>

  &gt;&gt;&gt; print( 'Truncated data array:', iris.data[ :5 ], '\n---\n', iris.data[ -5: ] )<br>

  Truncated data array:<br>
  [[5.1 3.5 1.4 0.2]<br>
   [4.9 3.  1.4 0.2]<br>
   [4.7 3.2 1.3 0.2]<br>
   [4.6 3.1 1.5 0.2]<br>
   [5.  3.6 1.4 0.2]] <br>
  ---<br>
   [[6.7 3.  5.2 2.3]<br>
   [6.3 2.5 5.  1.9]<br>
   [6.5 3.  5.2 2. ]<br>
   [6.2 3.4 5.4 2.3]<br>
   [5.9 3.  5.1 1.8]]<br><br>

  &gt;&gt;&gt; print( 'Target labels:', iris.target )<br>

  Target labels: [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1
  1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
  1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
  2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2]<br><br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt;<em>#  Set predictors X as petal length and width</em><br>
  &gt;&gt;&gt;<em>#  Set target y as iris class</em><br>

  &gt;&gt;&gt; X = iris.data[ :, [ 2, 3 ] ]<br>
  &gt;&gt;&gt; y = iris.target<br>
  </div>
</div>

<p>Notice that at the end of the code block we set the predictor
matrix <code>X</code> to include all petal lengths and widths, and the
target vector <code>y</code> to include the corresponding iris types
for each predictor sample. You might wonder, why are we only using
petal length and width, and not any sepal values? If you do some
initial exploration of the data by building scatterplots of petal
length versus width and sepal length versus width, you can see that
petal data does a better job of separating the three classes, versus
sepal data.</p>


<div style="width: 85%; margin-left: 7.5%;">
<!--
  <table style="margin-left: auto; margin-right: auto; margin-top: 0px; margin-bottom: 0px;">
-->
  <table style="margin: 2em auto 0px auto;">

  <tr>
  <td style="padding: 0px 8px 0px 0px; border: 0px solid black">
    <div class="code-div" style="margin: 0px;">
      <span title="copy code" id="code-46-img" class="code-div-img"></span>
      <div id="code-46">
  &gt;&gt;&gt; #  Plot petal data to inspect how samples cluster<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; from matplotlib.colors import ListedColormap<br>
  &gt;&gt;&gt; import matplotlib.pyplot as plt<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; <em>#  Use petal length and width as predictor variables</em><br>
  &gt;&gt;&gt; X = iris.data[ :, [ 2, 3 ] ]<br>
  &gt;&gt;&gt; y = iris.target<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; markers = ( 's', 'x', 'o' )<br>
  &gt;&gt;&gt; colors = ( 'red', 'blue', 'lightgreen' )<br>
  &gt;&gt;&gt; cmap = ListedColormap( colors[ :len( np.unique( y ) ) ] )<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; fig = plt.figure()<br>
  &gt;&gt;&gt; for i, col in enumerate( np.unique( y ) ):<br>
  ... <span class="tab-1">plt.scatter(\</span><br>
  ... <span class="tab-1">x=X[ y==col, 0 ], y=X[ y==col, 1 ],\</span><br>
  ... <span class="tab-1">c=[cmap( i )], marker=markers[ i ],\</span><br>
  ... <span class="tab-1">edgecolor='black', label=col )</span><br>
  &gt;&gt;&gt; plt.xlabel( 'Petal Length (cm)' )<br>
  &gt;&gt;&gt; plt.ylabel( 'Petal Width (cm)' )<br>
  &gt;&gt;&gt; plt.legend( ['setosa', 'versicolor', 'virginica' ] )<br>
  &gt;&gt;&gt; fig.suptitle( 'Petal Length vs. Width' )<br>
      </div>
    </div>
  </td>

  <td style="padding: 0px 8px 0px 0px; border: 0px solid black">
    <div class="code-div" style="margin: 0px;">
      <span title="copy code" id="code-47-img" class="code-div-img"></span>
      <div id="code-47">
  &gt;&gt;&gt; #  Plot sepal data to inspect how samples cluster<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; from matplotlib.colors import ListedColormap<br>
  &gt;&gt;&gt; import matplotlib.pyplot as plt<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; <em>#  Use sepal length and width as predictor variables</em><br>
  &gt;&gt;&gt; X = iris.data[ :, [ 0, 2 ] ]<br>
  &gt;&gt;&gt; y = iris.target<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; markers = ( 's', 'x', 'o' )<br>
  &gt;&gt;&gt; colors = ( 'red', 'blue', 'lightgreen' )<br>
  &gt;&gt;&gt; cmap = ListedColormap( colors[ :len( np.unique( y ) ) ] )<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; fig = plt.figure()<br>
  &gt;&gt;&gt; for i, col in enumerate( np.unique( y ) ):<br>
  ... <span class="tab-1">plt.scatter(\</span><br>
  ... <span class="tab-1">x=X[ y==col, 0 ], y=X[ y==col, 1 ],\</span><br>
  ... <span class="tab-1">c=[cmap( i )], marker=markers[ i ],\</span><br>
  ... <span class="tab-1">edgecolor='black', label=col )</span><br>
  &gt;&gt;&gt; plt.xlabel( 'Sepal Length (cm)' )<br>
  &gt;&gt;&gt; plt.ylabel( 'Sepal Width (cm)' )<br>
  &gt;&gt;&gt; plt.legend( ['setosa', 'versicolor', 'virginica' ] )<br>
  &gt;&gt;&gt; fig.suptitle( 'Sepal Length vs. Width' )<br>
      </div>
    </div>
  </td>
  </tr>

  <tr>
  <td style="padding: 0px 8px 0px 0px; border: 0px solid black">
    <img alt="petal length versus width scatterplot" style="width: 90%; margin-top: 1em;" src="fig/petal-scatterplot.png">
  </td>
  <td style="padding: 0px 8px 0px 0px; border: 0px solid black">
    <img alt="sepal length versus width scatterplot" style="width: 90%; margin-top: 1em;" src="fig/sepal-scatterplot.png">
  </td>
  </tr>

</table>
</div>

<p>Once the predictor and target <code>X</code> and <code>y</code> are
set, we need to split them into a <em>test</em> subset and a
<em>training</em> subset. We will build our predictive model using the
training data, then test its accuracy using the test
data. <code>sklearn</code> provides built-in support to divide a
labelled dataset using its <code>test_train_split</code> function.

<div class="code-div">
  <span title="copy code" id="code-48-img" class="code-div-img"></span>
  <div id="code-48">
  &gt;&gt;&gt; <em>#  Split data in training and test</em><br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; from sklearn.model_selection import train_test_split<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; X_train, X_test, y_train, y_test = train_test_split( X, y, test_size=0.3, stratify=y )<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; print( 'Number of training samples:', X_train.shape[ 0 ] )<br>
  &gt;&gt;&gt; print( 'Number of test samples:', X_test.shape[ 0 ] )<br>

  <br>
  Number of training samples: 105<br>
  Number of test samples: 45<br>
  <br>

  &gt;&gt;&gt; uniq, n = np.unique( y, return_counts = True )<br>
  &gt;&gt;&gt; print( 'Frequency of class values in y:', uniq, n )<br>
  &gt;&gt;&gt; uniq, n = np.unique( y_train, return_counts = True )<br>
  &gt;&gt;&gt; print( 'Frequency of class values in training dataset:', uniq, n )<br>
  &gt;&gt;&gt; uniq, n = np.unique( y_test, return_counts = True )<br>
  &gt;&gt;&gt; print( 'Frequency of class values in test dataset:', uniq, n )<br>
  <br>
  Frequency of class values in y: [0 1 2] [50 50 50]<br>
  Frequency of class values in training dataset: [0 1 2] [35 35 35]<br>
  Frequency of class values in test dataset: [0 1 2 ] [15 15 15]<br>
  </div>
</div>

<p><code>test_size</code> defines the relative size of the test
dataset to the training dataset, in this example, 70% for training,
30% for test. By default, <code>test_train_split</code> randomly
assigns samples to the training and test
datasets. The <code>stratify</code> parameter
forces <code>test_train_split</code> to produce training and test sets
with a proportion of target classes <code>y</code> in each set
equivalent to the original target dataset. That is, the class
proportions in each set are equivalent to the relative frequency of
each class in the original target dataset.</p>

<p>Next, we want
to <a href="https://scikit-learn.org/stable/auto_examples/preprocessing/plot_scaling_importance.html",
target="_blank">standardize our predictive variables</a> in the
training and test datasets, to try to fit the assumptions of many
modelling algorithms of a mean of zero and equal variance for each
variable. <code>sklearn</code>'s
<code>StandardScaler</code> can be used to achieve this, assuming
the underlying predictor variable distribution is bell-shaped. Centering
and scaling happen on a per-variable basis, with mean and standard deviation
saved within the <code>StandardScaler</code> variable for later use
during variable transformation.</p>

<p>Note that, if your distribution is skewed, per Dr. Race's
preprocessing instructions, you would not want to use a (&mu;=0,
&sigma;=1) standardization. Instead, you can use
the <code>MinMaxScaler</code> to scale each feature based on its
min&ndash;max range.</p>

<div class="code-div">
  <span title="copy code" id="code-49-img" class="code-div-img"></span>
  <div id="code-49">
  &gt;&gt;&gt; from sklearn.preprocessing import StandardScaler<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Fit a standard scalar to the predictive variables</em><br>
  &gt;&gt;&gt; sc = StandardScaler()<br>
  &gt;&gt;&gt; sc.fit( X_train )<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Transform predictive datasets based on the scalar</em><br>
  &gt;&gt;&gt; X_train_std = sc.transform( X_train )<br>
  &gt;&gt;&gt; X_test_std = sc.transform( X_test )<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Join (stack) the data training and test sets into a sequence of rows</em><br>
  &gt;&gt;&gt; X_comb_std = np.vstack( ( X_train_std, X_test_std ) )<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Join (stack) the target training and test sets into a 1D horizontal column</em><br>
  &gt;&gt;&gt; y_comb = np.hstack( ( y_train, y_test ) )<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Print some descriptive statistics about training and target</em><br>
  &gt;&gt;&gt; print( 'Standardized data array:' )<br>
  &gt;&gt;&gt; print( X_comb_std[ :5 ], '\n---\n', X_comb_std[ -5: ] )<br>
  &gt;&gt;&gt; print( 'Target array:' )<br>
  &gt;&gt;&gt; print( y_comb )<br>
  
  <br>
  Standardized data array:<br>
  [[ 0.20072503  0.12914551]<br>
   [-1.28030022 -1.31903956]<br>
   [-1.33726273 -1.31903956]<br>
   [ 0.71338762  0.65575826]<br>
   [-1.22333771 -1.31903956]] <br>
  ---<br>
   [[ 0.77035013  0.52410507]<br>
   [ 0.77035013  0.91906464]<br>
   [ 1.05516268  1.3140242 ]<br>
   [ 0.42857507  0.12914551]<br>
   [-1.28030022 -1.31903956]]<br>
  Target array:<br>
  [1 0 0 1 0 0 1 1 1 0 1 2 0 1 0 0 2 1 2 1 2 0 0 1 0 1 2 0 2 0 1 0 0 2 2 0 0 0 0 1 0 2 0 0 2 0 1 2 2 2 2 2 1 1 1 1 0 1 2 1 1 1 0 1 1 1 2 0 2 2 0 1 0 1 2 2 2 2 2 2 1 2 0 0 0 2 0 1 1 0 2 2 0 2 0 1 2 1 1 2 1 2 1 2 2 1 2 0 0 2 2 1 2 1 0 1 1 2 0 0 1 0 1 2 2 2 1 0 1 2 0 0 0 1 0 0 1 0 1 2 0 2 2 2 1 1 2 2 1 0]<br>
  </div>
</div>

<p>At this point, the data has been preprocessed into a state that is
ready for building classification models. <code>sklearn</code>
supports many different modeling algorithms. We will explore four of
these: <code>Perceptron</code> (neural net), <code>SVC</code> (support
vector classification), <code>KNN</code> (<em>k</em> nearest
neighbours), and random forest, an ensemble decision tree
approach.</p>

<p>One of the useful advantages of using <code>sklearn</code>
exclusively is that classification follows a fairly standard set of
steps, regardless of the specific algorithm being used.  We will look
at <code>Perceptron</code> in some detail, then provide examples for
the other three methods, with discussion limited to the specific
differences (if any) for each.</p>

<p>The <code>Perceptron</code> classifier is sometimes described as a
simple feed-forward single-layer neural net.  In visual terms,
consider a perceptron approach as one that attempts to choose linear
boundaries that separate classes from one another, to the extent that
this is possible. Technically, the perceptron method uses an input
vector of attribute values and a <em>weight vector</em> of similar
length (together with a <em>bias</em>) to compute a value for the
input. Based on that value, one of the available classes is
suggested. If the suggestion is incorrect, the weight vector is
updated. This continues until some type of convergence is
achieved.</p>

<p>In <code>sklearn</code>, the <code>Perceptron</code> algorithm
falls within the <code>linear_model</code> group. The following code
builds a perceptron prediction model for our Iris dataset example.</p>

<div class="code-div">
  <span title="copy code" id="code-50-img" class="code-div-img"></span>
  <div id="code-50">
  &gt;&gt;&gt; from sklearn.linear_model import Perceptron<br>
  &gt;&gt;&gt; from sklearn.metrics import accuracy_score<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Build a perceptron model based on training data, then classify test data</em><br>
  &gt;&gt;&gt; ppn = Perceptron( max_iter=40, eta0=0.1, random_state=0 )<br>
  &gt;&gt;&gt; ppn.fit( X_train_std, y_train )<br>
  &gt;&gt;&gt; y_pred = ppn.predict( X_test_std )<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Print results of classification</em><br>
  &gt;&gt;&gt; print( 'Perceptron Model:' )<br>
  &gt;&gt;&gt; print( 'Misclassified samples: %d' % ( y_test != y_pred ).sum() )<br>
  &gt;&gt;&gt; print( 'Accuracy on training data: {:.2f} (out of 1)'.format( ppn.score( X_train_std, y_train ) ) )<br>
  &gt;&gt;&gt; print( 'Accuracy on test data: {:.2f} (out of 1)'.format( ppn.score( X_test_std, y_test ) ) )<br>


  <br>
  Perceptron Model:<br>
  Misclassified samples: 5<br>
  Accuracy on training data: 0.90 (out of 1)<br>
  Accuracy on test data: 0.89 (out of 1)<br>
  </div>
</div>

<p>As you can see, the code to build a prediction model is simple once
the proper datasets have been defined and prepared. We build a
<code>Perceptron</code> prediction model, fit it to the training data,
and predict target classes with the <code>predict</code> function.
The Perceptron model constructor supports numerous options, including:

<ul>

<li><code><b>max_iter</b></code>, the maximum number of passes
(epochs) over the training data to attempt to achieve convergence,
default=5;</li>

<li><code><b>eta0</b></code>, a constant by which updates are
multiplied, default=1; and</li>

<li><code><b>random_state</b></code>, the seed for the random number
generator to use when shuffling data, a different seed will produce a
different sequence of random numbers.

</ul>

<p>Next, we use <code>ppn</code>'s <code>score</code> function to
report overall classification accuracy on both the training target
dataset <code>y_train</code> and the test target
dataset <code>y_test</code> (90% and 89% respectively in our
example).</p>

<p>If we instead wanted to use an <code>SVC</code> classifier, only
minor modifications would be needed to the perceptron code.</p>

<div class="code-div">
  <span title="copy code" id="code-51-img" class="code-div-img"></span>
  <div id="code-51">
  &gt;&gt;&gt; from sklearn.svm import SVC<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Build an SVC model based on training data, then classify test data</em><br>
  &gt;&gt;&gt; svc = SVC( kernel='rbf', gamma=0.1, C=1.0, random_state=0 )<br>
  &gt;&gt;&gt; svc.fit( X_train_std, y_train )<br>
  &gt;&gt;&gt; y_pred = svc.predict( X_test_std )<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Print results of classification</em><br>
  &gt;&gt;&gt; print( 'SVC Model:' )<br>
  &gt;&gt;&gt; print( 'Misclassified samples: %d' % ( y_test != y_pred ).sum() )<br>
  &gt;&gt;&gt; print( 'Accuracy on training data: {:.2f} (out of 1)'.format( svc.score( X_train_std, y_train ) ) )<br>
  &gt;&gt;&gt; print( 'Accuracy on test data: {:.2f} (out of 1)'.format( svc.score( X_test_std, y_test ) ) )<br>

  <br>
  SVC Model:<br>
  Misclassified Samples: 1<br>
  Accuracy on training data: 0.95 (out of 1)<br>
  Accuracy on test data: 0.98 (out of 1)<br>
  </div>
</div>

<p>As you can see, building and evaluating the model is nearly
identical to the perceptron example. Next, let's look at <em>k</em>
nearest neighbours.</p>

<div class="code-div">
  <span title="copy code" id="code-52-img" class="code-div-img"></span>
  <div id="code-52">
  &gt;&gt;&gt; from sklearn.neighbors import KNeighborsClassifier<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Build a KNN model based on training data, then classify test data</em><br>
  &gt;&gt;&gt; knn = KNeighborsClassifier( n_neighbors=5, p=2, metric='minkowski' )<br>
  &gt;&gt;&gt; knn.fit( X_train_std, y_train )<br>
  &gt;&gt;&gt; y_pred = knn.predict( X_test_std )<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Print results of classification</em><br>
  &gt;&gt;&gt; print( 'KNN Model:' )<br>
  &gt;&gt;&gt; print( 'Misclassified samples: %d' % ( y_test != y_pred ).sum() )<br>
  &gt;&gt;&gt; print( 'Accuracy on training data: {:.2f} (out of 1)'.format( knn.score( X_train_std, y_train ) ) )<br>
  &gt;&gt;&gt; print( 'Accuracy on test data: {:.2f} (out of 1)'.format( knn.score( X_test_std, y_test ) ) )<br>

  <br>
  KNN Model:<br>
  Misclassified samples: 0<br>
  Accuracy on training data: 0.96 (out of 1)<br>
  Accuracy on test data: 1.00 (out of 1)<br>
  </div>
</div>

<p>Finally, here is code to run a random forest classifier on the iris
data.</p>

<div class="code-div">
  <span title="copy code" id="code-53-img" class="code-div-img"></span>
  <div id="code-53">
  &gt;&gt;&gt; from sklearn.ensemble import RandomForestClassifier<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Build a random forest model based on training data, then classify test data</em><br>
  &gt;&gt;&gt; rf = RandomForestClassifier( n_estimators=100, oob_score=True )<br>
  &gt;&gt;&gt; rf.fit( X_train_std, y_train )<br>
  &gt;&gt;&gt; y_pred = rf.predict( X_test_std )<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Print results of classification</em><br>
  &gt;&gt;&gt; print( 'Random Forest Model:' )<br>
  &gt;&gt;&gt; print( 'Misclassified samples: %d' % ( y_test != y_pred ).sum() )<br>
  &gt;&gt;&gt; print( 'Accuracy on training data: {:.2f} (out of 1)'.format( rf.score( X_train_std, y_train ) ) )<br>
  &gt;&gt;&gt; print( 'Accuracy on test data: {:.2f} (out of 1)'.format( rf.score( X_test_std, y_test ) ) )<br>
  &gt;&gt;&gt; print( 'Out-of-bag accuracy: {:.2f} (out of 1)'.format( rf.oob_score_ )  )<br>

  <br>
  Random Forest Model:<br>
  Misclassified samples: 1<br>
  Accuracy on training data: 0.99 (out of 1)<br>
  Accuracy on test data: 0.96 (out of 1)<br>
  Out-of-bag accuracy: 0.95 (out of 1)<br>
  </div>
</div>

<p>As we discussed above, each approach subdivides 2D space (in our
case, since we have two predictor variables) into regions representing
the three different iris types. Below are images, along with the
dataset samples, showing the class regions for each of the four
example algorithms. Samples outlined in black represent the test
data <code>y</code>, while the remaining samples represent the
training data <code>X</code>.</p>


<div style="width: 85%; margin-left: 7.5%;">
<!--
  <table style="margin-left: auto; margin-right: auto; margin-top: 0px; margin-bottom: 0px;">
-->
  <table style="margin: 2em auto 0px auto;">

  <tr>
  <td style="padding: 0px 8px 0px 0px;">
    <img alt="perceptron prediction regions of petal length versus petal width" style="width: 90%; margin-top: 1em;" src="fig/ppn.png">
  </td>
  <td style="padding: 0px 8px 0px 0px;">
    <img alt="SVC prediction regions of petal length versus petal width" style="width: 90%; margin-top: 1em;" src="fig/svc.png">
  </td>
  </tr>

  <tr>
  <td style="padding: 0px 8px 0px 0px;">
    <img alt="KNN prediction regions of petal length versus petal width" style="width: 90%; margin-top: 1em;" src="fig/knn.png">
  </td>
  <td style="padding: 0px 8px 0px 0px;">
    <img alt="random forest prediction regions of petal length versus petal width" style="width: 90%; margin-top: 1em;" src="fig/forest.png">
  </td>
  </tr>

</table>
</div>


<h3>Clustering</h3>

<p>Clustering attempts to divide a set of samples into clusters based
on data properties or patterns identified within the samples.
Clustering is <em>unsupervised</em>; no pre-labeled data is required
to generate clusters.</p>

<p>During our examination of <code>sklearn</code>'s clustering
algorithms, we will continue to use the Iris dataset. 
<code>X</code> represents 150 samples defined by petal length and
width, and <code>y</code> represents the class (iris type) for each
corresponding sample. Since clustering is unsupervised, we will only
use <code>y</code> to calculate accuracies. It will not be needed
during the clustering process itself.</p>

<p>We will provide examples for three common clustering algorithms:
<em>k</em>-means, agglomerative, and DBSCAN. Similar to
classification, a common pattern is used by <code>sklearn</code>,
regardless of which clustering algorithm is applied. We will
study <em>k</em>-means, as well as some of its strengths and
limitations, in some depth.  Agglomerative clustering and DBSCAN will
be presented, but with a focus on their differences in implementation,
requirements, and the type of data they are designed to analyze.

If you prefer, you can <a href="notebook/cluster.ipynb"
target="_blank">download a Jupyter notebook with the clustering
code</a> from here.</p>

<p><b>Accuracy.</b> One issue to consider is how to measure
accuracy. The idea of determining how well an algorithm splits the
Iris dataset into three groups corresponds to how well cluster IDs are
attached to elements in the target <code>y</code>. In a perfect
scenario, elements with target
value <code>y<sub>i</sub></code> would have identical cluster
IDs <code>c<sub>j</sub></code> (remember, in general
<code>y<sub>i</sub> &ne; c<sub>j</sub></code>).  We can assume the
most frequent <code>c<sub>j</sub></code> is the cluster ID assigned
to elements in class <code>y<sub>i</sub></code>. Any other cluster IDs
can be considered errors.</p>

<p>The following <code>misclassify</code> function takes target
classes <code>tg</code> and corresponding cluster
IDs <code>pred</code>, returning a total misclassification count and a
list of misclassifications per target class as a list. Although we
will not explain the function in detail, its comments should help
interested readers understand how we are attempting to determine
overall cluster accuracy.</p>

<div class="code-div">
  <span title="copy code" id="code-54-img" class="code-div-img"></span>
  <div id="code-54">
      &gt;&gt;&gt; from collections import Counter<br>
      &gt;&gt;&gt;<br>
      &gt;&gt;&gt; def misclassify( tg, pred ):<br>
      &gt;&gt;&gt; <em>#  Try to determine number of misclassified elements during clustering</em><br>
      &gt;&gt;&gt; <em>#</em><br>
      &gt;&gt;&gt; <em>#  tg:    Target class</em><br>
      &gt;&gt;&gt; <em>#  pred:  Predicted cluster ID</em><br>
      &gt;&gt;&gt;<br>
      ... <span class="tab-1"><em>#  Get number of classes, clusters, create a &quot;misclassified&quot; label</em><br>
      ... <span class="tab-1">tg_n = len( set( tg ) )</span><br>
      ... <span class="tab-1">pr_n = len( set( pred ) )</span><br>
      ... <span class="tab-1">miss = pr_n + 1</span><br>
      ... <br>   
      ... <span class="tab-1"><em>#  Initialize errors per class, set of cluster IDs seen</em></span><br>
      ... <span class="tab-1">err = [ 0 ] * tg_n</span><br>
      ... <span class="tab-1">clust_ID = []</span><br>
      ... <br>   
      ... <span class="tab-1"><em>#  For each target class, compute cluster ID errors</em></span><br>
      ... <span class="tab-1">for i in range( 0, tg_n ):</span><br>
      ... <span class="tab-2"><em>#  Grab subset of targets, predictions for current class</em></span><br>
      ... <span class="tab-2">beg = i * 50</span><br>
      ... <span class="tab-2">tg_sub = tg[ beg: beg + 50 ]</span><br>
      ... <span class="tab-2">pr_sub = pred[ beg: beg + 50 ]</span><br>
      ... <br>        
      ... <span class="tab-2"><em>#  &quot;Mark as error&quot; any cluster ID already assigned to a class</em></span><br>
      ... <span class="tab-2">for j,val in enumerate( pr_sub ):</span><br>
      ... <span class="tab-3">if val in clust_ID: pr_sub[ j ] = miss</span><br>
      ... <br>                
      ... <span class="tab-2"><em>#  Build match vector as target class ID minus cluster ID</em></span><br>
      ... <span class="tab-2"><em>#  Copy over errors from cluster ID vector</em></span><br>
      ... <span class="tab-2">match = tg_sub - pr_sub</span><br>
      ... <span class="tab-2">for j,val in enumerate( pr_sub ):</span><br>
      ... <span class="tab-3">match[ j ] = miss if val == miss else match[ j ]</span><br>
      ... <br>            
      ... <span class="tab-2"><em>#  Build dict of IDs, descending by frequency</em></span><br>
      ... <span class="tab-2">count = Counter( match )</span><br>
      ... <span class="tab-2">freq = count.most_common()</span><br>
      ... <br>        
      ... <span class="tab-2"><em>#  Find most frequent ID that is not &quot;miss&quot; error</em></span><br>
      ... <span class="tab-2">max_freq = miss</span><br>
      ... <span class="tab-2">for val in freq:</span><br>
      ... <span class="tab-3">if val[ 0 ] != miss:</span><br>
      ... <span class="tab-4">max_freq = val[ 0 ]</span><br>
      ... <span class="tab-4">err[ i ] = 50 - val[ 1 ]</span><br>
      ... <span class="tab-4">break</span><br>
      ... <br>                
      ... <span class="tab-2"><em>#  If all entries &quot;miss&quot; error, all entries are incorrect</em></span><br>
      ... <span class="tab-2">if max_freq == miss:</span><br>
      ... <span class="tab-3">err[ i ] = 50</span><br>
      ... <br>
      ... <span class="tab-3"><em>#  Copy miss to entire subrange of original prediction list</em></span><br>
      ... <span class="tab-3">for j in range( 0, len( pr_sub ) ):</span><br>
      ... <span class="tab-4">pred[ j + beg ] = miss</span><br>
      ... <span class="tab-3">continue</span><br>
      ... <br>            
      ... <span class="tab-2">max_ID = miss</span><br>
      ... <span class="tab-2">for j,val in enumerate( match ):</span><br>
      ... <span class="tab-3">if val != max_freq: pred[ j + beg ] = miss</span><br>
      ... <span class="tab-3">if val == max_freq: max_ID = j</span><br>
      ... <br>            
      ... <span class="tab-2"><em>#  Add cluster ID to list of cluster IDs seen so far</em></span><br>
      ... <span class="tab-2">clust_ID = clust_ID + [ pr_sub[ max_ID ] ]</span><br>
      ... <br>        
      ... <span class="tab-1"><em>#  Return total errors, error per class</em></span><br>
      ... <span class="tab-1">return sum(err), err</span><br>
  </div>
</div>


<p><em>k</em>-means clustering divides a dataset into <em>k</em>
clusters. Theoretically, the goal of <em>k</em>-means is to partition
a set of <em>n</em> samples <code>X = (<em>x</em><sub>1</sub><em>,
x</em><sub>2</sub></em>, ..., <em>x<sub>n</sub></em>)</code>
into <em>k</em> subsets
<code>S = {<em>s</em><sub>1</sub><em>, s</em><sub>2</sub>, ...,
<em>s<sub>k</sub></em>}</code> such that within-cluster sum of squares
(WCSS or variance) is minimized,</p>

<div style="font-size: 90%;">
\[
\text{arg$\,$min}_S \sum_{i=1}^{k} \sum_{x \in S_i} ||x-\mu_i||^2 = \text{arg$\,$min}_S \sum_{i=1}^{k} |S_i|\,\text{Var}\,S_i
\]
</div>

<p>where <em>&mu;<sub>i</sub></em> is the mean of the samples
in <em>S<sub>i</sub></em>.

<p>The basic approach for performing <em>k</em>-means (often known
as <a href="https://en.wikipedia.org/wiki/Lloyd%27s_algorithm"
target="_blank">Lloyd's algorithm</a>) uses the following set of
steps:</p>

<ol>

<li> Randomly choose <em>k</em> cluster <em>centroids</em> within the
bounding region of the dataset.</li>

<li> Assign each sample to the closest centroid, producing <em>k</em>
clusters.

<li> Compute the centroids for the clusters, producing a new set
of <em>k</em> centroids.

<li> Re-assign samples as needed based on the new centroid positions.

<li> Continue iterating in this manner until reasonable convergence
is achieved, or until a fixed number of iterations have been performed.

</ol>

<p>The obvious problem with <em>k</em>-means is how to
choose <em>k</em>, the "correct" number of clusters to generate. In
our example, we know there are three classes of irises, so we will ask
for <em>k=3</em> clusters. If the proper number of clusters is
unknown,
the <a href="https://en.wikipedia.org/wiki/Elbow_method_(clustering)"
target="_blank">elbow method</a> is often used: start at <em>k=2</em>,
compute the sum of squared errors (SSE) between each point and its
centroid, move to <em>k=3</em>, and continue until we find a minimum
SSE. The <em>k</em> that produces this is selected at the "optimal"
number of clusters. Notice that this choice is based completely on
mathematical considerations, and may not necessarily match the
semantics of the data being clustered, particularly since neither WCSS
nor SSE consider data context.</p>

<div class="code-div">
  <span title="copy code" id="code-55-img" class="code-div-img"></span>
  <div id="code-55">
  &gt;&gt;&gt; from sklearn.cluster import KMeans<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Partition data into three clusters</em><br>
  &gt;&gt;&gt; km = KMeans( n_clusters = 3, random_state = 101 )<br>
  &gt;&gt;&gt; km.fit( X )<br>
  &gt;&gt;&gt; y_pred = km.predict( X )<br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; n = len( y_pred )<br>
  &gt;&gt;&gt; err = misclassify( y, y_pred )<br>
  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Print accuracy results</em><br>
  &gt;&gt;&gt; print( 'k-Means Clustering:' )<br>
  &gt;&gt;&gt; print( 'Misassigned samples:', err[ 0 ] )<br>
  &gt;&gt;&gt; print( 'Accuracy: {:.2f} (out of 1)'.format( ( n - err[ 0 ] ) / n ) )<br>

  <br>
  k-Means Clustering:<br>
  Misassigned samples: 6<br>
  Accuracy: 0.96 (out of 1)<br>
  </div>
</div>

<div>
  <img alt="k-means clustering of peath length versus petal width" src="fig/k-mean.png" style="display: block; margin: auto;">
</div>

<p>Remember that, because the initial centroids are randomly chosen,
<em>k</em>-means results are stochastic (not stable). Rerunning the
algorithm with a different <code>random_state</code> seed value can
produce different results, misassigned sample counts, and
accuracies.</p>

<p>Another common clustering approach is agglomerative clustering,
which builds a hierarchical, bottom-up collection of clusters. Here,
we repeatedly take the two most similar elements and combine them into
a cluster until <code>X</code> forms a single cluster. What we mean by
"most similar" is critical to how the clusters will form, and is based
on a <em>linkage</em> strategy and a distance metric (<em>e.g.</em>,
Euclidean, Manhattan, Hamming, cosine, and so on). In all cases, we
assume a single element forms a 1-element cluster. Linkage strategies
include:

<ul>

<li><a href="https://en.wikipedia.org/wiki/Single-linkage_clustering"
target="_blank"><b>Single-linkage</b></a>. Combine the closest pair of
clusters <em>A</em> and <em>B</em>, where
dist(&thinsp;<em>A,&thinsp;B&thinsp;</em>) is defined either by the
distance between the centroids of <em>A</em> and <em>B</em>, or by the
distance between the two closest elements in <em>A</em>
and <em>B</em>.</li>

<li><a href="https://en.wikipedia.org/wiki/Complete-linkage_clustering"
target="_blank"><b>Complete-linkage</b></a>. For all cluster pairs
(&thinsp;<em>A,&thinsp;B</em>&thinsp;), calculate

dist(&thinsp;<em>A, B</em>&thinsp;)&thinsp;=&thinsp;max[&thinsp;dist(&thinsp;<em>e<sub>A</sub>,&thinsp;e<sub>B</sub></em>&thinsp;)&thinsp;]&thinsp;&forall;&thinsp;<em>e<sub>A</sub></em>&thinsp;&in;&thinsp;<em>A</em>,&thinsp;<em>e<sub>B</sub></em>&thinsp;&in;&thinsp;<em>B</em>

(the two elements from <em>A</em> and <em>B</em> farthest apart from
one another). Combine the two clusters with the smallest
dist(&thinsp;<em>A,B</em>&thinsp;).</li>

<li><a href="https://en.wikipedia.org/wiki/UPGMA"
target="_blank"><b>Average-linkage</b></a>. For all cluster pairs
(&thinsp;<em>A,&thinsp;B</em>&thinsp;), calculate

dist(&thinsp;<em>A,&thinsp;B</em>&thinsp;)&thinsp;=&thinsp;avg[&thinsp;dist(&thinsp;<em>e<sub>A</sub>,&thinsp;e<sub>B</sub></em>&thinsp;)&thinsp;]&thinsp;&forall;&thinsp;<em>e<sub>A</sub></em>&thinsp;&in;&thinsp;<em>A</em>,&thinsp;<em>e<sub>B</sub></em>&thinsp;&in;&thinsp;<em>B</em>

(the average distance between all
(&thinsp;<em>e<sub>A</sub>&thinsp;,e<sub>B</sub></em>&thinsp;)
pairs). Combine the two clusters with the smallest
dist(&thinsp;<em>A,&thinsp;B</em>&thinsp;).</li>

<li><a href="https://en.wikipedia.org/wiki/Ward%27s_method"
target="_blank"><b>Ward</b></a>. Combine the two clusters that
minimize the increase in total within-cluster variance after merging,
where variance is defined as the squared distance from an element to
its cluster centroid.</li>

</ul>

<p><code>sklearn</code>
supports <code>ward</code>, <code>complete</code>,
and <code>average</code> when the agglomerative clustering object is
created, with a default of Ward.</p>

<div class="code-div">
  <span title="copy code" id="code-56-img" class="code-div-img"></span>
  <div id="code-56">
  &gt;&gt;&gt; from sklearn.cluster import AgglomerativeClustering<br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; agg = AgglomerativeClustering( n_clusters=3, linkage='average' )<br>
  </div>
</div>

<p>The sequence of combinations performed produces
a <em>dendrogram</em>, a tree with the root at the top (a single
cluster containing <code>X</code>), and each split generating two
children as we walk down the dendrogram. To choose <em>k</em>
clusters, we simply pick the <em>k</em> clusters that are closest to
the root cluster.</p>

<p>Agglomerative clustering is implemented in a nearly identical
manner to <em>k</em>-means. The one difference is that you can fit a
model, or fit and return
predictions. The <code>AgglomerativeClustering</code> module does not
provide a separate <code>predict</code> function.

<div class="code-div">
  <span title="copy code" id="code-57-img" class="code-div-img"></span>
  <div id="code-57">
  &gt;&gt;&gt; from sklearn.cluster import AgglomerativeClustering<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Partition data into three clusters</em><br>
  &gt;&gt;&gt; agg = AgglomerativeClustering( n_clusters = 3 )<br>
  &gt;&gt;&gt; y_pred = agg.fit_predict( X )<br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; n = len( y_pred )<br>
  &gt;&gt;&gt; err = misclassify( y, y_pred )<br>
  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Print accuracy results</em><br>
  &gt;&gt;&gt; print( 'Agglomerative Clustering:' )<br>
  &gt;&gt;&gt; print( 'Misassigned samples:', err[ 0 ] )<br>
  &gt;&gt;&gt; print( 'Accuracy: {:.2f} (out of 1)'.format( ( n - err[ 0 ] ) / n ) )<br>

  <br>
  Agglomerative Clustering:<br>
  Misassigned samples: 6<br>
  Accuracy: 0.96 (out of 1)<br>
  </div>
</div>

<div>
  <img alt="agglomerative clustering of peath length versus petal width" src="fig/agglomerative.png" style="display: block; margin: auto;">
</div>


<p>Our final example uses DBSCAN (Density-BaSed Clustering of
Applications with Noise). DBSCAN is a spatial algorithm that clusters
points that are "closely packed" to one another. Specifically, basic
DBSCAN uses the following definitions to build its clusters.

<ul>

<li>A cluster must contain at least <em>min</em> points.

<li>Points <em>p</em> and <em>q</em> are neighbours if they lie within
distance &epsilon; of one another.

<li>Point <em>p</em> is core if at least <em>min</em> points are
within &epsilon; of <em>p</em>. Those points are <em>directly
reachable</em> from <em>p</em>.

<li>Point <em>q</em> is directly reachable from <em>p</em>
if <em>q</em> is within &epsilon; of <em>p</em> and <em>p</em> is
core.

<li>Point <em>q</em> is reachable from <em>p</em> if there exists a
path <em>p<sub>1</sub></em>, ..., <em>p<sub>n</sub></em>
with <em>p<sub>1</sub>&thinsp;=&thinsp;p</em>,
<em>p<sub>n</sub>&thinsp;=&thinsp;q</em>, and
all <em>p<sub>i</sub></em> are core with the possible exception
of <em>p<sub>n</sub>&thinsp;=&thinsp;q</em>.

<li>Any point not reachable from any other point is an outlier.

</ul>

<p>Given these definitions, core point <em>p</em> forms a cluster with
all points (core or non-core) that can reach <em>p</em>. Every cluster
contains at least one core point. Non-core points form the cluster's
edge, since they cannot be used to reach additional points.</p>

<p>Implementation of <code>DBSCAN</code> is identical to
<code>AgglomerativeClustering</code>, except we do not specify a
number of clusters. This is determined automatically by DBSCAN's
&epsilon; and <em>min</em> values (<code>eps</code>
and <code>min_samples</code> arguments during the creation of a DBSCAN
object, with defaults of 0.5 and 5, respectively.)</p>

<div class="code-div">
  <span title="copy code" id="code-58-img" class="code-div-img"></span>
  <div id="code-58">
  &gt;&gt;&gt; from sklearn.cluster import DBSCAN<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Partition data into three clusters</em><br>
  &gt;&gt;&gt; db = DBSCAN()<br>
  &gt;&gt;&gt; y_pred = db.fit_predict( X )<br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; n = len( y_pred )<br>
  &gt;&gt;&gt; err = misclassify( y, y_pred )<br>
  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Print accuracy results</em><br>
  &gt;&gt;&gt; print( 'DBSCAN Clustering:' )<br>
  &gt;&gt;&gt; print( 'Misassigned samples:', err[ 0 ] )<br>
  &gt;&gt;&gt; print( 'Accuracy: {:.2f} (out of 1)'.format( ( n - err[ 0 ] ) / n ) )<br>

  <br>
  Agglomerative Clustering:<br>
  Misassigned samples: 50<br>
  Accuracy: 0.67 (out of 1)<br>
  </div>
</div>

<div>
  <img alt="DBSCAN clustering of petal length versus petal width" src="fig/dbscan.png" style="display: block; margin: auto;">
</div>


<p>Notice that DBSCAN produces a much larger misassignment error than
either <em>k</em>-means or agglomerative clustering. Examining the
cluster plot makes the issue clear: DBSCAN merged iris classes 2 and 3
together, producing one class that was perfectly clustered, and one
that was entirely misassigned. This points to a common issue with
DBSCAN in particular, and spatial clustering algorithms in general:
when semantically different groups of elements overlap, they are often
merged, since DBSCAN has no notion of <em>what</em> each element
represents, only distances, cluster sizes, and how they compare to
&epsilon; and <em>min</em>.</p>


<h3>Imputation</h3>

<p>Imputation of values in a dataset is another function provided
by <code>sklearn</code>. It is common to receive raw data files with
missing values, errors, or other types of incorrect values.
Imputation allows you to replace these values through techniques like
estimation, replacement with constants, or replacement with
statistically derived results on the values that are available.

If you prefer, you can <a href="notebook/impute.ipynb"
target="_blank">download a Jupyter notebook with the imputation
code</a> from here.</p>

<p><code>sklearn</code> provides an <code>Imputer</code> that, in its
default form, implements three basic strategies for imputing missing
values: (1) use the column's mean; (2) use the column's median; or (3)
use the column's most frequent value. The <code>axis</code> argument
can modify this: <code>axis=0</code> for columns, <code>axis=1</code>
for rows (default is <code>axis=0</code>.) These approaches are
reasonable, although not particularly sophisticated.</p>

<div class="code-div">
  <span title="copy code" id="code-59-img" class="code-div-img"></span>
  <div id="code-59">
  &gt;&gt;&gt; import numpy as np<br>
  &gt;&gt;&gt; from sklearn.preprocessing import Imputer<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; X = [[np.nan,2,3,1,5,2], [6,np.nan,1,8,2,1], [7,6,np.nan,np.nan,7,np.nan]]<br>
  &gt;&gt;&gt; print( 'X: ', X )<br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; imp = Imputer( missing_values='NaN', strategy='mean', axis=1 )<br>
  &gt;&gt;&gt; imp.fit( X )<br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; print( 'Impute rows w/mean:' )<br>
  &gt;&gt;&gt; print( imp.transform( X ) )<br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; imp = Imputer( missing_values='NaN', strategy='most_frequent', axis=0 )<br>
  &gt;&gt;&gt; imp.fit( X )<br>
  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; print( 'Impute columns w/most frequent:' )<br>
  &gt;&gt;&gt; print( imp.transform( X ) )<br>

  <br>
  X:  [[nan, 2, 3, 1, 5, 2], [6, nan, 1, 8, 2, 1], [7, 6, nan, nan, 7, nan]]<br>
  Impute columns w/mean:<br>
  [[2.6        2.         3.         1.         5.         2.        ]<br>
  &nbsp;[6.         3.6        1.         8.         2.         1.        ]<br>
  &nbsp;[7.         6.         6.66666667 6.66666667 7.         6.66666667]]<br>
  Impute rows w/most frequent<br>
  [[6. 2. 3. 1. 5. 2.]<br>
  &nbsp;[6. 2. 1. 8. 2. 1.]<br>
  &nbsp;[7. 6. 1. 1. 7. 1.]]<br>
  </div>
</div>


<p>Rather than identifying missing values, you may want to apply a
custom transformer to "derive" new values based on existing values
in your dataset. <code>sklearn</code> allows this through its
<code>FunctionTransformer</code> object. To use it, we build a
<code>FunctionTransformer</code> with a specific function attached to
it. We can then use that function to transform all values in a
numpy <code>Array</code>, just like any built-in
<code>sklearn</code> transformer.</p>

<div class="code-div">
  <span title="copy code" id="code-60-img" class="code-div-img"></span>
  <div id="code-60">
  &gt;&gt;&gt; X = [[0,1,2],[3,4,5],[6,7,8]]<br>
  &gt;&gt;&gt; print( 'X:', X )<br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; trans = FunctionTransformer( np.log1p )<br>
  &gt;&gt;&gt; print( 'Transform using 1+log(p):' )<br>
  &gt;&gt;&gt; print( trans.transform( X ) )<br>

  <br>
  X: [[0, 1, 2], [3, 4, 5], [6, 7, 8]]<br>
  Transform using 1+log(p):<br>
  [[0.         0.69314718 1.09861229]<br>
  &nbsp;[1.38629436 1.60943791 1.79175947]<br>
  &nbsp;[1.94591015 2.07944154 2.19722458]]<br>
  </div>
</div>

<p><code>pandas</code> also provides a number of functions
specifically designed to handle NaN and perform different types of
correction or imputation. For example, <code>pandas</code>'s
<code>isnull</code> function returns <code>True</code> for NaN
entries, and <code>False</code> otherwise. We can take advantage of
the face that <code>True</code> evaluates to 1 and <code>False</code>
evaluates to 0 to count the number of NaNs in a data frame. The
following examples will use a <a href="./construction-census.csv">U.S.
Census construction CSV file</a> to demonstrate <code>pandas</code>'s
capabilities. We will work with the <code>EMP</code> column, which is
a Census definition for number of employees.</p>

<div class="code-div">
  <span title="copy code" id="code-61-img" class="code-div-img"></span>
  <div id="code-61">
  &gt;&gt;&gt; import pandas as pd<br>
  &gt;&gt;&gt; import os<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; os.chdir( 'C:/users/healey/Downloads' )<br>
  &gt;&gt;&gt; census_df = pd.read_csv( 'construction-census.csv', sep=',', skiprows=[ 1 ] )<br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; <em>#  Count NaN, True=1, False=0, so sum True/False isnull() value list</em><br>
  &gt;&gt;&gt; nan_n = census_df.isnull().values.sum()<br>
  &gt;&gt;&gt; print( nan_n, 'values out of', census_df.size, 'values total, {:.2f}%'.format( nan_n / census_df.size * 100 ) )<br>

  <br>
  25905 values out of 170100 values total, 15.23%<br>
  </div>
</div>

<p>One common use of <code>isnull</code> is to identify and remove
columns from a data frame that are entirely NaN. This is important,
because these types of columns can interfere with
normal <code>pandas</code> analytic operations.</p>

<p>Notice that in all the following examples, we make a copy of the
data frame with the <code>copy</code> command. This ensures that we
do not change any of the values in the original data frame. You
cannot copy a data frame with <code>df_cp = df</code>. If you do this,
<code>df_cp</code> will simply <em>reference</em> <code>df</code>.
Referencing means the variables <code>df</code> and <code>df_cp</code>
with both point to the same data frame, so any changes through either
will affect the original data. The <code>copy</code> function ensures
an entirely new data frame is created, containing values identical to
the original data frame.</p>

<div class="code-div">
  <span title="copy code" id="code-62-img" class="code-div-img"></span>
  <div id="code-62">
  &gt;&gt;&gt; <em>#  First, make a copy of the original data frame</em><br>
  &gt;&gt;&gt; df_cp = census_df.copy()<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Check first 15 columns, remove if entirely NaN</em><br>
  &gt;&gt;&gt; row_n = df_cp.shape[ 0 ]<br>
  &gt;&gt;&gt; col_nm = list( df_cp )[ :15 ]<br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; for nm in col_nm:<br>
  ... <span class="tab-1">nan_n = df_cp[ nm ].isnull().values.sum()</span><br>
  ... <span class="tab-1">if nan_n == row_n:</span><br>
  ... <span class="tab-2">print( nm, 'has only NaN values, removing...' )</span><br>
  ... <span class="tab-2">del df_cp[ nm ]</span><br>
  ... <span class="tab-1">elif nan_n &gt; 0:</span><br>
  ... <span class="tab-2">print( '{:s}, {:d} NaN values ({:.2f}%)'.format( nm, nan_n, ( nan_n / row_n * 100 ) ) )</span><br>
  ... <span class="tab-1">else:</span><br>
  ... <span class="tab-2">print( nm, 'has no NaN values' )</span><br>
  <br>
  GEO.id has no NaN values<br>
  GEO.id2 has no NaN values<br>
  GEO.display-label has no NaN values<br>
  GEO.annotation.id has only NaN values, removing...<br>
  NAICS.id has no NaN values<br>
  NAICS.display-label has no NaN values<br>
  NAICS.annotation.id has only NaN values, removing...<br>
  YEAR.id has no NaN values<br>
  ESTAB has no NaN values<br>
  ESTAB_S has no NaN values<br>
  EMP, 38 NaN values (2.41%)<br>
  EMP_S, 38 NaN values (2.41%)<br>
  PAYANN, 57 NaN values (3.62%)<br>
  PAYANN_S, 57 NaN values (3.62%)<br>
  BENEFIT, 61 NaN values (3.87%)<br>
  </div>
</div>

<p>It's not necessary that columns be entirely NaN to be removed. It
would be easy, for example, to remove any column whose percentage of
NaN was over some reasonable threshold, for example, 60%, with
<code>if nan_n &gt; 0.6 * row_n:</code>.</p>

<p>In terms of replacing NaNs, <code>pandas</code> can fill them with
a constant value, or it can <em>pad</em>, moving the most recent
non-NaN value forward, or <em>backfill</em>, moving the next non-NaN
value backwards.</p>

<div class="code-div">
  <span title="copy code" id="code-63-img" class="code-div-img"></span>
  <div id="code-63">
  &gt;&gt;&gt; <em>#  We can fill NaNs in a column with a constant value</em><br>
  &gt;&gt;&gt; df_cp = census_df.copy()<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; print( 'Original EMP column:' )<br>
  &gt;&gt;&gt; print( df_cp.iloc[ 217:223 ][ 'EMP' ] )<br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; print( 'Constant value imputation:' )<br>
  &gt;&gt;&gt; df_cp[ 'EMP' ] = df_cp[ 'EMP' ].fillna( 0 )<br>
  &gt;&gt;&gt; print( 'Column EMP now has', df_cp[ 'EMP' ].isnull().values.sum(), 'NaNs' )<br>
  &gt;&gt;&gt; print( df_cp.iloc[ 217:223 ][ 'EMP' ] )<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; <em>#  We can backfill (move next value back) or pad (more last value forward)</em><br>
  &gt;&gt;&gt; df_cp = census_df.copy()<br>
  &gt;&gt;&gt; print( 'Backfill value imputation:' )<br>
  &gt;&gt;&gt; df_cp[ 'EMP' ] = df_cp[ 'EMP' ].fillna( method='backfill' )<br>
  &gt;&gt;&gt; print( df_cp.iloc[ 217:223 ][ 'EMP' ] )<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; df_cp = census_df.copy()<br>
  &gt;&gt;&gt; print( 'Pad value imputation:' )<br>
  &gt;&gt;&gt; df_cp[ 'EMP' ] = df_cp[ 'EMP' ].fillna( method='pad' )<br>
  &gt;&gt;&gt; print( df_cp.iloc[ 217:223 ][ 'EMP' ] )<br>

  <br>
  Original EMP column:<br>
  217     659.0<br>
  218       NaN<br>
  219     431.0<br>
  220     944.0<br>
  221       NaN<br>
  222    1143.0<br>
  Name: EMP, dtype: float64<br>
  Constant value imputation:<br>
  Column EMP now has 0 NaNs<br>
  217     659.0<br>
  218       0.0<br>
  219     431.0<br>
  220     944.0<br>
  221       0.0<br>
  222    1143.0<br>
  Name: EMP, dtype: float64<br>
  Backfill value imputation:<br>
  217     659.0<br>
  218     431.0<br>
  219     431.0<br>
  220     944.0<br>
  221    1143.0<br>
  222    1143.0<br>
  Name: EMP, dtype: float64<br>
  Pad value imputation:<br>
  217     659.0<br>
  218     659.0<br>
  219     431.0<br>
  220     944.0<br>
  221     944.0<br>
  222    1143.0<br>
  Name: EMP, dtype: float64<br>
  </div>
</div>

<p>Finally, if we integrate into <code>scipy</code>, the scientific
Python toolkit <code>sklearn</code> extends, we can gain access to a
larger number of interpolation methods. For example, rather than
performing a linear interpolation of missing values, we can use a
cubic spline or a second or third-degree polynomial to produce a
"smooth" interpolation of both available and missing values.</p>

<div class="code-div">
  <span title="copy code" id="code-64-img" class="code-div-img"></span>
  <div id="code-64">
  &gt;&gt;&gt; from scipy.interpolate import interp1d<br>
  &gt;&gt;&gt; import matplotlib.pyplot as plt<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; <em>#  More recent versions of pandas support new methods of interpolation through scipy</em><br>
  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; <em>#  Original subset of EMP values with numerous NaNs</em><br>
  &gt;&gt;&gt; df_cp = census_df.copy()<br>
  &gt;&gt;&gt; nan_df = df_cp[ 'EMP' ].isnull()<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; fig = plt.figure()<br>
  &gt;&gt;&gt; fig.suptitle( 'Employee Count by Sample ID' )<br>
  &gt;&gt;&gt; plt.xlabel( 'Sample ID' )<br>
  &gt;&gt;&gt; plt.ylabel( 'Number of Employees' )<br>
  &gt;&gt;&gt; df_cp.iloc[ 219:247 ][ 'EMP' ].plot()<br>
  &gt;&gt;&gt; plt.show()<br>

  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; <em>#  Replace NaN with linear interpolation</em><br>
  &gt;&gt;&gt; df_cp = census_df.copy()<br>
  &gt;&gt;&gt; df_cp[ 'EMP' ] = df_cp[ 'EMP' ].interpolate( method='linear' )<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; fig = plt.figure()<br>
  &gt;&gt;&gt; fig.suptitle( 'Linear vs. Cubic Interpolation of Employee Count' )<br>
  &gt;&gt;&gt; plt.xlabel( 'Sample ID' )<br>
  &gt;&gt;&gt; plt.ylabel( 'Number of Employees' )<br>
  &gt;&gt;&gt; df_cp.iloc[ 219:247 ][ 'EMP' ].plot()<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; <em>#  Replace NaN with cubic interpolation</em><br>
  &gt;&gt;&gt; df_cp = census_df.copy()<br>
  &gt;&gt;&gt; df_cp[ 'EMP' ] = df_cp[ 'EMP' ].interpolate( method='cubic' )<br>
  &gt;&gt;&gt; x = df_cp.iloc[ 219:247 ][ 'EMP' ].index<br>
  &gt;&gt;&gt; y = df_cp.iloc[ 219:247 ][ 'EMP' ]<br>
  &gt;&gt;&gt; f = interp1d( x, y, kind='cubic' )<br>

  &gt;&gt;&gt; <br>
  &gt;&gt;&gt; x = np.linspace( 219, 246, num=50, endpoint=True )<br>
  &gt;&gt;&gt; plt.plot( x, f( x ), '--' )<br>
  &gt;&gt;&gt; plt.legend( [ 'linear', 'cubic' ] )<br>
  &gt;&gt;&gt; plt.show()<br>
  </div>
</div>

<div style="width: 85%; margin-left: 7.5%;">
<!--
  <table style="margin-left: auto; margin-right: auto; margin-top: 0px; margin-bottom: 0px;">
-->
<table style="margin: 2em auto 0px auto;">

  <tr>
  <td style="padding: 0px 8px 0px 0px;">
    <img alt="line plot of sample ID by number of employees" style="width: 90%; margin-top: 1em;" src="fig/orig-EMP.png">
  </td>
  <td style="padding: 0px 8px 0px 0px;">
    <img alt="line plot of sample ID by number of employees with missing values inputed using linear and cubic spline interploation" style="width: 90%; margin-top: 1em;" src="fig/lin-cubic-EMP.png">
  </td>
  </tr>

</table>
</div>


<p><a href="https://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html"
target="_blank"><code>interp1d</code></a> supports numerous additional
interpolation methods
like <code>polynomials</code>, <code>splines</code>,
and <code>nearest</code>, <code>previous</code>,
and <code>next</code>, which produce stair-step interpolation plots. It
is also possible to interpolate multivariate data superimposed on a
uniform grid using
<code>scipy</code>'s <code>griddata</code> function.</p>

<h2 id="web">Web Parsing</h2>

<p>The ability read and parse web page content is often very useful,
since data is commonly available on a web page, but in a format that's
not convenient to simply copy and paste.</p>

<p>Two Python libraries are used to simplify <em>web scraping:</em>
<a target="_blank"
href="https://docs.python.org/2/library/urllib.html">urllib</a> and
<a target="_blank"
href="https://www.crummy.com/software/BeautifulSoup/">BeautifulSoup
4</a>. urllib supports posting HTTP requests to a web server. In our
case, this is normally a request for HTML content of a target web
page. BeautifulSoup parses HTML into a <em>parse tree</em>, then
provides operations that allow you to find specific information within
the tree, for example, all the HTML links, or text attached to an HTML
ID in the document.</p>

<p>These are the steps you would follow to read and parse a web
page.</p>

<ul>

  <li>Read the web page's HTML with <code>urllib.request.urlopen()</code>
  and <code>urllib.request.read()</code>.

  <li>Parse the web page's HTML with <code>BeautifulSoup()</code> into
  a parse tree.

  <li>Use BeautifulSoup's <em>navigation</em> commands to search for
  information within the parse tree.

</ul>

<p>This code will read the HTML for this tutorial, then return all the
HTML links in the document.</p>

<div class="code-div">
  <span title="copy code" id="code-65-img" class="code-div-img"></span>
  <div id="code-65">
  &gt;&gt;&gt; import urllib<br>

  &gt;&gt;&gt; from bs4 import BeautifulSoup<br>

  &gt;&gt;&gt;<br>

  &gt;&gt;&gt; url = urllib.request.urlopen(
  'https://www.csc2.ncsu.edu/faculty/healey/msa-17/python/index.html' )<br>

  &gt;&gt;&gt; doc = url.read()<br>

  &gt;&gt;&gt; tree = BeautifulSoup( doc )<br>

  &gt;&gt;&gt; links = tree.find_all( 'a' )<br>

  &gt;&gt;&gt; for l in links:<br>

  ... <span class="tab-1">print( l.get( 'href' ) )</span><br>

  ...<br>

  https://www.csc2.ncsu.edu/faculty/healey<br>

  https://www.ncsu.edu<br>

  https://www.python.org<br>

  &hellip;<br>

  https://www.crummy.com/software/BeautifulSoup<br>
  </div>
</div>


<p>One you have a parse tree, most of your work will involve
navigating the tree to find the things you're looking
for. BeautifulSoup provides <a target="_blank"
href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#navigating-the-tree">numerous
operations to search within the tree</a>. This can be done by HTML
tag, by ID, by string value, and so on. This requires work on your
part, however.</p>

<ul>

  <li>You will need to look at the raw HTML to determine
  the <em>structure</em> of the web page, that is, which HTML elements
  contain the data you're looking for
  (<em>e.g.</em>, <code>&lt;li&gt;&gt;&gt;;</code> list item
  elements, <code>&lt;a href&gt;&gt;&gt;;</code> link reference elements,
  elements with a specific <code>&lt;id&gt;&gt;&gt;;</code>
  or <code>&lt;class&gt;&gt;&gt;;</code> value, and so on).

  <li>Next, you will write Python code that uses BeautifulSoup to
  locate the target elements in the parse tree and extract the strings
  or values attached to those elements.

  <li>Once you have the data isolated, you can process it, or write it
  to an output file using file or CSV write operations.

</ul>

<p>For example, suppose you parsed this HTML page using BeautifulSoup
into a variable called <code>tree</code>. You could search for
the <code>div</code> with a specific <code>id</code> and the value
within that <code>div</code> as follows.

<div class="code-div">
  <span title="copy code" id="code-66-img" class="code-div-img"></span>
  <div id="code-66">
  &gt;&gt;&gt; import urllib.request<br>
  &gt;&gt;&gt; from bs4 import BeautifulSoup<br>
  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; url = urllib.request.urlopen( 'https://www.csc2.ncsu.edu/faculty/healey/msa-17/python/index.html' )<br>
  &gt;&gt;&gt; doc = url.read()<br>
  &gt;&gt;&gt; tree = BeautifulSoup( doc, 'lxml' )<br>
  &gt;&gt;&gt;<br>
  &gt;&gt;&gt; div = tree.find( 'div', { 'class': 'footer' } )<br>
  &gt;&gt;&gt; print( div )<br>
  &lt;div class="footer"<br>
  &nbsp;Updated <span id="mod-date">01-Jan-01&lt;/span<br>
  &lt;/div<br>
  &gt;&gt;&gt; span = div.find( 'span', { 'id': 'mod-date' } )<br>
  &gt;&gt;&gt; print( span )<br>
  <span id="mod-date">01-Jan-01&deg;&lt;/span<br>
  &gt;&gt;&gt; span.getText()<br>
  '01-Jan-01'
  </div>
</div>

<p>Another common task is finding specific text within a web page.
For example, we might want to find all the paragraph (<code>&lt;p&gt;
... &lt;/p&gt;</code>) blocks that contain the string <code>Python</code>.
The obvious way to do this might be as follows.</p>

<div class="code-div">
  <span title="copy code" id="code-67-img" class="code-div-img"></span>
  <div id="code-67">
  &gt;&gt;&gt; tree.find_all( 'p', string='Python' )<br>
  []
  </div>
</div>

<p>Notice the result is an empty list, even though we know that the
string <code>Python</code> occurs multiple times within this
document. The problem is that the command above asks for a paragraph
block that contains EXACTLY the string <code>Python</code>, not a
paragraph block that contains at least one occurrence of the string
<code>Python</code>. To correct this, we pass the string as a
<i>regular expression</i>. There is insufficient space to delve into
the details of regular expressions (REs), but suffice it to say that
REs allow us to specify text with wildcards, options on parts of text
that occur in the string we're specifying, whether a string has to
start at the beginning or end of a line, the number of times a string
has to occur, and many other conditions. REs are extremely powerful,
and also fairly difficult to master. Moreover, although all programming
languages include support for REs, they often specify REs in slightly
different ways, making it difficult to port anything but the most simple
REs between languages.</p>

<p>Regardless of these issues, in our case it is very simple to
convert the from looking for a paragraph block with
exactly <code>Python</code> to a paragraph block
containing <code>Python</code> by simple asking the regular expression
module <code>re</code> to convert the explicit string into a RE that
represents ``an occurrence of this string.''</p>

<div class="code-div">
  <span title="copy code" id="code-68-img" class="code-div-img"></span>
  <div id="code-68">
  import re<br>
  <br>
  &gt;&gt;&gt; tree.find_all( 'p', string=re.compile( 'Python' ) )<br>
  [&lt;p&gt;Since Python is an interpreted language, individual lines of<br>
   code are converted to machine language and executed as they are<br>
     ...<br>
   it works as it should.&lt;/p&gt;, &lt;p&gt;If you want a quick summary of<br>
   the steps I use to try to install Python packages in the Anaconda<br>
   environment, they're listed in order below&lt;/p&gt;]<br>
  </div>
</div>

<p>Now, all paragraph blocks containing the term <code>Python</code>
are returned as elements of a list of results.</p>

<p>Understanding the structure of a web page can't be done for you.
It's something you'll need to complete as a first step for extracting
data from the web page. Perhaps more importantly, if a web page
doesn't have any useful structure, then it might be difficult (or
impossible) to isolate the data you're interested in. Usually,
however, web pages are built with a logical design. In these cases,
web scraping can save you significant time and effort over manually
copying or re-typing individual data values.</p>


<h2 id="practice">Practice Examples</h2>

<p>For practice, here are five Practical Python practice problems. A
short description of the problem is provided, with one possible
solution presented. I strongly recommend that you attempt your own
solution first, before looking at the one we provide.</p>

<h3>Cows and Bulls</h3>

<p>Create a program to play the game "cows and bulls." This is how
the game works.</p>

<ul>
<li>Randomly generate a 4-digit number in the range 0000 to 9999.
<li>Ask the user to guess the target number.
<li>For every digit the user guesses correctly, they receive a cow.
<li>For every digit the user guesses incorrectly, they receive a bull.
<li>Count how many guesses it takes for them to guess the target number.
</ul>

<p>For example, if the target was <code>7934</code> and the user
guessed <code>9974</code>, they would receive two cows (for the
digits <code>9</code> in the second position and <code>4</code>
in the fourth position) and two bulls.</p>

<p>A basic pseudocode outline for how you <i>might</i> want to structure
your program design could be something like this.</p>


<div id="pseudo-cow-bull-accordion" class="detail">
  <h3>Cows and Bulls Pseudocode</h3>
  <div style="background: none; background-color: #e7eefb;">
    <ol>

    <li>Initialize the number of cows, bulls, and guesses to proper
    starting values.

    <li>Generate a target value to guess.

    <li>While the number of cows isn't four, loop.

    <li>Get an input on the valid range of 0 through 9999.

    <li>Determine how many cows (correct digits) and bulls (incorrect
    digits) the input contains, and report it to the user.

    <li>Update the number of cows, bulls, and guesses prior to
    returning to the while loop's condition.
  
    <li>Once the user has correctly guessed the target (four cows),
    you will exit the while loop. At this point you could end the game
    or ask if the user wants to play again.

    </ol>
  </div>
</div>


<p>Here is one solution to the Cows and Bulls game. If you're
practising, you should program your own solution before looking at
ours.</p>
 

<div id="practice-cow-bull-accordion" class="detail">
  <h3>Cows and Bulls Solution</h3>
  <div style="background: none; background-color: #e7eefb;">

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-69-img" class="code-div-img"></span>
      <div id="code-69">
      ... import random<br>
      ... <br>
      ... def generate_tg():<br>
      ... <span class="tab-1">"""Generate a random four-digit string</span><br>
      ... <br>    
      ... <span class="tab-1">Generate a random digit between 0-9999, then covert it to a string</span><br>
      ... <span class="tab-1">with padded zeros 0000-9999, used for the cows and bulls guessing game.</span><br>
      ... <br>
      ... <span class="tab-1">Returns:</span><br>
      ... <span class="tab-2">str:  A four-character string in the range 0000-4000</span><br>
      ... <span class="tab-1">"""</span><br>
      ... <br>
      ... <span class="tab-1">v = random.randint( 0, 9999 )</span><br>
      ... <span class="tab-1">v_str = f'{v:04d}'</span><br>
      ... <br>
      ... <span class="tab-1">return v_str</span><br>
      ... <br>
      ... <br>
      ... def cmp_tg( inp, tg ):<br>
      ... <span class="tab-1">"""Compare target and input</span><br>
      ... <br>
      ... <span class="tab-1">Compare 4-digit target to 4-digit input, each matched digit is a cow, each</span><br>
      ... <span class="tab-1">mismatched digit is a bull, return number of cows and bulls</span><br>
      ... <br>
      ... <span class="tab-1">Args:</span><br>
      ... <span class="tab-2">inp (str):  4-digit input as a string 0000-9999</span><br>
      ... <span class="tab-2">tg (str):  4-digit target as a string 0000-9999</span><br>
      ... <br>
      ... <span class="tab-1">Returns:</span><br>
      ... <span class="tab-2">tuple (cow,bull):  Number of cows and bulls as a tuple</span><br>
      ... <span class="tab-1">"""</span><br>
      ... <br>
      ... <span class="tab-1">#  Ensure correct input and target format</span><br>
      ... <br>
      ... <span class="tab-1">inp_v = int( inp )</span><br>
      ... <span class="tab-1">if len( inp ) != 4 or inp_v &lt; 0 or inp_v &gt; 9999:</span><br>
      ... <span class="tab-2">print( 'cmp_tg(), incorrect input ' + inp + ', must be (0000-9999)' )</span><br>
      ... <span class="tab-2">return (0,4)</span><br>
      ... <br>
      ... <span class="tab-1">tg_v = int( tg )</span><br>
      ... <span class="tab-1">if len( tg ) != 4 or tg_v &lt; 0 or tg_v &gt; 9999:</span><br>
      ... <span class="tab-2">print( 'cmp_tg(), incorrect target ' + tg + ', must be (0000-9999)' )</span><br>
      ... <span class="tab-2">return (0,4)</span><br>
      ... <br>
      ... <span class="tab-1">#  Initialize number of cows and bulls</span><br>
      ... <br>
      ... <span class="tab-1">cow = 0</span><br>
      ... <span class="tab-1">bull = 0</span><br>
      ... <br>
      ... <span class="tab-1">#  Loop over four digits, matches increase cows, mismatches increase bulls</span><br>
      ... <br>
      ... <span class="tab-1">for i in range( 0, 4 ):</span><br>
      ... <span class="tab-2">if inp[ i ] == tg[ i ]:</span><br>
      ... <span class="tab-3">cow = cow + 1</span><br>
      ... <span class="tab-2">else:</span><br>
      ... <span class="tab-3">bull = bull + 1</span><br>
      ... <br>
      ... <span class="tab-1">return (cow,bull)</span><br>
      ... <br>
      ... #  Main game loop<br>
      ... <br>
      ... #  Initialize cows, bulls, and number of guesses made<br>
      ... <br>
      ... cow = 0<br>
      ... bull = 4<br>
      ... guess = 0<br>
      ... <br>
      ... #  Generate target to guess<br>
      ... <br>
      ... tg = generate_tg()<br>
      ... <br>
      ... #  Continue until four cows, all input digits match target<br>
      ... <br>
      ... while cow != 4:<br>
      ... <br>
      ... <span class="tab-1">#  Continue looping until valid input</span><br>
      ... <br>
      ... <span class="tab-1">inp = -1</span><br>
      ... <span class="tab-1">while inp &lt; 0 or inp &gt; 9999:</span><br>
      ... <span class="tab-2">inp = input( 'Enter a value between 0000 and 9999:  ' )</span><br>
      ... <span class="tab-2">try:</span><br>
      ... <span class="tab-3">inp = int( inp )</span><br>
      ... <span class="tab-2">except:</span><br>
      ... <span class="tab-3">inp = 0</span><br>
      ... <br>
      ... <span class="tab-2">#  Convert input to 4-digit string, get cows and bulls</span><br>
      ... <br>
      ... <span class="tab-2">inp_s = f'{inp:04d}'</span><br>
      ... <span class="tab-2">cow,bull = cmp_tg( inp_s, tg )</span><br>
      ... <br>
      ... <span class="tab-2">guess += 1</span><br>
      ... <span class="tab-2">print( f'{cow} cow(s), {bull} bull(s)' )</span><br>
      ... <br>
      ... print( f'It took you {guess} guess(es) to match the target' )</span><br>
      </div>
    </div>
  </div>
</div>

<h3>Birthday Plots</h3>

<p>Create a program to assign a random number of birthdays to each
month, based on a maximum number of birthdays defined by the
user.


<div id="pseudo-birthday-accordion" class="detail">
  <h3>Birthday Plot Pseudocode</h3>
  <div style="background: none; background-color: #e7eefb;">
    <ol>

    <li>Initialize the number of birthdays for each month to zero.

    <li>Ask the user for the maximum number of birthdays for a month.

    <li>Assign a random number between 0 and month-maximum for each
    month.

    <li>Plot the results using <code>pyplot</code>.

    </ol>
  </div>
</div>


<p>Plot the number of birthdays in a bar chart
using <code>pyplot</code>. You can Google search for simple
instructions on how to import and use <code>pyplot</code> to plot a
bar graph (<i>e.g.,</i> from <a target="_blank"
href="https://www.geeksforgeeks.org/bar-plot-in-matplotlib/#">somewhere
like here</a>).</p>


<div id="practice-birthday-accordion" class="detail">
  <h3>Birthday Plot Solution</h3>
  <div style="background: none; background-color: #e7eefb;">

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-70-img" class="code-div-img"></span>
      <div id="code-70">
      ... import random<br>
      ... import matplotlib.pyplot as plt<br>
      ... <br>
      ... def gen_birthday( bday_max):<br>
      ... <span class="tab-1">"""Generate birthdays for 12 months</span></span><br>
      ... <br>    
      ... <span class="tab-1">Generate random number of birthdays for each of the twelve months, up to a</span><br>
      ... <span class="tab-1">maximum number specified by the caller.</span><br>
      ... <br>
      ... <span class="tab-1">Args:</span><br>
      ... <span class="tab-2">bday_max (int):  An integer specifying the maximum number of birthdays for any month</span><br>
      ... <br>
      ... <span class="tab-1">Returns:</span><br>
      ... <span class="tab-2">int list:  A list of 12 non-negative integers, number of birthdays per month</span><br>
      ... <span class="tab-1">"""</span><br>
      ... <br>
      ... <span class="tab-1">#  Initialize birthdays to 0 for each month</span><br>
      ... <br>
      ... <span class="tab-1">bday_n = [ 0 ] * 12</span><br>
      ... <br>
      ... <span class="tab-1">#  Ensure maximum birthday is valid</span><br>
      ... <br>
      ... <span class="tab-1">if bday_max &lt; 0:</span><br>
      ... <span class="tab-2">print( 'gen_birthday(), maximum birthdays per month', bday_max, 'is invalid' )</span><br>
      ... <span class="tab-2">return bday_n</span><br>
      ... <br>
      ... <span class="tab-1">for i in range( 0, 12 ):</span><br>
      ... <span class="tab-2">bday_n[ i ] = random.randint( 0, bday_max )</span><br>
      ... <br>
      ... <span class="tab-1">return bday_n</span><br>
      ... <br>
      ... #  Mainline<br>
      ... <br>
      ... #  Define months<br>
      ... <br>
      ... month = [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ]<br>
      ... <br>
      ... #  Generate random birthdays per month<br>
      ... <br>
      ... birthday = gen_birthday( 30 )<br>
      ... <br>
      ... #  Use pyplot to plot birthday frequencies per month<br>
      ... fig = plt.figure( figsize=(8,6) )<br>
      ... bar = plt.bar( month, birthday, 0.75 )<br>
      ... <br>
      ... #  Put frequency count on top of each bar<br>
      ... <br>
      ... for i,rect in enumerate( bar ):<br>
      ... <span class="tab-1">ht = rect.get_height()</span><br>
      ... <span class="tab-1">plt.text( rect.get_x() + rect.get_width() / 2, ht, '%s' % ht, ha='center', va='bottom' )</span><br>
      ... <br>
      ... #  Annotate the visualization<br>
      ... <br>
      ... plt.ylabel( 'Birthday(s)' )<br>
      ... plt.grid( axis='y', linestyle='dotted' )<br>
      ... plt.xlabel( 'Month' )<br>
      ... plt.title( 'Birthday(s) per Month' )<br>
      ... plt.show()<br>
      </div>
    </div>
  </div>
</div>


<h3>Morse Code</h3>

<p><a href="https://morsecode.world/american/morse.html">Morse
code</a>, also known as American or Railroad Morse code, was developed
by Samuel F. B. Morse in the United States during the 1830s to
represent letters of the alphabet, numerals, and punctuation for
electric telegraphy using an arrangement of dots and dashes. The
original Morse code was further improved by Alfred Lewis Vail, Morse's
assistant and partner. Later use of Morse code in Europe identified
that it was insufficient to support non-English text like diacritical
marks.  This led to the development
of <a href="https://morsecode.world/international/morse2.html">International
Morse Code</a>, or Continental Morse Code as it is now known, in 1951.</p>

<p>The most famous Morse code sequence is probably the one for
<a href="https://en.wikipedia.org/wiki/SOS">SOS (Save Our Souls)</a>,
denoted dot-dot-dot, dash-dash-dash, dot-dot-dot. This is because
dot-dot-dot represents S, and dash-dash-dash represents O in Morse
code.</p>

<p>Create a program to decode a message into Morse code. Morse code
uses a sequence of dots and dashes to encode letters, numbers, and the
space character. The table below shows the conversion from American
Morse code to individual characters. A single space separates the
dot&ndash;dash pattern for each character. Three spaces represent a
space character. You can use period for dot and hyphen for dash in
your program.</p>

<div>
<table style="margin-left: auto; margin-right: auto;">

<tr>
  <th>Code</th>
  <th>Character</th>
  <th>Code</th>
  <th>Character</th>
  <th>Code</th>
  <th>Character</th>
  <th>Code</th>
  <th>Character</th>
</tr>

<tr class="even">
<td style="text-align: center;">&middot; &ndash;</td><td style="text-align: center;">A</td>
<td style="text-align: center;">&ndash; &middot; &middot; &middot;</td><td style="text-align: center;">B</td>
<td style="text-align: center;">&ndash; &middot; &ndash; &middot;</td><td style="text-align: center;">C</td>
<td style="text-align: center;">&ndash; &middot; &middot;</td><td style="text-align: center;">D</td>
</tr>

<tr class="odd">
<td style="text-align: center;">&middot;</td><td style="text-align: center;">E</td>
<td style="text-align: center;">&middot; &middot; &ndash; &middot;</td><td style="text-align: center;">F</td>
<td style="text-align: center;">&ndash; &ndash; &middot;</td><td style="text-align: center;">G</td>
<td style="text-align: center;">&middot; &middot; &middot; &middot;</td><td style="text-align: center;">H</td>
</tr>

<tr class="even">
<td style="text-align: center;">&middot; &middot;</td><td style="text-align: center;">I</td>
<td style="text-align: center;">&middot; &ndash; &ndash; &ndash;</td><td style="text-align: center;">J</td>
<td style="text-align: center;">&ndash; &middot; &ndash;</td><td style="text-align: center;">K</td>
<td style="text-align: center;">&middot; &ndash; &middot; &middot;</td><td style="text-align: center;">L</td>
</tr>

<tr class="odd">
<td style="text-align: center;">&ndash; &ndash;</td><td style="text-align: center;">M</td>
<td style="text-align: center;">&ndash; &middot;</td><td style="text-align: center;">N</td>
<td style="text-align: center;">&ndash; &ndash; &ndash;</td><td style="text-align: center;">O</td>
<td style="text-align: center;">&middot; &ndash; &ndash; &middot;</td><td style="text-align: center;">P</td>
</tr>

<tr class="even">
<td style="text-align: center;">&ndash; &ndash; &middot; &ndash;</td><td style="text-align: center;">Q</td>
<td style="text-align: center;">&middot; &ndash; &middot;</td><td style="text-align: center;">R</td>
<td style="text-align: center;">&middot; &middot; &middot;</td><td style="text-align: center;">S</td>
<td style="text-align: center;">&ndash;</td><td style="text-align: center;">T</td>
</tr>

<tr class="odd">
<td style="text-align: center;">&middot; &middot; &ndash;</td><td style="text-align: center;">U</td>
<td style="text-align: center;">&middot; &middot; &middot; &ndash;</td><td style="text-align: center;">V</td>
<td style="text-align: center;">&middot; &ndash; &ndash;</td><td style="text-align: center;">W</td>
<td style="text-align: center;">&ndash; &middot; &middot; &ndash;</td><td style="text-align: center;">X</td>
</tr>

<tr class="even">
<td style="text-align: center;">&ndash; &middot; &ndash; &ndash;</td><td style="text-align: center;">Y</td>
<td style="text-align: center;">&ndash; &ndash; &middot; &middot;</td><td style="text-align: center;">Z</td>
<td style="text-align: center;">&middot; &ndash; &ndash; &ndash; &ndash;</td><td style="text-align: center;">1</td>
<td style="text-align: center;">&middot; &middot; &ndash; &ndash; &ndash;</td><td style="text-align: center;">2</td>
</tr>

<tr class="odd">
<td style="text-align: center;">&middot; &middot; &middot; &ndash; &ndash;</td><td style="text-align: center;">3</td>
<td style="text-align: center;">&middot; &middot; &middot; &middot; &ndash;</td><td style="text-align: center;">4</td>
<td style="text-align: center;">&middot; &middot; &middot; &middot; &middot;</td><td style="text-align: center;">5</td>
<td style="text-align: center;">&ndash; &middot; &middot; &middot; &middot;</td><td style="text-align: center;">6</td>
</tr>

<tr class="even">
<td style="text-align: center;">&ndash; &ndash; &middot; &middot; &middot;</td><td style="text-align: center;">7</td>
<td style="text-align: center;">&ndash; &ndash; &ndash; &middot; &middot;</td><td style="text-align: center;">8</td>
<td style="text-align: center;">&ndash; &ndash; &ndash; &ndash; &middot;</td><td style="text-align: center;">9</td>
<td style="text-align: center;">&ndash; &ndash; &ndash; &ndash; &ndash;</td><td style="text-align: center;">0</td>
</tr>

</table>
</div>


<p>A basic pseudocode outline for how you <em>might</em> want to
structure your program design could be something like this.</p>


<div id="pseudo-morse-code-accordion" class="detail">
  <h3>Morse Code Pseudocode</h3>
  <div style="background: none; background-color: #e7eefb;">
    <ol>
    <li>Build a data structure to hold the letter-number to dot-dash
    conversions.

    <li>Ask the user to enter a sentence.

    <li>Convert the sentence to uppercase.

    <li>Use your data structure to convert each letter, number, and
    space to its equivalent dot-dash pattern. You can ignore anything
    that's not a letter, number, or space.

    <li>Print the conversion for the user.

    <li>Ask the user if they want to enter another sentence. Based on
    this, accept another sentence for conversion or quit the program.
	  
    </ol>
  </div>
</div>


<p>Here is one solution to the Morse code program. If you're
practising, you should program your own solution before looking at
ours.</p>


<div id="practice-morse-code-accordion" class="detail">
  <h3>Morse Code Solution</h3>
  <div style="background: none; background-color: #e7eefb;">

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-71-img" class="code-div-img"></span>
      <div id="code-71">
      ... code_cvt = {<br>
      ... &nbsp; "A": ".-",<br>
      ... &nbsp; "B": "-...",<br>
      ... &nbsp; "C": "-.-.",<br>
      ... &nbsp; "D": "-..",<br>
      ... &nbsp; "E": ".",<br>
      ... &nbsp; "F": "..-.",<br>
      ... &nbsp; "G": "--.",<br>
      ... &nbsp; "H": "....",<br>
      ... &nbsp; "I": "..",<br>
      ... &nbsp; "J": ".---",<br>
      ... &nbsp; "K": "-.-",<br>
      ... &nbsp; "L": ".-..",<br>
      ... &nbsp; "M": "--",<br>
      ... &nbsp; "N": "-.",<br>
      ... &nbsp; "O": "---",<br>
      ... &nbsp; "P": ".--.",<br>
      ... &nbsp; "Q": "--.-",<br>
      ... &nbsp; "R": ".-.",<br>
      ... &nbsp; "S": "...",<br>
      ... &nbsp; "T": "-",<br>
      ... &nbsp; "U": "..-",<br>
      ... &nbsp; "V": "...-",<br>
      ... &nbsp; "W": ".--",<br>
      ... &nbsp; "X": "-..-",<br>
      ... &nbsp; "Y": "-.--",<br>
      ... &nbsp; "Z": "--..",<br>
      ... &nbsp; " ": " ",<br>
      ... &nbsp; "1": ".----",<br>
      ... &nbsp; "2": "..---",<br>
      ... &nbsp; "3": "...--",<br>
      ... &nbsp; "4": "....-",<br>
      ... &nbsp; "5": ".....",<br>
      ... &nbsp; "6": "-....",<br>
      ... &nbsp; "7": "--...",<br>
      ... &nbsp; "8": "---..",<br>
      ... &nbsp; "9": "----.",<br>
      ... &nbsp; "0": "-----"<br>
      ... }<br>
      ...<br> 
      ... #  Mainline<br>
      ...<br> 
      ... cvt = True<br>
      ... <br>
      ... while cvt:<br>
      ... <span class="tab-1">sent = input( 'Enter a sentence: ' )</span><br>
      ... <span class="tab-1">sent = sent.upper()</span><br>
      ...<br>
      ... <span class="tab-1">code = ''</span><br>
      ... <span class="tab-1">orig = ''</span><br>
      ... <span class="tab-1">for c in sent:</span><br>
      ... <span class="tab-2">c = c</span><br>
      ... <span class="tab-2">if c in code_cvt.keys():</span><br>
      ... <span class="tab-3">code = code + f'{code_cvt[ c ]:5s} '</span><br>
      ... <span class="tab-3">if c == ' ':</span><br>
      ... <span class="tab-4">c = 'spc'</span><br>
      ... <span class="tab-3">orig = orig + f'{c:5s} '</span><br>
      ...<br>
      ... <span class="tab-1">print( code )</span><br>
      ... <span class="tab-1">print( orig )</span><br>
      ...<br>
      ... <span class="tab-1">inp = input( 'Do you want to enter another sentence (Y/N)? ' )</span><br>
      ... <span class="tab-1">inp = inp.upper()</span><br>
      ...<br>
      ... <span class="tab-1">cvt = ( inp == 'Y' )</span><br>
      </div>
    </div>
  </div>
</div>


<h3>Hangman</h3>

<p>Create a program to play the game "hangman." Here are instructions
on how the game works.</p>

<div style="text-align: center; margin: 0 auto;">
<iframe width="560" height="315"
src="https://www.youtube.com/embed/cGOeiQfjYPk" title="YouTube video
player" frameborder="0" allow="accelerometer; autoplay;
clipboard-write; encrypted-media; gyroscope; picture-in-picture;
web-share" allowfullscreen></iframe>
</div>

<p>
Here is <a href="words.json">a JSON file</a> with a few thousand words
you can use to select from for the word to guess. You can read the contents
of this file into a list using the following code.
</p>

<div class="code-div">
  import json<br>
  <br>
  &gt;&gt;&gt; with open( 'words.json' ) as inp:<br>
  ... <span class="tab-1">data = json.load(inp)</span><br>
  &gt;&gt;&gt; words = data[ "data" ]<br>
  </div>
</div>

<p>
The basic game-play would follow a pattern something similar to this.
</p>


<div id="pseudo-hangman-accordion" class="detail">
  <h3>Hangman Pseudocode</h3>
  <div style="background: none; background-color: #e7eefb;">
    <ol>
    <li>Randomly choose a target word.

    <li>Present the user with the number of letters in the target
    word, and fill in any letters they'd properly guessed (initially
    there would be no letters guessed).

    <li>Ask the user to enter a letter that hasn't already been
    selected.

    <li>Determine if that letter is part of the target word that the
    user has not guessed yet.

    <li>Let the user know whether their guess was in the (remainder of
    the) word or not.

    <li>Update letters guessed correctly if a correct guess was made,
    or number of mistakes if an incorrect guess was made.

    <li>Continue until the player guesses the entire word (success),
    or until six incorrect guesses are made (failure).
    </ol>
  </div>
</div>


<p>Here is one solution to the Hangman game. If you're practising, you
should program your own solution before looking at ours.</p>
 

<div id="practice-hangman-accordion" class="detail">
  <h3>Hangman Solution</h3>
  <div style="background: none; background-color: #e7eefb;">

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-72-img" class="code-div-img"></span>
      <div id="code-72">
      ... import json<br>
      ... import random<br>
      ... <br>
      ... hangman = [ &nbsp;#  Hangman progress as mistakes are made<br>
      ... """<br>
      ... &nbsp;+--|<br>
      ... &nbsp; &nbsp; |<br>
      ... &nbsp; &nbsp; |<br>
      ... &nbsp; &nbsp; |<br>
      ... """,<br>
      ... """<br>
      ... &nbsp;+--|<br>
      ... &nbsp; &nbsp; |<br>
      ... &nbsp; &nbsp; |<br>
      ... / &nbsp; |<br>
      ... """,<br>
      ... """<br>
      ... &nbsp;+--|<br>
      ... &nbsp; &nbsp; |<br>
      ... &nbsp; &nbsp; |<br>
      ... / \ |<br>
      ... """,<br>
      ... """<br>
      ... &nbsp;+--|<br>
      ... &nbsp; &nbsp; |<br>
      ... / &nbsp; |<br>
      ... / \ |<br>
      ... """,<br>
      ... """<br>
      ... &nbsp;+--|<br>
      ... &nbsp; &nbsp; |<br>
      ... /| &nbsp;|<br>
      ... / \ |<br>
      ... """,<br>
      ... """<br>
      ... &nbsp;+--|<br>
      ... &nbsp; &nbsp; |<br>
      ... /|\ |<br>
      ... / \ |<br>
      ... """,<br>
      ... """<br>
      ... &nbsp;+--|<br>
      ... &nbsp;o &nbsp;|<br>
      ... /|\ |<br>
      ... / \ |<br>
      ... """,<br>
      ... ]<br>
      ... <br>
      ... def choose_word(word_list):<br>
      ... <span class="tab-1">try:</span><br>
      ... <span class="tab-2">return random.choice(word_list).lower()</span><br>
      ... <span class="tab-1">except:</span><br>
      ... <span class="tab-2">return "random"</span><br>
      ... <br>
      ... def new_game():<br>
      ... <span class="tab-1">c = ""</span><br>
      ... <span class="tab-1">while c != "Y" and c != "N":</span><br>
      ... <span class="tab-2">c = input("Would you like to play again (Y or N)? ")</span><br>
      ... <span class="tab-2">c = c.upper()</span><br>
      ... <span class="tab-1">return c == "Y"</span><br>
      ... <br>
      ... def get_input(avail):<br>
      ... <span class="tab-1">for c in avail:</span><br>
      ... <span class="tab-2">print(f"{c} ", end="")</span><br>
      ... <span class="tab-1">print()</span><br>
      ... <br>
      ... <span class="tab-1">c = input("Choose an available character: ")</span><br>
      ... <span class="tab-1">c = c.upper()</span><br>
      ... <br>
      ... <span class="tab-1">if len(c) != 1:</span><br>
      ... <span class="tab-2">print("You must choose a single character")</span><br>
      ... <span class="tab-1">elif ord(c) &lt; ord("A") or ord(c) &gt; ord("Z"):</span><br>
      ... <span class="tab-2">print('You must choose a character between "A" and "Z"')</span><br>
      ... <span class="tab-1">elif c not in avail:</span><br>
      ... <span class="tab-2">print(f"Character {c.upper()} has already been selected")</span><br>
      ... <br>
      ... <span class="tab-1">pos = avail.index(c)</span><br>
      ... <span class="tab-1">avail[pos] = "_"</span><br>
      ... <br>
      ... <span class="tab-1">return (c.lower(), avail)</span><br>
      ... <br>
      ... def print_word(word, lbl=""):<br>
      ... <span class="tab-1">if len(lbl) &gt; 0:</span><br>
      ... <span class="tab-2">print(f"{lbl}: ", end="")</span><br>
      ... <br>
      ... <span class="tab-1">for c in word:</span><br>
      ... <span class="tab-2">print(f"{c} ", end="")</span><br>
      ... <span class="tab-1">print("\n")</span><br>
      ... <br>
      ... def read_word():<br>
      ... <span class="tab-1">with open("words.json") as inp:</span><br>
      ... <span class="tab-2">data = json.load(inp)</span><br>
      ... <br>
      ... <span class="tab-1">return data["data"]  #  Return word list</span><br>
      ... <br>
      ... #  Mainline<br>
      ... <br>
      ... words = read_word()<br>
      ... <br>
      ... game = True<br>
      ... while game:<br>
      ... <span class="tab-1">tg_word = choose_word(words)</span><br>
      ... <span class="tab-1">known_word = "_" * len(tg_word)</span><br>
      ... <br>
      ... <span class="tab-1">correct = 0</span><br>
      ... <span class="tab-1">mistake = 0</span><br>
      ... <span class="tab-1">avail = [chr(v) for v in range(ord("A"), ord("Z") + 1)]</span><br>
      ... <br>
      ... <span class="tab-1">print()</span><br>
      ... <span class="tab-1">print(hangman[mistake])</span><br>
      ... <span class="tab-1">print_word(known_word, "Word")</span><br>
      ... <span class="tab-1">print()</span><br>
      ... <br>
      ... <span class="tab-1">while correct != len(tg_word) and mistake &lt; 6:</span><br>
      ... <span class="tab-2">c, avail = get_input(avail)</span><br>
      ... <br>
      ... <span class="tab-2">if c not in tg_word:</span><br>
      ... <span class="tab-3">mistake += 1</span><br>
      ... <span class="tab-3">print(f"\n{c.upper()} is not in the word to guess. ", end="")</span><br>
      ... <span class="tab-3">print(f"{6-mistake} guesses left.")</span><br>
      ... <span class="tab-2">else:</span><br>
      ... <span class="tab-3">print(f"\n{c.upper()} is in the word to guess.")</span><br>
      ... <br>
      ... <span class="tab-3">pos = -1</span><br>
      ... <span class="tab-3">while c in tg_word[pos + 1 :]:</span><br>
      ... <span class="tab-4">pos = tg_word.index(c, pos + 1)</span><br>
      ... <span class="tab-4">known_word = ( known_word[0:pos] + c.upper() + known_word[pos + 1 :] )</span><br>
      ... <span class="tab-4">correct += 1</span><br>
      ... <br>
      ... <span class="tab-2">print(hangman[mistake])</span><br>
      ... <span class="tab-2">print_word(known_word, "Word")</span><br>
      ... <span class="tab-2">print()</span><br>
      ... <br>
      ... <span class="tab-2">if correct == len(tg_word):</span><br>
      ... <span class="tab-3">print(f"Congratulations! You guessed the word {tg_word.upper()}")</span><br>
      ... <span class="tab-2">elif mistake == 6:</span><br>
      ... <span class="tab-3">print("Sorry, you've hung yourself...")</span><br>
      ... <span class="tab-3">print(f"{tg_word.upper()} was the correct word\n")</span><br>
      ... <br>
      ... <span class="tab-1">game = new_game()</span><br>
      </div>
    </div>
  </div>
</div>


<h2>Friday the 13th</h2>

<p>Friday the 13th is considered an unlucky day in many countries, but
not all. There is no definitive answer as to why this day is
considered unlucky, but a common belief is that it originates from
Judas Iscariot being the 13th guest to arrive at the last
supper. Another explanation is that in Norse lore, 12 gods came
together at Valhalla and Loki, the mischievous god, arrived
unannounced as the 13th guest.</p>

<p>Regardless of its origin, in this problem you are asked to find all
occurrences of Friday when it is the 13th day of the month, for a
given year chosen by a user. This will allow you to practice using
the
<a href="https://docs.python.org/3/library/datetime.html"><code>datetime</code></a>
data structure in Python. <code>datetime</code> is specifically
designed to allow date and time manipulation in a simple manner. For
example, with a
<code>datetime</code> variable, you can easily perform the following
(often more complicated) tasks.

<ul>
<li>Convert a string like 01/01/2023 12:00:00pm to
a <code>datetime</code> variable with
the <a href="https://www.programiz.com/python-programming/datetime/strptime"><code>strptime</code></a>
function,

<li>Convert a <code>datetime</code> variable to a string in any format
you need with the <a href="datetime"><code>strftime</code></a>
function,

<li>Determine the year, month, day, hour, minute, and second
contained in a <code>datetime</code> variable by looking at its
<code>year</code>, <code>month</code>, <code>day</code>, <code>hour</code>,
<code>minute</code>, and <code>second</code> components
(<em>e.g.,</em> <code>print( dt_tm.year)</code>),

<li>Increment or decrement a <code>datetime</code> variable by a
specific number of
<code>years</code>, <code>months</code>, <code>days</code>, <code>hours</code>,
<code>minutes</code>, or <code>seconds</code> using
the <a href="https://www.geeksforgeeks.org/python-datetime-timedelta-function/"><code>timedelta</code></a>
function, all without having to remember how many days a month has,
whether a year is a leap year, and so on.

</ul>

<p>Create a program that asks a user to enter a year that is positive, then
prints all occurrences of Friday the 13th for the given year. The basic program
structure would follow a pattern something similar to this.</p>


<div id="pseudo-friday-13-accordion" class="detail">
  <h3>Friday the 13th Pseudocode</h3>
  <div style="background: none; background-color: #e7eefb;">
    <ol>
    <li>Ask the user to input a valid year.

    <li>Convert the year into a <code>datetime</code> variable
    representing 01/01/year.

    <li>Loop over all days in the year and check each day to see if it
    is Friday the 13th. You can use the <code>timedelta</code> and
    <code>weekday</code> functions, as well as the ability to directly
    access a <code>datetime</code>'s year, month, and day using
    <code>.year</code>, <code>.month</code>, and <code>.day</code> as
    needed.

    <li>Print each date that corresponds to Friday the 13th.

    </ol>
  </div>
</div>

<p>Here is one solution to the Friday the 13th problem. If you're
practising, you should program your own solution before looking at
ours.
</p>
 

<div id="practice-friday-13-accordion" class="detail">
  <h3>Friday the 13th Solution</h3>
  <div style="background: none; background-color: #e7eefb;">

    <div class="code-div" style="background-color: #f8f8f8;">
      <span title="copy code" id="code-73-img" class="code-div-img"></span>
      <div id="code-73">
      ... from datetime import datetime<br>
      ... from datetime import timedelta<br>
      ... <br>
      ... day_nm = [<br>
      ...     "Sunday",<br>
      ...     "Monday",<br>
      ...     "Tuesday",<br>
      ...     "Wednesday",<br>
      ...     "Thursday",<br>
      ...     "Friday",<br>
      ...     "Saturday",<br>
      ... ]<br>
      ... <br>
      ... while True:<br>
      ... <span class="tab-1">yr = input("Enter a year: ")</span><br>
      ... <span class="tab-1">try:</span><br>
      ... <span class="tab-2">yr = int(yr)</span><br>
      ... <span class="tab-1">except:</span><br>
      ... <span class="tab-2">print("The year you enter must be a number")</span><br>
      ... <span class="tab-2">continue</span><br>
      ... <br>

      ... <span class="tab-1">if yr <= 0:</span><br>
      ... <span class="tab-2">  print("The year you enter must be positive")</span></br>
      ... <span class="tab-2"> continue</span></br>
      ... <br>

      ... <span class="tab-1">break</span><br>
      ... <br>

      ... dt_str = f"01/01/{yr}"<br>
      ... dt_tm = datetime.strptime(dt_str, "%m/%d/%Y")<br>
      ... <br>

      ... while dt_tm.year == yr:<br>
      ... <span class="tab-1">if dt_tm.weekday() == 6 and dt_tm.day == 13:</span><br>
      ... <span class="tab-2"> print(f'{dt_tm.strftime("%m/%d/%Y")} is Friday the 13th')</span><br>
      ... <span class="tab-1">dt_tm = dt_tm + timedelta(days=1)</span><br>
      </div>
    </div>
  </div>
</div>

<h2>Advanced Problems (aka "Logan" Problems)</h2>

<p>Below are some more advanced problems for students who have previous Python
programming experience or students who have finished the first four practice
problems.</p>

<h3>2048</h3>

<p>2048 is a game played on a 4&times;4 grid. The goal is to combine
values in squares on the grid to add up to 2048. Initially, two random
positions are given values of 2. The remaining seven positions are
empty. Players can push the non-empty squares up, down, left, or
right. All the non-empty squares will move as far as possible in the
given direction, until they hit the edge of the grid or they hit a
non-empty square. If a square hits another square with the same value
the two squares "merge," placing the sum of the values in the square
that was hit, and emptying the second square. After each "push" a
random empty square is selected and a value of 2 is placed in the
square.</p>

<p>The game continues until the player merges two squares to a value
of 2048, or until the board is full and no moves that form merges
exist. You can try an <a href="https://2048game.com/"
target="_blank">online version</a> of the game to see how it works and
understand the rules for what happens when you push squares, when
merges occur, and how the game ends.</p>

<div style="width: 85%; margin-left: 7.5%;">
<table style="margin: 2em auto 0px auto; font-family: 'Fira Code', monospace;">
  
<!-- First two tables -->

  <tr>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  
  <td style="border: none;">&nbsp;</td>

  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  </tr>
  
  <tr>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>

  <td style="border: none; vertical-align: middle; text-align:
  center;">Push Right</td>

  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;</td>
  </tr>

  <tr>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>

  <td style="border: none; vertical-align: middle; text-align:
  center;">&rarr;</td>

  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  </tr>
  
  <tr>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  
  <td style="border: none;">&nbsp;</td>

  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;</td>
  </tr>
  

<!-- Gap between first and second tables -->
  
  <tr><td style="border: none;">&nbsp;</td></tr>

  
<!-- Second two tables -->

  <tr>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  
  <td style="border: none;">&nbsp;</td>

  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;
  </td>
  </tr>
  
  <tr>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;</td>

  <td style="border: none; vertical-align: middle; text-align:
  center;">Push Up</td>

  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  </tr>

  <tr>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>

  <td style="border: none; vertical-align: middle; text-align:
  center;">&uarr;</td>

  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  </tr>
  
  <tr>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;</td>
  
  <td style="border: none;">&nbsp;</td>

  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  </tr>
  

<!-- Gap between second and third tables -->

  <tr><td style="border: none;">&nbsp;</td></tr>

  
<!-- Third two tables -->

  <tr>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;
  </td>
  
  <td style="border: none;">&nbsp;</td>

  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  </tr>
  
  <tr>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>

  <td style="border: none; vertical-align: middle; text-align:
  center;">Push Left</td>

  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  </tr>

  <tr>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>

  <td style="border: none; vertical-align: middle; text-align:
  center;">&larr;</td>

  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  <td style="background: aliceblue">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </td>
  </tr>
  
  <tr>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  
  <td style="border: none;">&nbsp;</td>

  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  </tr>
  

<!-- Continue -->
  
  <tr>
  <td style="border: none;">&nbsp;</td>
  <td style="border: none;">&nbsp;</td>
  <td style="border: none;">&nbsp;</td>
  <td style="border: none;">&nbsp;</td>
  <td style="border: none; vertical-align: middle; text-align:
  center;">&hellip;</td>
  </tr>

</table>
</div>

<p>We have provided <a href="2048.py">one solution</a> to the 2048
game in Python. You'll need to <code>pip install keyboard</code> to
install the <code>keyboard</code> library so it can run properly.</p>


<h3>String Matching</h3>

<p>String matching and partial string matching are two critical tasks
in computer science. The first asks, "What is the minimum number of
operations required to convert a source string \(s\) into a target
string \(t\)?"  The second asks, "From a set of strings, which strings
\(T = \{ t_1, t_2, \ldots, t_n\}\) are within a threshold similarity
\(\epsilon\) of a source string \(s\)?"
</p>


<h4>String Conversion</h4>

<p>Suppose we have two strings \(s\) and \(t\) and we want to perform
the minimum number of "operations" on \(s\) so that it is equivalent
to \(t\). Here, valid operations on \(s\) are inserting a new
character, deleting an existing character, or replacing an existing
character (<em>i.e.,</em> swapping it for something else). The
<a href="https://planetcalc.com/1721/" target="_blank">Levenshtein
distance</a>, proposed by Vladimir Levenshtein in 1965, defines the
minimum number of operations needed to convert \(s\) to \(t\). The
distance matrix \(D\) it builds can also be used to
determine <em>which</em> operations to perform, which is probably as
important (or perhaps more important) that the actual minimum
operation count itself.
</p>

<p>Levenshtein distance is calculated by recursively constructing a
distance matrix \(D\) of size \(|s| \times |t|\). Entry \(D[i][j]\)
holds the Levenshtein distance for \(s\) to \(t\) up to position \(i\)
in \(s\) and \(j\) in \(t\). This means the lower-right corner of \(D\)
holds the final distance for converting \(s\) to \(t\). A specific
algorithm based on values of \(s\) and \(t\) is used to construct
\(D\).
</p>

<div style="font-size: 1.15em;">
\begin{equation}
\textrm{lev}(s,t) =
\begin{cases}
|s| & \textrm{if} \; |t| = 0 \\
|t| & \textrm{if} \; |s| = 0 \\
\textrm{lev}(\textrm{tail}(a), \textrm{tail}(b)) & \textrm{if} \; a[0] = b[0] \\
1 + \textrm{min}
\begin{cases}
\textrm{lev}(\textrm{tail}(a),b) \\
\textrm{lev}(a,\textrm{tail}(b)) \\
\textrm{lev}(\textrm{tail}(a),\textrm{tail}(b)) \\
\end{cases} & \textrm{otherwise}
\end{cases}
\end{equation}
</div>

<p>This tells us the Levenshtein distance for (sub)strings \(s\) and \(t\)
is</p>

<ol>

<li> \(|s|\) if \(t\) is empty (delete all characters in \(s\), requiring
\(|s|\) operations)</li>

<li> \(|t|\) if \(s\) is empty (append all characters in \(t\) to the end of
\(s\), requiring \(|t|\) operations)</li>
  
<li> The Levenshtein distance of \(s[1:]\) and \(t[1:]\) if the first
characters of \(s\) and \(t\) are identical (nothing needs to be done since
the strings match at their first character)</li>
  
<li> Otherwise, we know a deletion, insertion, or replacement (swap)
is required, so we add 1 (for the operation) to the minimum of:</li>

<ul>

<li>the Levenshtein distance of \(s[1:]\) and \(t\) (<em>deleting</em>
the first character of \(s\))</li>
  
<li>the Levenshtein distance of \(s\) and \(t[1:]\)
(<em>inserting</em> the first character of \(t\) at the beginning of
\(s\))</li>

<li>the Levenshtein distance of \(s[1:]\) and \(t[1:]\)
(<em>swapping</em> the first character of \(s\) with the first
character of \(t\))</li>

</ul>
</ol>

<p>To actually <em>construct</em> \(D\), we use dynamic programming,
which divides a large problem into a sequence of smaller
ones. Obviously, the large problem is calculating the Levenshtein
distance between \(s\) and \(t\). We can reduce this to calculating
the Levenshtein distance between prefixes of \(s\) and \(t\). As an
example, suppose \(s=\textrm{kelm}\) and \(t=\textrm{hello}\). The
prefixes of kelm are k, ke, kel, and kelm. Similarly, the prefixes of
hello are h, he, hel, hell, and hello. The Levenshtein distance
between all pairs of prefixes forms the entries of \(D\).
</p>

<p>To further reduce this to something we can easily work with,
consider comparing the prefix k to all prefixes of hello. The first
one, \((\textrm{k},\textrm{h})\) has a Levenshtein distance of
\(\textrm{lev}(\textrm{k},\textrm{h})=1\), since we swap k for h. The
second, \((\textrm{k},\textrm{he})\) requires a swap and an insertion
of e, \(\textrm{lev}(\textrm{k},\textrm{he})=2\). Notice this is an
extension of the first \((\textrm{k},\textrm{h})\) operation. For
\((\textrm{k},\textrm{hel})\) it's a swap, an insertion, and an
insertion, for \(\textrm{lev}(\textrm{k},\textrm{hel})=3\). You can
easily guess that \(\textrm{lev}(\textrm{k},\textrm{hell})=4\) and
\(\textrm{lev}(\textrm{k},\textrm{hello})=5\). This represents the
first row of \(D\), or values of \(D[1,1]\) through \(D[1,5]\).
</p>

<p>
To describe this in a linear programming fashion, we will consider the
case of calculating \(D[i,j]\) given \(D[i-1,j]\), \(D[i,j-1]\), and
\(D[i-1,j-1]\), that is, the problem reduced to a \(2 \times 2\)
matrix. Suppose \(D[i-1,j]=2\), \(D[i,j-1]=3\), and \(D[i-1,j-1]=5\).

<table style="margin: 2em auto 0px auto; font-family: 'Fira Code', monospace;">
<tr><td>5</td> <td>2</td></tr>
<tr><td>3</td> <td>&nbsp;</td></tr>
</table>

<p>The missing element at \(D[i,j]\) will have a Levenshtein distance
based on two options.</p>

<ol>

<li> The current character of the two prefixes are identical, and no
operation is required if we do a replacement (since we'd be swapping
the same characters), so \(D[i,j] =
\min(1+D[i-1,j],1+D[i,j-1],D[i-1,j-1])\).

<li> The current character of the two prefixes are different, and a replacement
<em>does</em> require a swap, so
\(D[i,j] = \min(1+D[i-1,j],1+D[i,j-1],1+D[i-1,j-1])\).
  
</ol>

<p>To complete the discussion, notice that \(i\) and \(j\) index from \(1\),
but to get the three values we need to calculate the fourth, we need a row and
column indexed at \(0\) in \(D\). Therefore, this is the \(D\) we start
with when comparing kelm to hello.
</p>


<table style="margin: 2em auto 0px auto; font-family: 'Fira Code', monospace;">

<tr>
<td style="border: none;"></td> <td style="border: none;"></td> <td>h</td> <td>e</td> <td>l</td> <td>l</td> <td>o</td>
</tr>

<tr>
<td style="border: none;"></td> <td>0</td> <td>1</td> <td>2</td> <td>3</td> <td>4</td> <td>5</td>
</tr>

<tr>
<td>k</td> <td>1</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

<tr>
<td>e</td> <td>2</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

<tr>
<td>l</td> <td>3</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

<tr>
<td>m</td> <td>4</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

</table>


<p>Given this table, to calculate \(D[1,1]\) we observe that the
prefixes k and h are not the same, so the distance is \(\min(1 +
D[0,1],1 + D[1,0],1 + D[0,0]) = 1 + 0 = 1\).


<table style="margin: 2em auto 0px auto; font-family: 'Fira Code', monospace;">

<tr>
<td style="border: none;"></td> <td style="border: none;"></td> <td>h</td> <td>e</td> <td>l</td> <td>l</td> <td>o</td>
</tr>

<tr>
<td style="border: none;"></td> <td>0</td> <td>1</td> <td>2</td> <td>3</td> <td>4</td> <td>5</td>
</tr>

<tr>
<td>k</td> <td>1</td> <td><b>1</b></td> <td></td> <td></td> <td></td> <td></td>
</tr>

<tr>
<td>e</td> <td>2</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

<tr>
<td>l</td> <td>3</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

<tr>
<td>m</td> <td>4</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

</table>


<p>When the current characters of the prefixes are the same, the
replacement cost is 0, and our options are insert, delete, or do
nothing. The value for \(D[i,j]\) is therefore
\(\min(1+D[i-1,j],1+D[i,j-1],D[i-1,j-1])\). If the prefix characters
are different, then an deletion, insertion, or swap is required and
the replacement cost is 1, so the value for \(D[i,j]\) is \(\min(1 +
D[i-1,j],1 + D[i,j-1],1 + D[i-1,j-1])\).  This procedure is used to
fill in row \(D[1,:]\).
</p>


<table style="margin: 2em auto 0px auto; font-family: 'Fira Code', monospace;">

<tr>
<td style="border: none;"></td> <td style="border: none;"></td> <td>h</td> <td>e</td> <td>l</td> <td>l</td> <td>o</td>
</tr>

<tr>
<td style="border: none;"></td> <td>0</td> <td>1</td> <td>2</td> <td>3</td> <td>4</td> <td>5</td>
</tr>

<tr>
<td>k</td> <td>1</td> <td>1</td> <td><b>2</b></td> <td><b>3</b></td> <td><b>4</b></td> <td><b>5</b></td>
</tr>

<tr>
<td>e</td> <td>2</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

<tr>
<td>l</td> <td>3</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

<tr>
<td>m</td> <td>4</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

</table>


<p>For the next row, we are comparing <em>ke</em> to hello. Remember,
even though the second row is labelled e, it corresponds to the prefix
from the first to the second row: ke.  So as we walk through hello, we
would say:

<ul>
<li>e is different than h
<li>e is the same as e
<li>e is different from l
<li>e is different from l
<li>e is different from o
</ul>


<p>What about the first two entries in the next row, \(D[2,1]\) and
\(D[2,2]\)?  For \(D[2,1]\) we are comparing e to h, and since they
are different the distance is \(\min(1+1,1+2,1+1) = 2\). For
\(D[2,2]\), however, we are comparing e to e, and since these are the
same, no operation is needed for replacement, meaning \(D[2,2] =
\min(1+2,1+2,1) = 1\).
</p>


<table style="margin: 2em auto 0px auto; font-family: 'Fira Code', monospace;">

<tr>
<td style="border: none;"></td> <td style="border: none;"></td> <td>h</td> <td>e</td> <td>l</td> <td>l</td> <td>o</td>
</tr>

<tr>
<td style="border: none;"></td> <td>0</td> <td>1</td> <td>2</td> <td>3</td> <td>4</td> <td>5</td>
</tr>

<tr>
<td>k</td> <td>1</td> <td>1</td> <td>2</td> <td>3</td> <td>4</td> <td>5</td>
</tr>

<tr>
<td>e</td> <td>2</td> <td><b>2</b></td> <td><b>1</b></td> <td></td> <td></td> <td></td>
</tr>

<tr>
<td>l</td> <td>3</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

<tr>
<td>m</td> <td>4</td> <td></td> <td></td> <td></td> <td></td> <td></td>
</tr>

</table>


<p>If we continue this for all entries in \(D\), we obtain a final
table whose lower-right entry \(D[4,5]=3\), meaning
\(\textrm{lev}(\textrm{kelm},\textrm{hello})=3\). Intuitively this
seems correct, since we would swap k with h, insert an l, and swap m
with o. You will see below, however, that our algorithm uses a different
set of three operations to convert kelm to hello.
</p>


<table style="margin: 2em auto 0px auto; font-family: 'Fira Code', monospace;">

<tr>
<td style="border: none;"></td> <td style="border: none;"></td> <td>h</td> <td>e</td> <td>l</td> <td>l</td> <td>o</td>
</tr>

<tr>
<td style="border: none;"></td> <td>0</td> <td>1</td> <td>2</td> <td>3</td> <td>4</td> <td>5</td>
</tr>

<tr>
<td>k</td> <td>1</td> <td style="background: aliceblue;">1</td> <td>2</td> <td>3</td> <td>4</td> <td>5</td>
</tr>

<tr>
<td>e</td> <td>2</td> <td>2</td> <td style="background: aliceblue;">1</td> <td>2</td> <td>3</td> <td>4</td>
</tr>

<tr>
<td>l</td> <td>3</td> <td>3</td> <td>2</td> <td style="background: aliceblue;">1</td> <td>2</td> <td>3</td>
</tr>

<tr>
<td>m</td> <td>4</td> <td>4</td> <td>3</td> <td>2</td> <td style="background: aliceblue;">2</td> <td style="background: aliceblue;">3</td>
</tr>

</table>


<p>Given this description, write a program that calculates the
Levenshtein distance between two words, then describes how to convert
the source word to the target word in the number of Levenshtein
distance operations allowed. You may get a different set of operations
depending on whether you modify the source front-to-back or
back-to-front and depending on how you break ties in minimum distances
for insert, delete, and replace, but the number of operations
(<em>i.e.,</em> the Levenshtein distance) will always be the same.
</p>

<div class="code-div">
  <div>
  kelm &rarr; hello<br>
  Levenshtein distance: 3<br>
  <br>
  kelm &rarr; kelmo (I)<br>
  kelmo &rarr; kello (R)<br>
  kello &rarr; hello (R)<br>
  <br>
  <br>
  smelt &rarr; salmon<br>
  Levenshtein distance: 5<br>
  <br>
  smelt &rarr; smeltn (I)<br>
  smeltn &rarr; smelton (I)<br>
  smelton &rarr; smelmon (R)<br>
  smelmon &rarr; smlmon (D)<br>
  smlmon &rarr; salmon (R)<br>
  </div>
</div>


<h4>String Correction</h4>

<p>Levenshtein reports the edit distance between two words, and with
some extensions, how to perform edit operations to convert one word to
another.  Although interesting, this may not seem like a common
problem. However, Levenshtein provides another critical property: a
way to characterize the similarity between two words based on their
edit distance. This can be used in any situation where "word
similarity" is important. The example we will use is spell
checking. The basic strategy would be to say: if a word is misspelled,
suggest a small set of words that are "similar" to the misspelled
word, that is, a small set of words that have a small Levenshtein
distance from the misspelled word.
</p>

<p>Since we need suggestions to be identified quickly, we need to
encode all words in a dictionary in a way that supports rapid
identification of dictionary words within a threshold Levenshtein
distance of a target word. This can be done with
a <a href="https://dl.acm.org/doi/10.1145/362003.362025"
target="_blank">Burkhard-Keller tree</a>, commonly called a BK-tree.
In a BK-tree words are stored in tree nodes and the edge between two
nodes contains the Levenshtein distance between the nodes' words. A
BK-tree is constructed in the following manner.

<ol>

<li>Choose any word in a dictionary \(w_\textrm{root}\) as the root
of the BK-tree.</li>

<li>For all remaining words \(w_i\) in the dictionary, compute the
Levenshtein distance \(d_{i,\textrm{root}}\) between \(w_i\) and
\(w_\textrm{root}\).</li>
  
<li>If no child of \(w_\textrm{root}\) exists with an edge value of
\(d_{i,\textrm{root}}\), add \(w_i\) as a child of
\(w_\textrm{root}\).</li>
  
<li>If a child <b>does</b> exist with an edge value of
\(i,d_{\textrm{root}}\)</li>
  
  <ul>
  <li>Follow the edge to the node containing word \(w_j\).</li>
  <li>Calculate the Levenshtein distance \(d_{i,j}\) between \(w_i\)
  and \(w_j\).</li>
  <li>If no child of \(w_j\) exists with an edge value of \(d_{i,j}\),
  add \(w_i\) as a child of \(w_j\).</li>
  <li>Otherwise, recursively traverse the tree using the same rules to
  find the proper location for \(w_i\).</li>
  </ul>

</ol>

<p>As an example, suppose out (small) dictionary had the words <code>{ help,
helm, hello, shell, helper, loop, helps, troop }</code>. We arbitrarily
choose <code>help</code> as the root of the tree, then add <code>helm</code>
Since \(\textrm{lev}(\textrm{help},\textrm{helm})=1\) and <code>help</code>
has no child node with an edge value of \(1\), we add it to the BK-tree.
Similarly, <code>hello</code> with a Levenshtein distance of \(2\) is also
added as a child of <code>help</code>.
</p>

<div style="text-align: center;">
<img src="fig/BK-01.png" style="border: 1em solid white;"></img>
</div>

<p>Next we add <code>shell</code>. Since
\(\textrm{lev}(\textrm{help},\textrm{shell})\) is \(2\), we already
have a child with Levenshtein distance \(2\) (<code>hello</code>). Therefore,
we move to node <code>hello</code> and attempt to add <code>shell</code>
there. The Levenshtein distance between <code>hello</code> and <code>shell</code>
is 2, and no child of <code>hello</code> with edge value 2 exists, so we insert
<code>shell</code> as a child of <code>hello</code>.</p>

<div style="text-align: center;">
<img src="fig/BK-02.png" style="border: 1em solid white;"></img>
</div>

<p>This process continues, adding the remaining words to create the final
BK-tree.</p>

<div style="text-align: center;">
<img src="fig/BK-03.png" style="border: 1em solid white;"></img>
</div>


<p>Once the tree is built, it is searched for words "close" to a target
word, for example, a misspelled word. The threshold Levenshtein
distance \(\epsilon\) is called the <em>radius</em>. To search the
BK-tree, for a target word \(w_\textrm{tg}\), perform the following
iterative procedure.


<ol>

<li>Create an empty match list \(M\).</li>

<li>Create a candidate list \(C\) containing the root node
\(n_\textrm{root}\).</li>

<li>While \(C\) is not empty, remove the next node \(n_c \in C\).</li>

<ul>

<li>If Levenshtein distance \(d_c\) between \(w_\textrm{tg}\) and
\(w_c\) is less than or equal to \(\epsilon\), \(d_c =
\textrm{lev}(w_\textrm{tg},w_c) \leq \epsilon\), add \(w_c\) to
\(M\)</li>

<li>Create a soft threshold range \(d_c - \epsilon \ldots d_c +
\epsilon\).  Add every child of \(n_c\) whose edge value is within the
soft threshold to the candidate list \(C\)</li>

<li>Continue removing candidate nodes \(n_c \in C\) until \(C\) is
empty</li>

</ul>

<li>At this point, \(M\) contains all words in the BK-tree within
Levenshtein distance \(\epsilon\) of \(w_\textrm{tg}\).

</ol>

<p>Suppose we were searching for suggestions to the misspelled
word <code>hllo</code> with a threshold of \(\epsilon=1\). We start
with an empty \(M\) and a candidate list \(C = \{ \textrm{help} \}\)
containing the root node. We remove the first entry <code>help</code>
from \(C\). Because the Levenshtein distance
\(\textrm{lev}(\textrm{help},\textrm{hllo}) = 2 \gt \epsilon\), we
<b>do not</b> add <code>help</code> to \(M\). Our soft threshold
boundaries are \( 2 - \epsilon\) to \(2 + \epsilon = [1, \ldots,
3]\). <code>helm</code> and <code>hello</code> are added to \(C\)
since their edge values are within the soft threshold.
</p>

<p>We remove the next entry <code>helm</code> from \(C\).
\(\textrm{lev}(\textrm{helm},\textrm{hllo}) = 2 \gt
\epsilon\). Because the Levenshtein distance is greater than
\(\epsilon\), <code>helm</code> <b>is not</b> added to \(M\). The
soft threshold is \([1, \ldots, 3]\), so <code>helps</code> is added
to \(C\).
</p>

<p>We remove the next entry <code>hello</code> from \(C\).
\(\textrm{lev}(\textrm{hello},\textrm{hllo}) = 1 \leq
\epsilon\). Because the Levenshtein distance is less than of equal to
\(\epsilon\), <code>hello</code> is added to \(M\). The
soft threshold is \([0, \ldots, 2]\), so <code>shell</code> is added
to \(C\).
</p>

<p>To complete the example,
\(\textrm{lev}(\textrm{helps},\textrm{hllo}) = 3 \gt \epsilon\), and
\(\textrm{lev}(\textrm{shell},\textrm{hllo}) = 3 \gt \epsilon\), so
neither is added to \(M\). The final set of recommended corrections for
<code>hllo</code> is therefore \(M = \{\textrm{hello}\}\).
</p>

<p>Add code to your program to construct a BK-tree from a set of
words, then allow a user provide a target word and threshold
\(\epsilon\). The search function should return the set of words that
are within \(\epsilon\) of the target word. As an example, here
is <a href="levenshtein.py">our Python program</a>
that includes both the Levenshtein algorithm and the routines to
construct and search a BK-tree. As a dictionary, we
use <a href="https://www.csc2.ncsu.edu/faculty/healey/msa/python/words.json">the
same set of words</a> we provided for the hangman practice problem. If
you want a larger
dictionary, <a href="https://www.csc2.ncsu.edu/faculty/healey/msa/python/dictionary.json">an
abridged version of the 2016 Webster's English Dictionary</a> is also
available, although it will take longer to build a BK-tree since this
file contains significantly more words. To load data from the
Webster's Dictionary, execute the following Python commands.
</p>

<div class="code-div">
  import json<br>
  <br>
  &gt;&gt;&gt; with open( 'dictionary.json' ) as inp:<br>
  ... <span class="tab-1">data = json.load(inp)</span><br>
  &gt;&gt;&gt; words = list( data.keys() )<br>
  </div>
</div>


<h2>Tic-Tac-Toe</h2>

<p>The final practice problem is also your assignment for the
Practical Python module. You are asked to
implement <a href="./assn-tictactoe/" target="_blank"> a simple
tic-tac-toe game</a> to allow two individuals to play one
another. The <a href="./assn-tictactoe/" target="_blank">assignment
web page</a> provides full details on what is required.</p>

<p>The assignment is due by 5:00pm Friday, September 8. The submission
link is included on the Moodle page in the Practical Python
section. As with the OpenWeatherMap assignment, you must submit a
Python .py source code so that we can automatically test it to ensure
it works as it should.</p>


<h2>Appendix: Installing Python Packages</h2>

<p>In a typical Python environment, you can install packages using
Python's <code>pip</code> command.</p>

<div class="code-div">
  <div id="code-74">
  pip install gensim
  </div>
</div>

<p><code>pip</code> automatically determines <em>dependencies</em>,
that is, whether other packages are required to run the package you've
requested. If any dependencies are not installed, <code>pip</code>
will attempt to install them prior to installing the package you've
requested.</p>

<p>The potential confusion with this setup is that it is possible
to have multiple Python environments. For example, many people
maintain a Python 2 installation, and a Python 3 installation.
This means you must be careful that you're installing into the
intended environment when you use <code>pip</code></p>

<p>In our context, the environment we're using is the one setup when
we installed Anaconda. Because of this, we normally want to use
Anaconda to perform installations, since this will ensure that they
are located in a way that Anaconda can find them.</p>

<p>Anaconda
has <a href="https://docs.anaconda.com/anaconda/navigator/tutorials/manage-packages/"
target="_blank">an extensive help page</a> on how to perform package
installations, both those that Anaconda maintains in its own package
library, and those that live outside Anaconda's servers. For specific
details on installation, this is the best guide to reference.</p>

<p>If you want a quick summary of the steps I use to try to install
Python packages in the Anaconda environment, they're listed in order
below</p>

<ol>

<li>Run Anaconda Navigator and choose the "Environments" option on the
left-hand panel. This will bring up a package manager with a list of
installed packages on the right. Enter the name of your package in the
"Search Packages" field to see if it's already installed as part of
the default Anaconda package group. If the package doesn't appear as
an installed package, use the drop-down menu to switch from
"Installed" to "Not Installed." If your package appears in this list,
it is a package Anaconda maintains in their package library. Select
the package (click on the radio button to the left of its name), then
click "Apply" to install the package.

<li>If the package is not in the "Not Installed" list, it is not a
package Anaconda maintains. Hit Windows+Q (Windows key plus Q key) to
bring up the search option in Windows 10 and type in "cmd". The list
of Recommended Apps should include "Anaconda Prompt." Select this,
since it guarantees all the proper Anaconda environment information is
set before the command line application is run.<br><br>

We want to use <code>pip</code> to install the package, but we first
need to ensure <code>pip</code> itself is installed. To do this, type

<div class="code-div">
  <div id="code-75">
  conda list
  </div>
</div>

at the command line. This will list all installed package in
alphabetical order. You can scroll backwards to see
if <code>pip</code> is in the list of installed
packages. If <code>pip</code> is not installed, you must install it
with the command

<div class="code-div">
  <div id="code-76">
  conda install pip
  </div>
</div>

This will install <code>pip</code> (which is a package Anaconda
maintains) into the Anaconda environment.<br><br>

Once you know <code>pip</code> is available, you can install your
desired package using

<div class="code-div">
  <div id="code-76">
  pip install package
  </div>
</div>

where "package" is the name of the package you want to install.
To check if the package installed properly, you can either use
<code>conda list</code> again, or run python and try to <code>import
package</code> to see if it loads properly.

</ol>

<!-- The mod-date span will be updated by code in mod-date.js -->

<hr class="fig_top">
<div class="footer">
  Updated <span id="mod-date">01-Jan-01</span>
</div>

</body>
</html>

<!--  LocalWords:  Analytics Healey Javascript Rossum Centrum bitwise
 -->
<!--  LocalWords:  Wiskunde Informatica decrement ebf fc px moz CSV '
 -->
<!--  LocalWords:  webkit Lucida monospace SAS numpy NumPy datetime -
 -->
<!--  LocalWords:  bool str boolean healey rappa durian  sklearn OMP
 -->
<!--  LocalWords:  Hodgenville tuples tuple substring len llo wo ld '
 -->
<!--  LocalWords:  elif sqrt Ctrl ui int's str's understandability nm
 -->
<!--  LocalWords:  LaBarr inp txt readlines num Mostek SUMLEV API tac
 -->
<!--  LocalWords:  substrings COUSUB CONCIT STNAME ESTIMATESBASE pre
 -->
<!--  LocalWords:  POPESTIMATE Abbeville Adamsville Albertville csv -
 -->
<!--  LocalWords:  Aliceville Los Angeles tuple's writerow stdev Aric
 -->

<!--  LocalWords:  Binet's covariance numpy's ndarray arange sublists
 -->
<!--  LocalWords:  sublist analytics eigenvectors pandas's labelled
 -->
<!--  LocalWords:  data's dtype NaN idx idxmax DataFrame DataFrame's
 -->
<!--  LocalWords:  df loc DataFrames ith iloc BeautifulSoup bs href
 -->
<!--  LocalWords:  BeautifulSoup's Traceback stdin TypeError urllib
 -->
<!--  LocalWords:  WinPython url urlopen forecasted Moodle iPython os
 -->
<!--  LocalWords:  ipython latin lxml getText dataset linesep scikit
 -->
<!--  LocalWords:  execfile Cournapeau preprocessing preprocessor SGD
 -->
<!--  LocalWords:  perceptron LDA QDA SVM neighbours XGBoost DBSCAN
 -->
<!--  LocalWords:  setosa virginica versicolor np matplotlib pyplot
 -->
<!--  LocalWords:  ListedColormap plt lightgreen cmap edgecolor uniq
 -->
<!--  LocalWords:  xlabel ylabel suptitle StandardScaler sc vstack rf
 -->
<!--  LocalWords:  hstack preprocessed ppn iter pred Misclassified tg
 -->
<!--  LocalWords:  prd svm SVC svc rbf KNeighborsClassifier KNN knn
 -->
<!--  LocalWords:  minkowski RandomForestClassifier oob accuracies cp
 -->
<!--  LocalWords:  misclassification misclassifications misclassify
 -->
<!--  LocalWords:  misclassified clust subrange WCSS arg Lloyd's agg
 -->
<!--  LocalWords:  centroids centroid KMeans Misassigned misassigned
 -->
<!--  LocalWords:  AgglomerativeClustering dendrogram outlier BaSed
 -->
<!--  LocalWords:  DBSCAN's misassignment Imputer nan NaNs chdir sep
 -->
<!--  LocalWords:  FunctionTransformer skiprows isnull del NAICS EMP
 -->
<!--  LocalWords:  ESTAB PAYANN backfill Const fillna scipy interp th
 -->
<!--  LocalWords:  linspace Jupyter gensim cmd conda agglomerative va
 -->
<!--  LocalWords:  datasets scatterplots REs randint cmp Args f'It -2
 -->
<!--  LocalWords:  bday figsize rect linestyle .ui-accordion-header
 -->
<!--  LocalWords:  'Droid Sans' -webkit-hyphens -moz-hyphens e.g. KY'
 -->
<!--  LocalWords:  -ms-hyphens Javascript 'healey' 'rappa' 'orange'
 -->
<!--  LocalWords:  'apple' 'pear' 'durian' 'pomegranate' 'Abraham -th
 -->
<!--  LocalWords:  Lincoln' 'Hodgenville 'February 1809' 'April 1865'
 -->
<!--  LocalWords:  'str' 'int' 'float' 'bool' 'Christopher Healey' -3
 -->
<!--  LocalWords:  '9195138112' 'Michael Rappa' '9195130480' 'Aric -4
 -->
<!--  LocalWords:  LaBarr' '9195132957' db.keys 'Hello 'w' 'llo wo'
 -->
<!--  LocalWords:  'd' 'ld 'Must.. harder..' 'Dept Science' i.e. 's
 -->
<!--  LocalWords:  '9195152858' 'A' 'B' 'C' 'F' 'The of' 'is' -15 -10
 -->
<!--  LocalWords:  math.sqrt -14 -13 -12 -11 'Healey' 'Rappa' 'stop'
 -->
<!--  LocalWords:  'LaBarr' l.insert 'is odd' engineers' 'input.txt'
 -->
<!--  LocalWords:  ipython-input-11-00773625d4c5 'r' 'latin' inp.seek
 -->
<!--  LocalWords:  inp.readlines inp.close inp.tell 'output.txt' ''
 -->
<!--  LocalWords:  'Mostek' out.write n' out.close 'This os.linesep
 -->
<!--  LocalWords:  inp.read content.split line' CENSUS2010POP 'excel'
 -->
<!--  LocalWords:  ESTIMATESBASE2010 POPESTIMATE2010 POPESTIMATE2011
 -->
<!--  LocalWords:  csv.list 'excel-tab' 'pop.csv' csv.reader 'has 'in
 -->
<!--  LocalWords:  population' 'City' state' 3.x 'pop-summary.csv' 2D
 -->
<!--  LocalWords:  csv.writer writer.writerow 'State' 'Population' 1D
 -->
<!--  LocalWords:  pop.csv 'Pop 'Sample 3.542248481792631e arr.shape
 -->
<!--  LocalWords:  numpy.array 'numpy.ndarray' numpy.zeros indices C1
 -->
<!--  LocalWords:  numpy.arange arr.reshape arr.size numpy.histogram
 -->
<!--  LocalWords:  pandas.Series 'a' 'b' 'c' int64 'x' -1.34 float64
 -->
<!--  LocalWords:  pandas.DataFrame 'C1' 'C2' C2 -ith df.loc df.iloc
 -->
<!--  LocalWords:  'C3' C3 s.name df.append pandas.read 'latin1' n---
 -->
<!--  LocalWords:  pop.describe 'NAME' 'STNAME' 'POPESTIMATE2011' -5
 -->
<!--  LocalWords:  .idxmax -means samples' datasets.load 'Data 'sepal
 -->
<!--  LocalWords:  iris.feature 'petal 'Target iris.target 'setosa'
 -->
<!--  LocalWords:  'versicolor' 'virginica' 'Truncated iris.data 's'
 -->
<!--  LocalWords:  matplotlib.colors matplotlib.pyplot 'o' colors d'
 -->
<!--  LocalWords:  'red' 'blue' 'lightgreen' np.unique plt.figure .2f
 -->
<!--  LocalWords:  plt.scatter 'black' plt.xlabel 'Petal plt.ylabel
 -->
<!--  LocalWords:  plt.legend fig.suptitle Width' 'Sepal 'Number eta0
 -->
<!--  LocalWords:  sklearn.model train.shape test.shape 'Frequency x-
 -->
<!--  LocalWords:  Centering sklearn.preprocessing sc.fit np.vstack
 -->
<!--  LocalWords:  sc.transform np.hstack 'Standardized -1.28030022
 -->
<!--  LocalWords:  -1.31903956 -1.33726273 -1.22333771 modeling .sum
 -->
<!--  LocalWords:  sklearn.linear sklearn.metrics ppn.fit ppn.predict
 -->
<!--  LocalWords:  'Perceptron 'Misclassified 'Accuracy '.format 'SVC
 -->
<!--  LocalWords:  ppn.score sklearn.svm 'rbf' svc.fit svc.predict 'X
 -->
<!--  LocalWords:  svc.score sklearn.neighbors neighbors 'minkowski'
 -->
<!--  LocalWords:  knn.fit knn.predict 'KNN knn.score rf.fit 'Random
 -->
<!--  LocalWords:  sklearn.ensemble rf.predict rf.score 'Out-of-bag
 -->
<!--  LocalWords:  rf.oob pre-labeled count.most sklearn.cluster U.S.
 -->
<!--  LocalWords:  km.fit km.predict 'k-Means 'Misassigned 'average'
 -->
<!--  LocalWords:  agg.fit 'Agglomerative db.fit 'DBSCAN np.nan 'NaN'
 -->
<!--  LocalWords:  'mean' imp.fit 'Impute imp.transform 'most pd.read
 -->
<!--  LocalWords:  frequent' np.log1p 'Transform trans.transform has'
 -->
<!--  LocalWords:  os.chdir 'construction-census.csv' df.isnull 'EMP'
 -->
<!--  LocalWords:  .values.sum 'values df.size df.copy cp.shape 'Pad
 -->
<!--  LocalWords:  .isnull removing...' values' GEO.id GEO.id2 'NaNs'
 -->
<!--  LocalWords:  GEO.display-label NAICS.id NAICS.display-label ID'
 -->
<!--  LocalWords:  YEAR.id 'Original cp.iloc 'Constant .fillna 'pad'
 -->
<!--  LocalWords:  'Column 'Backfill 'backfill' scipy.interpolate bs4
 -->
<!--  LocalWords:  interp1d 'Employee Employees' .plot plt.show '--'
 -->
<!--  LocalWords:  .interpolate 'linear' 'Linear Count' 'cubic' l.get
 -->
<!--  LocalWords:  .index np.linspace plt.plot url.read tree.find 'p'
 -->
<!--  LocalWords:  'href' 'lxml' 'div' 'class' 'footer' div.find 'id'
 -->
<!--  LocalWords:  'span' 'mod-date' span.getText '01-Jan-01'  'Droid
 -->
<!--  LocalWords:  'Python' wildcards string.'' re.compile pseudocode
 -->
<!--  LocalWords:  .ui-accordion-header -webkit-hyphens -moz-hyphens
 -->
<!--  LocalWords:  -ms-hyphens Javascript 'healey' 'rappa' 'orange'
 -->
<!--  LocalWords:  'apple' 'pear' 'durian' 'pomegranate' 'Abraham -th
 -->
<!--  LocalWords:  'Hodgenville 'February 1809' 'April 1865' 'str' -2
 -->
<!--  LocalWords:  'int' 'float' 'bool' 'Christopher '9195138112' 'w'
 -->
<!--  LocalWords:  'Michael '9195130480' 'Aric '9195132957' 'Hello -3
 -->
<!--  LocalWords:  'llo 'd' 'ld 'Must.. -4 'Dept '9195152858' 's 'A'
 -->
<!--  LocalWords:  'B' 'C' 'F' 'The 'is' -15 -10 -14 -13 -12 -11 'is
 -->
<!--  LocalWords:  'Healey' 'Rappa' 'LaBarr' 'stop' 'input.txt' 'r'
 -->
<!--  LocalWords:  'latin' 'output.txt' '' 'Mostek' 'This 'excel-tab'
 -->
<!--  LocalWords:  'excel' 'pop.csv' 'has 'City' 'in 3.x 'State' 'Pop
 -->
<!--  LocalWords:  'pop-summary.csv' 'Population' 'Sample 2D 1D 'a'
 -->
<!--  LocalWords:  3.542248481792631e 'numpy.ndarray' 'b' 'c' 'x' -5
 -->
<!--  LocalWords:  -1.34 'C1' 'C2' -ith 'C3' 'latin1' 'NAME' 'STNAME'
 -->
<!--  LocalWords:  'POPESTIMATE2011' .idxmax -means 'Data 'sepal 's'
 -->
<!--  LocalWords:  'petal 'Target 'setosa' 'versicolor' 'virginica'
 -->
<!--  LocalWords:  'Truncated 'o' 'red' 'blue' 'lightgreen' 'black'
 -->
<!--  LocalWords:  'Petal 'Sepal 'Number 'Frequency 'Standardized .2f
 -->
<!--  LocalWords:  -1.28030022 -1.31903956 -1.33726273 -1.22333771 'X
 -->
<!--  LocalWords:  'Perceptron 'Misclassified .sum 'Accuracy '.format
 -->
<!--  LocalWords:  'rbf' 'SVC 'minkowski' 'KNN 'Random 'Out-of-bag f'
 -->
<!--  LocalWords:  'k-Means 'Misassigned 'average' 'Agglomerative 'p'
 -->
<!--  LocalWords:  'DBSCAN 'NaN' 'mean' 'Impute 'most 'Transform 'Pad
 -->
<!--  LocalWords:  'construction-census.csv' .values.sum 'values '--'
 -->
<!--  LocalWords:  .isnull 'Original 'EMP' 'Constant .fillna 'Column
 -->
<!--  LocalWords:  'NaNs' 'Backfill 'backfill' 'pad' 'Employee .plot
 -->
<!--  LocalWords:  .interpolate 'linear' 'Linear 'cubic' .index 'div'
 -->
<!--  LocalWords:  'href' 'lxml' 'class' 'footer' 'span' 'id' 04d -1
 -->
<!--  LocalWords:  'mod-date' '01-Jan-01' 'Python' random.randint s'
 -->
<!--  LocalWords:  'Feb' 'Mar' 'Apr' 'May' 'Jun' 'Jul' 'Aug' 'Sep' .-
 -->
<!--  LocalWords:  'Oct' 'Nov' 'Dec' plt.bar rect.get plt.text Vail
 -->
<!--  LocalWords:  'center' 'bottom' 'Birthday plt.grid 'dotted' cvt
 -->
<!--  LocalWords:  'Month' plt.title -.-. ..-. --. -.- -- --- --.- 5s
 -->
<!--  LocalWords:  ..- ...- -.-- sent.upper cvt.keys 'spc' 'Do JSON
 -->
<!--  LocalWords:  inp.upper json 'words.json' json.load .lower ord
 -->
<!--  LocalWords:  random.choice c.upper 'You pos avail.index c.lower
 -->
<!--  LocalWords:  lbl words.json chr word.index word.upper ldots lev
 -->
<!--  LocalWords:  Levenshtein textrm kelm ke kel hel kelmo kello .py
 -->
<!--  LocalWords:  smeltn smelton smelmon smlmon 00pm OpenWeatherMap
 -->
